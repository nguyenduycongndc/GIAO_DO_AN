!function () { var e = function () { var e = { jY: "G9AD", _: {}, status: "unloaded", basePath: function () { var e = window.CKFINDER_BASEPATH || ""; if (!e) for (var t = document.getElementsByTagName("script"), n = 0; n < t.length; n++) { var o = t[n].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i); if (o) { e = o[1]; break } } return -1 == e.indexOf("://") && (e = 0 === e.indexOf("/") ? location.href.match(/^.*?:\/\/[^\/]*/)[0] + e : location.href.match(/^[^\?]*\/(?:)/)[0] + e), e }(), getUrl: function (e) { return -1 == e.indexOf("://") && 0 !== e.indexOf("/") && (e = this.basePath + e), this.jY && "/" != e.charAt(e.length - 1) && (e += (e.indexOf("?") >= 0 ? "&" : "?") + "t=" + this.jY), e } }, t = window.CKFINDER_GETURL; if (t) { var n = e.getUrl; e.getUrl = function (o) { return t.call(e, o) || n.call(e, o) } } return e }(); function t(t) { return e.instances[t] } var n = { callback: 1, selectThumbnailActionFunction: 1, selectActionFunction: 1 }; function o(t) { var n = this; n.id = t.name; var o = t.element.getDocument().getWindow().$, i = e.oC.getWindow().$; n.inPopup = !(!o || !o.opener), n.inIframe = !n.inPopup && o != i.top && "iframe" == o.frameElement.nodeName.toLowerCase(), n.inFrame = !n.inPopup && o != i.top && "frame" == o.frameElement.nodeName.toLowerCase(), n.inUrlPopup = !(!n.inPopup || !i.opener) } if (e.jd = function () { var e = this, t = {}; for (var o in e) e.hasOwnProperty(o) && ("function" == typeof e[o] && !n[o] || void 0 === e[o] || (t[o] = e[o])); return e.callback && (t.callback = e.callback), t }, e.lj = function (e) { var t, n = this, o = ""; return (e = e || n.basePath) && 0 !== e.length || (e = CKFinder.DEFAULT_basePath), "/" != e.substr(e.length - 1, 1) && (e += "/"), e += "ckfinder.html", n.hh && ("function" == typeof (t = n.hh) && (t = t.toString().match(/function ([^(]+)/)[1]), o += "?action=js&amp;func=" + t), n.jx && (o += o ? "&amp;" : "?", o += "data=" + encodeURIComponent(n.jx)), n.disableThumbnailSelection ? (o += o ? "&amp;" : "?", o += "dts=1") : (n.lH || n.hh) && ("function" == typeof (t = n.lH || n.hh) && (t = t.toString().match(/function ([^(]+)/)[1]), o += o ? "&amp;" : "?", o += "thumbFunc=" + t, n.nm ? o += "&amp;tdata=" + encodeURIComponent(n.nm) : !n.lH && n.jx && (o += "&amp;tdata=" + encodeURIComponent(n.jx))), n.startupPath && (o += o ? "&amp;" : "?", o += "start=" + encodeURIComponent(n.startupPath + (n.startupFolderExpanded ? ":1" : ":0"))), void 0 === n.rememberLastFolder || n.rememberLastFolder || (o += o ? "&amp;" : "?", o += "rlf=0"), n.id && (o += o ? "&amp;" : "?", o += "id=" + encodeURIComponent(n.id)), n.skin && (o += o ? "&amp;" : "?", o += "skin=" + encodeURIComponent(n.skin)), e + o }, o.prototype = { _: {}, addFileContextMenuOption: function (n, o, i) { var a = t(this.id), r = "FileContextMenu_" + n.command; a.bD(r, { exec: function (e) { var t = e.ld["filesview.filesview"].tools.dH(); o(e.cg, t) } }), n.command = r, n.group || (n.group = "file1"), a.gp(r, n), a.ld["filesview.filesview"].on("beforeContextMenu", function (t) { if (i) { var n = i(this.tools.dH()); n && (t.data.bj[r] = -1 == n ? e.aY : e.aS) } else t.data.bj[r] = e.aS }) }, disableFileContextMenuOption: function (e, n) { var o = t(this.id), i = n ? "FileContextMenu_" + e : e, a = function (e) { delete e.data.bj[i] }; return o.ld["filesview.filesview"].on("beforeContextMenu", a), function () { o.ld["filesview.filesview"].removeListener("beforeContextMenu", a) } }, addFolderContextMenuOption: function (n, o, i) { var a = t(this.id), r = "FolderContextMenu_" + n.command; a.bD(r, { exec: function (e) { o(e.cg, e.aV) } }), n.command = r, n.group || (n.group = "folder1"), a.gp(r, n), a.ld["foldertree.foldertree"].on("beforeContextMenu", function (t) { if (i) { var n = i(this.app.aV); n && (t.data.bj[r] = -1 == n ? e.aY : e.aS) } else t.data.bj[r] = e.aS }) }, disableFolderContextMenuOption: function (e, n) { var o = t(this.id), i = n ? "FolderContextMenu_" + e : e, a = function (e) { delete e.data.bj[i] }; return o.ld["foldertree.foldertree"].on("beforeContextMenu", a), function () { o.ld["foldertree.foldertree"].removeListener("beforeContextMenu", a) } }, addFolderDropMenuOption: function (n, o, i) { var a = t(this.id), r = "FolderDropMenu_" + n.command; a.bD(r, { exec: function (e) { o(e.cg, e.cK.oa()) } }), n.command = r; var l = new e.iD(a, r, n); a.ld["foldertree.foldertree"].on("beforeDropMenu", function (e) { i && !i.call(a.cg, e.data.folder) || (e.data.iG[r] = l) }) }, disableFolderDropMenuOption: function (e, n) { var o = t(this.id), i = n ? "FolderDropMenu_" + e : e, a = function (e) { delete e.data.iG[i] }; return o.ld["foldertree.foldertree"].on("beforeDropMenu", a), function () { o.ld["foldertree.foldertree"].removeListener("beforeDropMenu", a) } }, getSelectedFile: function () { return t(this.id).ld["filesview.filesview"].tools.dH() }, getSelectedFiles: function () { return t(this.id).ld["filesview.filesview"].tools.oO(!0) }, getSelectedFolder: function () { return t(this.id).aV }, filterFiles: function (e) { t(this.id).ld["filesview.filesview"].oW("requestRenderFiles", { lookup: e }) }, setUiColor: function (e) { return t(this.id).setUiColor(e) }, destroy: function (e) { t(this.id).destroy(), e && e() }, openDialog: function (n, o) { var i = this, a = new e.dom.document(window.document).getHead(); t(i.id).document.getWindow(); return (i.inFrame || i.inPopup || i.inIframe) && (e.document = t(i.id).document), t(i.id).openDialog(n, o, a) }, openMsgDialog: function (e, n) { t(this.id).msgDialog(e, n) }, openConfirmDialog: function (e, n, o) { t(this.id).fe(e, n, o) }, openInputDialog: function (e, n, o, i) { t(this.id).hs(e, n, o, i) }, openSkippedFilesDialog: function (e, n, o, i) { t(this.id).skippedFilesDialog(e, n, o, i) }, addTool: function (e) { return t(this.id).plugins.tools.addTool(e) }, addToolPanel: function (e) { return t(this.id).plugins.tools.addToolPanel(e) }, removeTool: function (e) { t(this.id).plugins.tools.removeTool(e) }, showTool: function (e) { t(this.id).plugins.tools.showTool(e) }, hideTool: function (e) { t(this.id).plugins.tools.hideTool(e) }, getResourceType: function (e) { return t(this.id).getResourceType(e) }, log: function (t) { e.log.apply(e.log, arguments) }, getLog: function () { return e.mZ() }, emptyBasket: function () { t(this.id).execCommand("TruncateBasket") }, replaceUploadForm: function (n, o, i, a) { var r = t(this.id); if (a || (a = 10), !(a >= (r.dC || 20))) return r.dC = a, r.ld["formpanel.formpanel"].on("beforeUploadFileForm", function (t) { if (2 == t.data.step && !(a > r.dC)) { t.cancel(!0); var l = this.data(); t.data.folder; try { "upload" == l.dc ? this.oW("requestUnloadForm", function () { this.app.cS("upload").bR(e.aS) }) : (this.data().dc && this.oW("requestUnloadForm"), i || this.eh.removeClass("show_border"), this.oW("requestLoadForm", { html: n, command: "upload" }), o && o()) } catch (n) { throw this.oW("failedUploadFileForm", t.data), this.oW("afterUploadFileForm", t.data), e.ba(n) } } }), { hide: function () { r.oW("requestUnloadForm", function () { r.cS("upload").bR(e.aS) }) } } }, resizeFormPanel: function (e) { var n = t(this.id); if (void 0 === e) n.document.getById("panel_view").setStyle("height", ""), n.document.getById("panel_widget").setStyle("height", ""); else { var o = Math.min(e, Math.max(90, n.document.getById("main_container").$.offsetHeight - 300)); n.document.getById("panel_view").setStyle("height", o + "px"), n.document.getById("panel_widget").setStyle("height", o - 3 + "px") } n.layout.ea(!0) }, refreshOpenedFolder: function () { var e = t(this.id), n = e.ld["filesview.filesview"].tools.currentFolder(); e.oW("requestSelectFolder", { folder: n }) }, selectFile: function (e) { t(this.id).oW("requestSelectFile", { file: e, scrollTo: 1 }) }, closePopup: function () { this.inPopup && t(this.id).element.getDocument().getWindow().$.close() }, openFolder: function (e, n) { var o = t(this.id); n = n.replace(/\/$/, ""), e = e.toLowerCase(); for (var i = 0; i < o.folders.length; i++) { var a = o.folders[i]; if (a.getPath().replace(/\/$/, "") == n && e == a.type.toLowerCase()) return o.oW("requestSelectFolder", { folder: a }), void o.oW("requestShowFolderFiles", { folder: a }) } }, setUiColor: function (e) { t(this.id).setUiColor(e) }, execCommand: function (e) { t(this.id).execCommand(e) } }, function () { function t(e) { for (var t = 1; CKFinder._.instanceConfig[t];)t++; return CKFinder._.instanceConfig[t] = e, t } window.CKFinder = function (e, t) { if (e) for (var n in e) e.hasOwnProperty(n) && ("function" == typeof e[n] && "callback" != n || (this[n] = e[n])); this.callback = t }, CKFinder.prototype = { create: function (t) { var n = "ckf" + Math.random().toString().substr(2, 9); document.write('<span id="' + n + '"></span>'), t = e.tools.extend(e.jd.call(this), t, !0); var o = e.replace(n, t, CKFinder); return this.api = o.cg, o.cg }, appendTo: function (t, n) { n = e.tools.extend(e.jd.call(this), n, !0); var o = e.appendTo(t, n, CKFinder); return this.api = o.cg, o.cg }, replace: function (t, n) { n = e.tools.extend(e.jd.call(this), n, !0); var o = e.replace(t, n, CKFinder); return this.api = o.cg, o.cg }, popup: function (t, n) { var o; null !== t && "object" == typeof t && (o = t, t = parseInt(o.width, 10), n = parseInt(o.height, 10)), n = n || "70%", "string" == typeof (t = t || "80%") && t.length > 1 && "%" == t.substr(t.length - 1, 1) && (t = parseInt(window.screen.width * parseInt(t, 10) / 100, 10)), "string" == typeof n && n.length > 1 && "%" == n.substr(n.length - 1, 1) && (n = parseInt(window.screen.height * parseInt(n, 10) / 100, 10)), t < 200 && (t = 200), n < 200 && (n = 200); var i = parseInt((window.screen.height - n) / 2, 10), a = parseInt((window.screen.width - t) / 2, 10), r = (o && o.popupFeatures ? o.popupFeatures : CKFinder.config.popupFeatures) + ",width=" + t + ",height=" + n + ",top=" + i + ",left=" + a, l = e.env.webkit ? "about:blank" : "", s = window.open(l, "CKFinderpopup", r, !0); if (!s) return !1; this.width = this.height = "100%"; var d = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>' + (o && o.popupTitle ? o.popupTitle : CKFinder.config.popupTitle) + '</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>', c = this; function u() { var o = new e.dom.document(s.document); o.$.open(), e.env.isCustomDomain() && (o.$.domain = window.document.domain), o.$.write(d), o.$.close(); try { return -1 == navigator.userAgent.toLowerCase().indexOf(" chrome/") && (s.moveTo(a, i), s.resizeTo(t, n)), s.focus(), c.appendTo(o.bH()) } catch (e) { return c.appendTo(o.bH()) } return !1 } return CKFinder.env.safari ? (setTimeout(u, 0), null) : u() } }, CKFinder._ = {}, CKFinder._.instanceConfig = [], CKFinder.lang = {}, CKFinder.version = "2.6.2", CKFinder.revision = "UNKNOWN", CKFinder.addPlugin = function (t, n, o) { var i = { bM: o || [] }; for (var a in "function" == typeof n && (n = { appReady: n }), n) n.hasOwnProperty(a) && "connectorInitialized" != a && "uiReady" != a && (i[a] = n[a]); i.bz = function (t) { if (t.config.readOnly && !1 === i.readOnly) return null; n.connectorInitialized && t.on("connectorInitialized", function (e) { var o = n.connectorInitialized; o && o.call(o, t.cg, e.data.xml) }, null, null, 1e3), n.connectorResponse && t.on("connectorResponse", function (e) { var o = n.connectorResponse; o && o.call(o, t.cg, e.data.xml) }), n.galleryCallback && t.on("launchGallery", function (e) { var o = n.galleryCallback; o && (e.data.bx = o.call(o, t.cg, e.data.selected, e.data.files)) }), n.uiReady && t.on("uiReady", function () { var e = n.uiReady; e.call(e, t.cg) }, null, null, 1e3), n.appReady && t.on("appReady", function () { var e = n.appReady; e.call(e, t.cg) }, null, null, 1e3), function (t, n) { if (t.toolbarButtons) for (var o = 0; o < t.toolbarButtons.length; o++) { var i = t.toolbarButtons[o]; if (!n.bY._.items[i[0]]) { var a = e.tools.deepCopy(i[1]), r = a.command; if (!a.command) { var l = i[1].onClick; r = "ToolbarButton_" + i[0], n.bD(r, { exec: function (e) { l(e.cg) } }), a.command = r } var s = e.tools.capitalize(t.name); "function" == typeof a.label ? a.label = a.label.call(t, n.cg) : n.lang[t.name] && n.lang[t.name][a.label] ? a.label = n.lang[t.name][a.label] : n.lang[s] && n.lang[s][a.label] ? a.label = n.lang[s][a.label] : n.lang[a.label] && (a.label = n.lang[a.label]), n.bY.add(i[0], CKFinder._.UI_BUTTON, a) } } }(i, t) }, e.plugins.add(t, i) }, CKFinder.getPluginPath = function (t) { return e.plugins.getPath(t) }, CKFinder.addExternalPlugin = function (t, n, o) { e.plugins.tR(t, n, o) }, CKFinder.setPluginLang = function (t, n, o) { e.plugins.rX(t, n, o) }, CKFinder.dialog = { add: function (t, n) { "function" == typeof n && (n = e.tools.override(n, function (e) { return function (t) { return e(t.cg) } })), e.dialog.add(t, n) } }, CKFinder.tools = {}, CKFinder.env = {}, CKFinder.dom = {}, CKFinder.create = function (e, t, n, o, i) { var a; if (null !== e && "object" == typeof e) for (var r in a = new CKFinder, e) a[r] = e[r]; else (a = new CKFinder).basePath = e, t && (a.width = t), n && (a.height = t), o && (a.selectActionFunction = o), i && (a.callback = i); return a.create() }, CKFinder.popup = function (e, t, n, o, i) { var a, r, l; if (null !== e && "object" == typeof e) { for (var s in a = new CKFinder, e) a[s] = e[s]; r = e.popupTitle, l = e.popupFeatures, t || (t = e.width), n || (n = e.height) } else (a = new CKFinder).basePath = e, o && (a.selectActionFunction = o), i && (a.callback = i); return a.popup({ width: t, height: n, popupTitle: r, popupFeatures: l }) }, CKFinder.setupFCKeditor = function (n, o, i, a) { var r, l; if (null !== o && "object" == typeof o) { for (var s in l = t(o), r = new CKFinder, o) if (r[s] = o[s], "width" == s) { var d = r[s] || 800; "string" == typeof d && d.length > 1 && "%" == d.substr(d.length - 1, 1) && (d = parseInt(window.screen.width * parseInt(d, 10) / 100, 10)), n.Config.LinkBrowserWindowWidth = d, n.Config.ImageBrowserWindowWidth = d, n.Config.FlashBrowserWindowWidth = d } else if ("height" == s) { var c = r[s] || 600; "string" == typeof c && c.length > 1 && "%" == c.substr(c.length - 1, 1) && (c = parseInt(window.screen.height * parseInt(c, 10) / 100, 10)), n.Config.LinkBrowserWindowHeight = c, n.Config.ImageBrowserWindowHeight = c, n.Config.FlashBrowserWindowHeight = c } } else (r = new CKFinder).basePath = o; var u = r.basePath; "/" != u.substr(0, 1) && -1 == u.indexOf("://") && (u = document.location.pathname.substring(0, document.location.pathname.lastIndexOf("/") + 1) + u); var f = -1 !== (u = e.lj.call(r, u)).indexOf("?") ? "&" : "?"; l && (u += f + "configId=" + l, f = "&"), n.Config.LinkBrowserURL = u, n.Config.ImageBrowserURL = u + f + "type=" + (i || "Images"), n.Config.FlashBrowserURL = u + f + "type=" + (a || "Flash"); var p = u.substring(0, 1 + u.lastIndexOf("/")); n.Config.LinkUploadURL = p + "core/connector/" + CKFinder.config.connectorLanguage + "/connector." + CKFinder.config.connectorLanguage + "?command=QuickUpload&type=Files", n.Config.ImageUploadURL = p + "core/connector/" + CKFinder.config.connectorLanguage + "/connector." + CKFinder.config.connectorLanguage + "?command=QuickUpload&type=" + (i || "Images"), n.Config.FlashUploadURL = p + "core/connector/" + CKFinder.config.connectorLanguage + "/connector." + CKFinder.config.connectorLanguage + "?command=QuickUpload&type=" + (a || "Flash") }, CKFinder.setupCKEditor = function (n, o, i, a) { if (null !== n) { var r, l; if (null !== o && "object" == typeof o) { for (var s in l = t(o), r = new CKFinder, o) if (r[s] = o[s], "width" == s) { var d = r[s] || 800; "string" == typeof d && d.length > 1 && "%" == d.substr(d.length - 1, 1) && (d = parseInt(window.screen.width * parseInt(d, 10) / 100, 10)), n.config.filebrowserWindowWidth = d } else if ("height" == s) { var c = r[s] || 600; "string" == typeof c && c.length > 1 && "%" == c.substr(c.length - 1, 1) && (c = parseInt(window.screen.height * parseInt(c, 10) / 100, 10)), n.config.filebrowserWindowHeight = c } } else (r = new CKFinder).basePath = o; var u = r.basePath; "/" != u.substr(0, 1) && -1 == u.indexOf("://") && (u = document.location.pathname.substring(0, document.location.pathname.lastIndexOf("/") + 1) + u); var f = -1 !== (u = e.lj.call(r, u)).indexOf("?") ? "&" : "?"; l && (u += f + "configId=" + l, f = "&"), n.config.filebrowserBrowseUrl = u, n.config.filebrowserImageBrowseUrl = u + f + "type=" + (i || "Images"), n.config.filebrowserFlashBrowseUrl = u + f + "type=" + (a || "Flash"); var p = u.substring(0, 1 + u.lastIndexOf("/")); n.config.filebrowserUploadUrl = p + "core/connector/" + CKFinder.config.connectorLanguage + "/connector." + CKFinder.config.connectorLanguage + "?command=QuickUpload&type=Files", n.config.filebrowserImageUploadUrl = p + "core/connector/" + CKFinder.config.connectorLanguage + "/connector." + CKFinder.config.connectorLanguage + "?command=QuickUpload&type=" + (i || "Images"), n.config.filebrowserFlashUploadUrl = p + "core/connector/" + CKFinder.config.connectorLanguage + "/connector." + CKFinder.config.connectorLanguage + "?command=QuickUpload&type=" + (a || "Flash") } else { for (var h in CKEDITOR.instances) CKFinder.setupCKEditor(CKEDITOR.instances[h], o, i, a); CKEDITOR.on("instanceCreated", function (e) { CKFinder.setupCKEditor(e.editor, o, i, a) }) } } }(), e.event || (e.event = function () { }, e.event.du = function (t, n) { var o = e.event.prototype; for (var i in o) null == t[i] && (t[i] = o[i]) }, e.event.prototype = function () { var t, n, o, i, a = function (e) { var t = e.kk && e.kk() || e._ || (e._ = {}); return t.cC || (t.cC = {}) }, r = function (e) { this.name = e, this.dF = [] }; return r.prototype = { mi: function (e) { for (var t = 0, n = this.dF; t < n.length; t++)if (n[t].fn == e) return t; return -1 } }, { on: function (e, t, n, o, i) { var l = a(this), s = l[e] || (l[e] = new r(e)); if (s.mi(t) < 0) { var d = s.dF; n || (n = this), isNaN(i) && (i = 10); var c = this, u = function (i, a, r, l) { var s = { name: e, jN: this, application: i, data: a, jO: o, stop: r, cancel: l, removeListener: function () { c.removeListener(e, t) } }; return t.call(n, s), s.data }; u.fn = t, u.nT = i; for (var f = d.length - 1; f >= 0; f--)if (d[f].nT <= i) return void d.splice(f + 1, 0, u); d.unshift(u) } }, oW: (t = !1, n = function () { t = !0 }, o = !1, i = function (e) { o = !e || 2 }, function (r, l, s, d) { "function" == typeof l ? (d = l, l = null) : "function" == typeof s && (d = s, s = null), "mousemove" != r && e.log("[EVENT] " + r, l, d); var c = a(this)[r], u = t, f = o; if (t = o = !1, c) { var p = c.dF; if (p.length) { p = p.slice(0); for (var h = 0; h < p.length; h++) { var m = p[h].call(this, s, l, n, i); if (void 0 !== m && (l = m), t || o && 2 != o) break } } } var g = o || void 0 !== l && (l && void 0 !== l.result ? l.result : l); return "function" == typeof d && 2 != o && (g = d.call(this, o, l) || g), t = u, o = f, g }), cr: function (e, t, n) { var o = this.oW(e, t, n); return delete a(this)[e], o }, removeListener: function (e, t) { var n = a(this)[e]; if (n) { var o = n.mi(t); o >= 0 && n.dF.splice(o, 1) } }, mF: function () { for (var e = a(this), t = 0; t < e.length; t++)e[t].dF = [] }, rC: function (e) { var t = a(this)[e]; return t && t.dF.length > 0 } } }()), e.application || (e.kZ = 0, e.fc = 1, e.qE = 2, e.application = function (t, n, o, i) { var a = this; a._ = { instanceConfig: t, element: n }, a.ff = o || e.kZ, e.event.call(a), a.iI(i) }, e.application.replace = function (t, n, o) { var i = t; if ("object" != typeof i) { if (!(i = document.getElementById(t))) for (var a = 0, r = document.getElementsByName(t); (i = r[a++]) && "textarea" != i.tagName.toLowerCase();); if (!i) throw '[CKFINDER.application.replace] The element with id or name "' + t + '" was not found.' } return new e.application(n, i, e.fc, o) }, e.application.appendTo = function (t, n, o) { if ("object" != typeof t && !(t = document.getElementById(t))) throw '[CKFINDER.application.appendTo] The element with id "' + t + '" was not found.'; return new e.application(n, t, e.qE, o) }, e.application.prototype = { iI: function () { (e.application.eb || (e.application.eb = [])).push(this) }, oW: function (t, n, o) { return e.event.prototype.oW.call(this, t, n, this, o) }, cr: function (t, n, o) { return e.event.prototype.cr.call(this, t, n, this, o) } }, e.event.du(e.application.prototype, !0)), !e.env) { var i = /rv:([\d\.]+)/, a = /trident\/([\d]+)/; e.env = function () { var e = navigator.userAgent.toLowerCase(), t = window.opera, n = { ie: !1, iemodern: !1, opera: !!t && t.version, webkit: e.indexOf(" applewebkit/") > -1, air: e.indexOf(" adobeair/") > -1, mac: e.indexOf("macintosh") > -1, quirks: "BackCompat" == document.compatMode, isCustomDomain: function () { return this.ie && document.domain != window.location.hostname } }; n.gecko = "Gecko" == navigator.product && !n.webkit && !n.opera, n.chrome = !1, n.safari = !1, n.webkit && (e.indexOf(" chrome/") > -1 ? n.chrome = !0 : n.safari = !0); var o = 0; if (n.ie && (o = parseFloat(e.match(/msie (\d+)/)[1]), n.ie8 = !!document.documentMode, n.ie8Compat = 8 == document.documentMode, n.ie7Compat = 7 == o && !document.documentMode || 7 == document.documentMode, n.ie6Compat = o < 7 || n.quirks), n.gecko) { var r = e.match(i); r && (o = 1e4 * (r = r[1].split("."))[0] + 100 * (r[1] || 0) + +(r[2] || 0)), a.test(e) ? (n.gecko = !1, n.iemodern = !0) : n.isMobile = e.indexOf("fennec") > -1 } return n.opera && (o = parseFloat(t.version()), n.isMobile = e.indexOf("opera mobi") > -1), n.air && (o = parseFloat(e.match(/ adobeair\/(\d+)/)[1])), n.webkit && (o = parseFloat(e.match(/ applewebkit\/(\d+)/)[1]), n.isMobile = e.indexOf("mobile") > -1), n.version = o, n.isCompatible = n.ie && o >= 6 || n.iemodern && o >= 11 || n.gecko && o >= 10801 || n.opera && o >= 9.5 || n.air && o >= 1 || n.webkit && o >= 522 || !1, n.cssClass = "browser_" + (n.ie ? "ie" : n.iemodern ? "iemodern" : n.gecko ? "gecko" : n.opera ? "opera" : n.air ? "air" : n.webkit ? "webkit" : "unknown"), n.quirks && (n.cssClass += " browser_quirks"), n.ie && (n.cssClass += " browser_ie" + (n.version < 7 ? "6" : n.version >= 8 ? "8" : "7"), n.quirks && (n.cssClass += " browser_iequirks"), n.ie7Compat && (n.cssClass += " browser_ie7Compat")), n.gecko && o < 10900 && (n.cssClass += " browser_gecko18"), n }(), CKFinder.env = e.env } var r = e.env, l = r.ie; "unloaded" == e.status && function () { e.event.du(e), e.dO = function () { if ("basic_ready" == e.status) { delete e.dO; var t = document.createElement("script"); t.type = "text/javascript", t.src = e.basePath + "ckfinder.js", document.getElementsByTagName("head")[0].appendChild(t) } else e.dO.qr = !0 }, e.mS = 0, e.uQ = "ckfinder", e.uM = !0; var t, n = function (t, n, o, i) { if (r.isCompatible) { e.dO && e.dO(); var a = o(t, n, i); return e.add(a), a } return null }; e.replace = function (t, o, i) { return n(t, o, e.application.replace, i) }, e.appendTo = function (t, o, i) { return n(t, o, e.application.appendTo, i) }, e.add = function (e) { (this._.io || (this._.io = [])).push(e) }, e.uL = function () { for (var e = document.getElementsByTagName("textarea"), t = 0; t < e.length; t++) { var n = null, o = e[t]; o.name; if (o.name || o.id) { if ("string" == typeof arguments[0]) { if (!new RegExp("(?:^| )" + arguments[0] + "(?:$| )").test(o.className)) continue } else if ("function" == typeof arguments[0] && (n = {}, !1 === arguments[0](o, n))) continue; this.replace(o, n) } } }, t = function () { var t = e.dO, n = e.mS; e.status = "basic_ready", t && t.qr ? t() : n && setTimeout(function () { e.dO && e.dO() }, 1e3 * n) }, window.addEventListener ? window.addEventListener("load", t, !1) : window.attachEvent && window.attachEvent("onload", t), e.status = "basic_loaded" }(), e.dom = {}, CKFinder.dom = e.dom; var s = e.dom; e.ajax = function () { var t = function (e) { return 4 == e.readyState && (e.status >= 200 && e.status < 300 || 304 == e.status || 0 === e.status || 1223 == e.status) }, n = function (e) { return t(e) ? e.responseText : null }, o = function (n) { if (t(n)) { var o = n.responseXML, i = new e.xml(o && o.firstChild && o.documentElement && "parsererror" != o.documentElement.nodeName ? o : n.responseText.replace(/^[^<]+/, "").replace(/[^>]+$/, "")); if (i && i.mq && i.mq.documentElement && "parsererror" != i.mq.documentElement.nodeName && "html" != i.mq.documentElement.nodeName && "br" != i.mq.documentElement.nodeName) return i } var a = e.nG || e.jt, r = n.responseText, l = a.lang.ErrorMsg[r ? "XmlError" : "XmlEmpty"] + "<br>"; return i && i.mq && (i.mq.parseError && i.mq.parseError.reason ? l += i.mq.parseError.reason : i.mq.documentElement && "parsererror" == i.mq.documentElement.nodeName && (l += i.mq.documentElement.textContent)), r ? ((/text\/plain/.test(n.getResponseHeader("Content-Type")) || /<Connector\s*/.test(r)) && (r = '<div style="width:600px; overflow:scroll"><font>' + (r = (r = e.tools.htmlEncode(r)).replace(/\n/g, "<br>")) + "</font></div>"), a.msgDialog(a.lang.SysErrorDlgTitle, l + "<br>" + a.lang.ErrorMsg.XmlRawResponse.replace("%s", "<br><br>" + r))) : a.msgDialog(a.lang.SysErrorDlgTitle, l), {} }, i = function (t, n, o, i) { var a = !!n; e.log("[AJAX] " + (i ? "POST" : "GET") + " " + t); var r = function () { if (!l || "file:" != location.protocol) try { return new XMLHttpRequest } catch (e) { } try { return new ActiveXObject("Msxml2.XMLHTTP") } catch (e) { } try { return new ActiveXObject("Microsoft.XMLHTTP") } catch (e) { } return null }(); return r ? (i ? r.open("POST", t, a) : r.open("GET", t, a), a && (r.onreadystatechange = function () { 4 == r.readyState && (n(o(r)), r = null) }), i ? (r.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=utf-8"), r.send(i)) : r.send(null), a ? "" : o(r)) : null }; return { load: function (e, t, o) { return i(e, t, n, o) }, loadXml: function (e, t, n) { return i(e, t, o, n) } } }(), CKFinder.ajax = e.ajax, function () { var t, n, o = []; e.tools = { arrayCompare: function (e, t) { if (!e && !t) return !0; if (!e || !t || e.length != t.length) return !1; for (var n = 0; n < e.length; n++)if (e[n] != t[n]) return !1; return !0 }, clone: function (e) { var t; if (e && e instanceof Array) { t = []; for (var n = 0; n < e.length; n++)t[n] = this.clone(e[n]); return t } if (null === e || "object" != typeof e || e instanceof String || e instanceof Number || e instanceof Boolean || e instanceof Date) return e; for (var o in t = new e.constructor, e) { var i = e[o]; t[o] = this.clone(i) } return t }, capitalize: function (e) { return e.charAt(0).toUpperCase() + e.substring(1).toLowerCase() }, extend: function (e) { var t, n, o = arguments.length; "boolean" == typeof (t = arguments[o - 1]) ? o-- : "boolean" == typeof (t = arguments[o - 2]) && (n = arguments[o - 1], o -= 2); for (var i = 1; i < o; i++) { var a = arguments[i]; for (var r in a) !0 !== t && null != e[r] || (!n || r in n) && (e[r] = a[r]) } return e }, prototypedCopy: function (e) { var t = function () { }; return t.prototype = e, new t }, isArray: function (e) { return !!e && e instanceof Array }, cssStyleToDomStyle: (t = document.createElement("div").style, n = void 0 !== t.cssFloat ? "cssFloat" : void 0 !== t.styleFloat ? "styleFloat" : "float", function (e) { return "float" == e ? n : e.replace(/-./g, function (e) { return e.substr(1).toUpperCase() }) }), htmlEncode: function (e) { var t = function (e) { var t = new s.element("span"); return t.setText(e), t.getHtml() }, n = "<br>" == t("\n").toLowerCase() ? function (e) { return t(e).replace(/<br>/gi, "\n") } : t, o = ">" == t(">") ? function (e) { return n(e).replace(/>/g, "&gt;") } : n, i = "&nbsp; " == t("  ") ? function (e) { return o(e).replace(/&nbsp;/g, " ") } : o; return this.htmlEncode = i, this.htmlEncode(e) }, escapeHtml: function (e) { var t = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#039;" }; return e.replace(/[&<>"']/g, function (e) { return t[e] }) }, getNextNumber: function () { var e = 0; return function () { return ++e } }(), getRandomString: function (e) { var t = "abcdefghijklmnopqrstuvwxyz0123456789", n = [], o = ""; if (window.crypto && window.crypto.getRandomValues) n = new Uint8Array(e), window.crypto.getRandomValues(n); else for (var i = 0; i < e; i++)n.push(Math.floor(256 * Math.random())); for (var a = 0; a < n.length; a++) { var r = t.charAt(n[a] % t.length); o += Math.random() > .5 ? r.toUpperCase() : r } return o }, override: function (e, t) { return t(e) }, setTimeout: function (e, t, n, o, i) { return i || (i = window), n || (n = i), i.setTimeout(function () { o ? e.apply(n, [].concat(o)) : e.apply(n) }, t || 0) }, trim: function () { var e = /(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g; return function (t) { return t ? t.replace(e, "") : null } }(), ltrim: function () { var e = /^[ \t\n\r]+/g; return function (t) { return t ? t.replace(e, "") : null } }(), rtrim: function () { var e = /[ \t\n\r]+$/g; return function (t) { return t ? t.replace(e, "") : null } }(), indexOf: Array.prototype.indexOf ? function (e, t) { return e.indexOf(t) } : function (e, t) { for (var n = 0, o = e.length; n < o; n++)if (e[n] === t) return n; return -1 }, bind: function (e, t) { return function () { return e.apply(t, arguments) } }, createClass: function (t) { var n = t.$, o = t.base, i = t.vd || t._, a = t.ej, r = t.statics; if (i) { var l = n; n = function () { var t = this, n = t._ || (t._ = {}); for (var o in i) { var a = i[o]; n[o] = "function" == typeof a ? e.tools.bind(a, t) : a } l.apply(t, arguments) } } return o && (n.prototype = this.prototypedCopy(o.prototype), n.prototype.constructor = n, n.prototype.base = function () { this.base = o.prototype.base, o.apply(this, arguments), this.base = arguments.callee }), a && this.extend(n.prototype, a, !0), r && this.extend(n, r, !0), n }, addFunction: function (e, t) { return o.push(function () { e.apply(t || this, arguments) }) - 1 }, removeFunction: function (e) { o[e] = null }, callFunction: function (e) { return o[e].apply(window, Array.prototype.slice.call(arguments, 1)) }, cssLength: function () { var e = /^\d+(?:\.\d+)?$/; return function (t) { return t + (e.test(t) ? "px" : "") } }(), repeat: function (e, t) { return new Array(t + 1).join(e) }, deepCopy: function (t) { var n = {}; if ("object" == typeof t) for (var o in void 0 !== t.length && (n = []), t) null === t[o] ? n[o] = null : "object" == typeof t[o] ? n[o] = e.tools.deepCopy(t[o]) : n[o] = t[o]; return n }, getUrlParam: function (e, t) { var n = new RegExp("(?:[?&]|&amp;)" + e + "=([^&]+)", "i"), o = (t || window).location.search.match(n); return o && o.length > 1 ? o[1] : null }, htmlEncode: function (e) { return e ? e = (e = (e = (e = "string" != typeof e ? e.toString() : e).replace(/&/g, "&amp;")).replace(/</g, "&lt;")).replace(/>/g, "&gt;") : "" }, setCookie: function (e, t, n) { document.cookie = e + "=" + t + (n ? "" : "; expires=Sat, 2 Jan 2038 01:00:00 UTC; path=/") }, getCookie: function (e) { var t = document.cookie.match(new RegExp("(^|\\s|;)" + e + "=([^;]*)")); return t && t.length > 0 ? t[2] : "" }, mH: function (e) { l ? (e.$.onfocusin = function () { e.addClass("focus_inside") }, e.$.onfocusout = function () { e.removeClass("focus_inside") }) : (e.$.addEventListener("focus", function () { e.addClass("focus_inside") }, !0), e.$.addEventListener("blur", function () { e.removeClass("focus_inside") }, !0)) }, formatSize: function (e, t, n) { return 0 == e ? "0" : e < 1 ? t.Kb.replace("%1", 1) : e < 1024 ? (n || (e = e.toFixed(2)), t.Kb.replace("%1", e)) : e < 1048576 ? t.Mb.replace("%1", (e / 1024).toFixed(2)) : t.Gb.replace("%1", (e / 1048576).toFixed(2)) }, formatSpeed: function (e, t) { return t.SizePerSecond.replace("%1", this.formatSize(e, t)) } }, CKFinder._.callFunction = e.tools.callFunction, CKFinder.tools = e.tools }(); var d = e.tools; s.event = function (e) { this.$ = e }, s.event.prototype = { oV: function () { return this.$.keyCode || this.$.which || 0 }, db: function () { var t = this, n = t.oV(); return (t.$.ctrlKey || t.$.metaKey) && (n += e.bP), t.$.shiftKey && (n += e.dy), t.$.altKey && (n += e.eJ), n }, preventDefault: function (e) { var t = this.$; t.preventDefault ? t.preventDefault() : t.returnValue = !1, e && this.stopPropagation() }, stopPropagation: function () { var e = this.$; e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0 }, bK: function () { var e = this.$.target || this.$.srcElement; return e ? new s.bi(e) : null }, getButton: function () { if (this.$.which) return this.$.which; switch (this.$.button) { case 1: return 1; case 4: return 2; case 2: return 3 } }, ov: function () { return 1 == this.getButton() } }, e.bP = 1e3, e.dy = 2e3, e.eJ = 4e3, s.dE = function (e) { e && (this.$ = e) }, s.dE.prototype = { kk: function () { var e; return (e = this.dw("_")) || this.fL("_", e = {}), e }, on: function (t) { var n = this, o = n.dw("_cke_nativeListeners"); if (o || (o = {}, n.fL("_cke_nativeListeners", o)), !o[t]) { var i = o[t] = function (t, n) { return function (o) { void 0 !== e && t.oW(n, new s.event(o)) } }(n, t); n.$.addEventListener ? n.$.addEventListener(t, i, !!e.event.jP) : n.$.attachEvent && n.$.attachEvent("on" + t, i) } return e.event.prototype.on.apply(n, arguments) }, removeListener: function (t) { var n = this; if (e.event.prototype.removeListener.apply(n, arguments), !n.rC(t)) { var o = n.dw("_cke_nativeListeners"), i = o && o[t]; i && (n.$.removeEventListener ? n.$.removeEventListener(t, i, !1) : n.$.detachEvent && n.$.detachEvent("on" + t, i), delete o[t]) } } }, function (t) { var n = {}; t.equals = function (e) { return e && e.$ === this.$ }, t.fL = function (e, t) { var o = this.iY(); return (n[o] || (n[o] = {}))[e] = t, this }, t.dw = function (e) { var t = this.$._ckf_expando, o = t && n[t]; return o && o[e] }, t.jF = function (e) { var t = this.$._ckf_expando, o = t && n[t], i = o && o[e]; return void 0 !== i && delete o[e], i || null }, t.iY = function () { return this.$._ckf_expando || (this.$._ckf_expando = d.getNextNumber()) }, e.event.du(t) }(s.dE.prototype), s.window = function (e) { s.dE.call(this, e) }, s.window.prototype = new s.dE, d.extend(s.window.prototype, { focus: function () { r.webkit && this.$.parent && this.$.parent.focus(), this.$.focus() }, eR: function () { var e = this.$.document, t = "CSS1Compat" == e.compatMode; return { width: (t ? e.documentElement.clientWidth : e.body.clientWidth) || 0, height: (t ? e.documentElement.clientHeight : e.body.clientHeight) || 0 } }, hV: function () { var e = this.$; if ("pageXOffset" in e) return { x: e.pageXOffset || 0, y: e.pageYOffset || 0 }; var t = e.document; return { x: t.documentElement.scrollLeft || t.body.scrollLeft || 0, y: t.documentElement.scrollTop || t.body.scrollTop || 0 } } }), s.document = function (e) { s.dE.call(this, e) }; var c = s.document; c.prototype = new s.dE, d.extend(c.prototype, { appendStyleSheet: function (e) { var t = this; if (t.$.createStyleSheet) t.$.createStyleSheet(e); else { var n = new s.element("link", t); n.setAttributes({ rel: "stylesheet", type: "text/css", href: e }), t.getHead().append(n) } }, createElement: function (e, t) { var n = new s.element(e, this); return t && (t.attributes && n.setAttributes(t.attributes), t.gS && n.setStyles(t.gS)), n }, jT: function (e) { return new s.text(e, this) }, focus: function () { this.getWindow().focus() }, getById: function (e) { var t = this.$.getElementById(e); return t ? new s.element(t) : null }, vu: function (e, t) { for (var n = this.$.documentElement, o = 0; n && o < e.length; o++) { var i = e[o]; if (t) for (var a = -1, r = 0; r < n.childNodes.length; r++) { var l = n.childNodes[r]; if ((!0 !== t || 3 != l.nodeType || !l.previousSibling || 3 != l.previousSibling.nodeType) && ++a == i) { n = l; break } } else n = n.childNodes[i] } return n ? new s.bi(n) : null }, eG: function (e, t) { return !l && t && (e = t + ":" + e), new s.iT(this.$.getElementsByTagName(e)) }, getHead: function () { var e = this.$.getElementsByTagName("head")[0]; return e = new s.element(e), (this.getHead = function () { return e })() }, bH: function () { var e = new s.element(this.$.body); return (this.bH = function () { return e })() }, gT: function () { var e = new s.element(this.$.documentElement); return (this.gT = function () { return e })() }, getWindow: function () { var e = new s.window(this.$.parentWindow || this.$.defaultView); return (this.getWindow = function () { return e })() } }), s.bi = function (t) { if (t) { switch (t.nodeType) { case e.cv: return new s.element(t); case e.fl: return new s.text(t) }s.dE.call(this, t) } return this }, s.bi.prototype = new s.dE, e.cv = 1, e.fl = 3, e.va = 8, e.om = 11, e.oh = 0, e.op = 1, e.gW = 2, e.gX = 4, e.mo = 8, e.lF = 16, d.extend(s.bi.prototype, { appendTo: function (e, t) { return e.append(this, t), e }, clone: function (t, n) { var o = this.$.cloneNode(t); if (!n) { var i = function (t) { if (t.nodeType == e.cv) { t.removeAttribute("id", !1), t.removeAttribute("_ckf_expando", !1); for (var n = t.childNodes, o = 0; o < n.length; o++)i(n[o]) } }; i(o) } return new s.bi(o) }, gE: function () { return !!this.$.previousSibling }, ge: function () { return !!this.$.nextSibling }, kB: function (e) { return e.$.parentNode.insertBefore(this.$, e.$.nextSibling), e }, insertBefore: function (e) { return e.$.parentNode.insertBefore(this.$, e.$), e }, vP: function (e) { return this.$.parentNode.insertBefore(e.$, this.$), e }, lU: function (e) { for (var t = [], n = this.getDocument().$.documentElement, o = this.$; o && o != n;) { for (var i = o.parentNode, a = -1, r = 0; r < i.childNodes.length; r++) { var l = i.childNodes[r]; if ((!e || 3 != l.nodeType || !l.previousSibling || 3 != l.previousSibling.nodeType) && (a++, l == o)) break } t.unshift(a), o = o.parentNode } return t }, getDocument: function () { var e = new c(this.$.ownerDocument || this.$.parentNode.ownerDocument); return (this.getDocument = function () { return e })() }, vA: function () { for (var e = this.$, t = e.parentNode && e.parentNode.firstChild, n = -1; t;) { if (n++, t == e) return n; t = t.nextSibling } return -1 }, hL: function (t, n, o) { if (o && !o.call) { var i = o; o = function (e) { return !e.equals(i) } } var a, r = !t && this.getFirst && this.getFirst(); if (!r) { if (this.type == e.cv && o && !1 === o(this, !0)) return null; r = this.dG() } for (; !r && (a = (a || this).getParent());) { if (o && !1 === o(a, !0)) return null; r = a.dG() } return r ? o && !1 === o(r) ? null : n && n != r.type ? r.hL(!1, n, o) : r : null }, hZ: function (t, n, o) { if (o && !o.call) { var i = o; o = function (e) { return !e.equals(i) } } var a, r = !t && this.dB && this.dB(); if (!r) { if (this.type == e.cv && o && !1 === o(this, !0)) return null; r = this.cf() } for (; !r && (a = (a || this).getParent());) { if (o && !1 === o(a, !0)) return null; r = a.cf() } return r ? o && !1 === o(r) ? null : n && r.type != n ? r.hZ(!1, n, o) : r : null }, cf: function (e) { var t, n = this.$; do { t = (n = n.previousSibling) && new s.bi(n) } while (t && e && !e(t)); return t }, vs: function () { return this.cf(function (e) { return 1 == e.$.nodeType }) }, dG: function (e) { var t, n = this.$; do { t = (n = n.nextSibling) && new s.bi(n) } while (t && e && !e(t)); return t }, vk: function () { return this.dG(function (e) { return 1 == e.$.nodeType }) }, getParent: function () { var e = this.$.parentNode; return e && 1 == e.nodeType ? new s.bi(e) : null }, vn: function (e) { var t = this, n = []; do { n[e ? "push" : "unshift"](t) } while (t = t.getParent()); return n }, vv: function (e) { var t = this; if (e.equals(t)) return t; if (e.contains && e.contains(t)) return e; var n = t.contains ? t : t.getParent(); do { if (n.contains(e)) return n } while (n = n.getParent()); return null }, gz: function (t) { var n = this.$, o = t.$; if (n.compareDocumentPosition) return n.compareDocumentPosition(o); if (n == o) return e.oh; if (this.type == e.cv && t.type == e.cv) { if (n.contains) { if (n.contains(o)) return e.lF + e.gX; if (o.contains(n)) return e.mo + e.gW } if ("sourceIndex" in n) return n.sourceIndex < 0 || o.sourceIndex < 0 ? e.op : n.sourceIndex < o.sourceIndex ? e.gX : e.gW } for (var i = this.lU(), a = t.lU(), r = Math.min(i.length, a.length), l = 0; l <= r - 1; l++)if (i[l] != a[l]) { if (l < r) return i[l] < a[l] ? e.gX : e.gW; break } return i.length < a.length ? e.lF + e.gX : e.mo + e.gW }, vw: function (e, t) { var n = this.$; for (t || (n = n.parentNode); n;) { if (n.nodeName && n.nodeName.toLowerCase() == e) return new s.bi(n); n = n.parentNode } return null }, vX: function (e, t) { var n = this.$; for (t || (n = n.parentNode); n;) { if (n.nodeName && n.nodeName.toLowerCase() == e) return !0; n = n.parentNode } return !1 }, move: function (e, t) { e.append(this.remove(), t) }, remove: function (e) { var t = this.$, n = t.parentNode; if (n) { if (e) for (var o; o = t.firstChild;)n.insertBefore(t.removeChild(o), t); n.removeChild(t) } return this }, replace: function (e) { this.insertBefore(e), e.remove() }, trim: function () { this.ltrim(), this.rtrim() }, ltrim: function () { for (var t, n = this; n.getFirst && (t = n.getFirst());) { if (t.type == e.fl) { var o = d.ltrim(t.getText()), i = t.hJ(); if (!o) { t.remove(); continue } o.length < i && (t.split(i - o.length), n.$.removeChild(n.$.firstChild)) } break } }, rtrim: function () { for (var t, n = this; n.dB && (t = n.dB());) { if (t.type == e.fl) { var o = d.rtrim(t.getText()), i = t.hJ(); if (!o) { t.remove(); continue } o.length < i && (t.split(o.length), n.$.lastChild.parentNode.removeChild(n.$.lastChild)) } break } l || r.opera || (t = n.$.lastChild) && 1 == t.type && "br" == t.nodeName.toLowerCase() && t.parentNode.removeChild(t) } }), s.iT = function (e) { this.$ = e }, s.iT.prototype = { count: function () { return this.$.length }, getItem: function (e) { var t = this.$[e]; return t ? new s.bi(t) : null } }, s.element = function (e, t) { "string" == typeof e && (e = (t ? t.$ : document).createElement(e)), s.dE.call(this, e) }; var u = s.element; u.eB = function (e) { return e && (e.$ ? e : new u(e)) }, u.prototype = new s.bi, u.kE = function (e, t) { var n = new u("div", t); return n.setHtml(e), n.getFirst().remove() }, u.rS = function (e, t, n, o) { var i = t.dw("list_marker_id") || t.fL("list_marker_id", d.getNextNumber()).dw("list_marker_id"), a = t.dw("list_marker_names") || t.fL("list_marker_names", {}).dw("list_marker_names"); return e[i] = t, a[n] = 1, t.fL(n, o) }, u.sM = function (e) { for (var t in e) u.qZ(e, e[t], !0) }, u.qZ = function (e, t, n) { var o = t.dw("list_marker_names"), i = t.dw("list_marker_id"); for (var a in o) t.jF(a); t.jF("list_marker_names"), n && (t.jF("list_marker_id"), delete e[i]) }, d.extend(u.prototype, { type: e.cv, addClass: function (e) { var t = this.$.className; t && (new RegExp("(?:^|\\s)" + e + "(?:\\s|$)", "").test(t) || (t += " " + e)); this.$.className = t || e }, removeClass: function (e) { var t = this.getAttribute("class"); if (t) { var n = new RegExp("(?:^|\\s+)" + e + "(?=\\s|$)", "i"); n.test(t) && ((t = t.replace(n, "").replace(/^\s+/, "")) ? this.setAttribute("class", t) : this.removeAttribute("class")) } }, hasClass: function (e) { return new RegExp("(?:^|\\s+)" + e + "(?=\\s|$)", "").test(this.getAttribute("class")) }, append: function (t, n) { var o = this; return "string" == typeof t && (t = o.getDocument().createElement(t)), n ? o.$.insertBefore(t.$, o.$.firstChild) : o.$.appendChild(t.$), e.log("[DOM] DOM flush into " + o.getName()), t }, appendHtml: function (e) { var t = this; if (t.$.childNodes.length) { var n = new u("div", t.getDocument()); n.setHtml(e), n.jg(t) } else t.setHtml(e) }, appendText: function (e) { null != this.$.text ? this.$.text += e : this.append(new s.text(e)) }, pd: function () { for (var t = this, n = t.dB(); n && n.type == e.fl && !d.rtrim(n.getText());)n = n.cf(); n && n.is && n.is("br") || t.append(r.opera ? t.getDocument().jT("") : t.getDocument().createElement("br")) }, tV: function (e) { var t = this, n = new s.mk(t.getDocument()); n.setStartAfter(t), n.setEndAfter(e); var o = n.extractContents(); n.insertNode(t.remove()), o.kA(t) }, contains: l || r.webkit ? function (t) { var n = this.$; return t.type != e.cv ? n.contains(t.getParent().$) : n != t.$ && n.contains(t.$) } : function (e) { return !!(16 & this.$.compareDocumentPosition(e.$)) }, focus: function () { try { this.$.focus() } catch (e) { } }, getHtml: function () { return this.$.innerHTML }, fH: function () { var e = this; if (e.$.outerHTML) return e.$.outerHTML.replace(/<\?[^>]*>/, ""); var t = e.$.ownerDocument.createElement("div"); return t.appendChild(e.$.cloneNode(!0)), t.innerHTML }, setHtml: function (t) { return e.log("[DOM] DOM flush into " + this.getName()), this.$.innerHTML = t }, setText: function (t) { return u.prototype.setText = null != this.$.innerText ? function (t) { return e.log("[DOM] Text flush"), this.$.innerText = t } : function (t) { return e.log("[DOM] Text flush"), this.$.textContent = t }, this.setText(t) }, getAttribute: function () { var e = function (e) { return this.$.getAttribute(e, 2) }; return l && (r.ie7Compat || r.ie6Compat) ? function (t) { var n = this; switch (t) { case "class": t = "className"; break; case "tabindex": var o = e.call(n, t); return 0 !== o && 0 === n.$.tabIndex && (o = null), o; case "checked": return n.$.checked; case "style": return n.$.style.cssText }return e.call(n, t) } : e }(), getChildren: function () { return new s.iT(this.$.childNodes) }, getComputedStyle: l ? function (e) { return this.$.currentStyle[d.cssStyleToDomStyle(e)] } : function (e) { return this.getWindow().$.getComputedStyle(this.$, "").getPropertyValue(e) }, pf: function () { var t = e.ga[this.getName()]; return this.pf = function () { return t }, t }, eG: c.prototype.eG, vp: l ? function () { var t = this.$.tabIndex; return 0 !== t || e.ga.ug[this.getName()] || 0 === parseInt(this.getAttribute("tabindex"), 10) || (t = -1), t } : r.webkit ? function () { var e = this.$.tabIndex; return null == e && (e = parseInt(this.getAttribute("tabindex"), 10), isNaN(e) && (e = -1)), e } : function () { return this.$.tabIndex }, getText: function () { return this.$.textContent || this.$.innerText || "" }, getWindow: function () { return this.getDocument().getWindow() }, dS: function () { return this.$.id || null }, data: function (e, t) { return e = "data-" + e, void 0 === t ? this.getAttribute(e) : (!1 === t ? this.removeAttribute(e) : this.setAttribute(e, t), null) }, vm: function () { return this.$.name || null }, getName: function () { var e = this.$.nodeName.toLowerCase(); if (l && !(document.documentMode > 8)) { var t = this.$.scopeName; "HTML" != t && (e = t.toLowerCase() + ":" + e) } return (this.getName = function () { return e })() }, getValue: function () { return this.$.value }, getFirst: function () { var e = this.$.firstChild; return e ? new s.bi(e) : null }, dB: function (e) { var t = this.$.lastChild, n = t && new s.bi(t); return n && e && !e(n) && (n = n.cf(e)), n }, rd: function (e) { return this.$.style[d.cssStyleToDomStyle(e)] }, is: function () { for (var e = this.getName(), t = 0; t < arguments.length; t++)if (arguments[t] == e) return !0; return !1 }, vL: function () { var t = this.getName(), n = !e.ga.uj[t] && (e.ga[t] || e.ga.span); return n && n["#"] }, isIdentical: function (e) { if (this.getName() != e.getName()) return !1; var t = this.$.attributes, n = e.$.attributes, o = t.length, i = n.length; if (!l && o != i) return !1; for (var a = 0; a < o; a++) { var r = t[a]; if ((!l || r.specified && "_ckf_expando" != r.nodeName) && r.nodeValue != e.getAttribute(r.nodeName)) return !1 } if (l) for (a = 0; a < i; a++)if (r = n[a], (!l || r.specified && "_ckf_expando" != r.nodeName) && r.nodeValue != t.getAttribute(r.nodeName)) return !1; return !0 }, isVisible: function () { return this.$.offsetWidth && "hidden" != this.$.style.visibility }, hasAttributes: l && (r.ie7Compat || r.ie6Compat) ? function () { for (var e = this.$.attributes, t = 0; t < e.length; t++) { var n = e[t]; switch (n.nodeName) { case "class": if (this.getAttribute("class")) return !0; case "_ckf_expando": continue; default: if (n.specified) return !0 } } return !1 } : function () { var e = this.$.attributes; return e.length > 1 || 1 == e.length && "_ckf_expando" != e[0].nodeName }, hasAttribute: function (e) { var t = this.$.attributes.getNamedItem(e); return !(!t || !t.specified) }, hide: function () { this.setStyle("display", "none") }, jg: function (e, t) { var n, o = this.$; if (o != (e = e.$)) if (t) for (; n = o.lastChild;)e.insertBefore(o.removeChild(n), e.firstChild); else for (; n = o.firstChild;)e.appendChild(o.removeChild(n)) }, show: function () { this.setStyles({ display: "", visibility: "" }) }, setAttribute: function () { var e = function (e, t) { return this.$.setAttribute(e, t), this }; return l && (r.ie7Compat || r.ie6Compat) ? function (t, n) { var o = this; return "class" == t ? o.$.className = n : "style" == t ? o.$.style.cssText = n : "tabindex" == t ? o.$.tabIndex = n : "checked" == t ? o.$.checked = n : e.apply(o, arguments), o } : e }(), setAttributes: function (e) { for (var t in e) this.setAttribute(t, e[t]); return this }, setValue: function (e) { return this.$.value = e, this }, removeAttribute: function () { var e = function (e) { this.$.removeAttribute(e) }; return l && (r.ie7Compat || r.ie6Compat) ? function (t) { "class" == t ? t = "className" : "tabindex" == t && (t = "tabIndex"), e.call(this, t) } : e }(), uW: function (e) { for (var t = 0; t < e.length; t++)this.removeAttribute(e[t]) }, removeStyle: function (e) { var t = this; t.$.style.removeAttribute ? t.$.style.removeAttribute(d.cssStyleToDomStyle(e)) : t.setStyle(e, ""), t.$.style.cssText || t.removeAttribute("style") }, setStyle: function (e, t) { return this.$.style[d.cssStyleToDomStyle(e)] = t, this }, setStyles: function (e) { for (var t in e) this.setStyle(t, e[t]); return this }, setOpacity: function (e) { l && r.version < 9 ? (e = Math.round(100 * e), this.setStyle("filter", e >= 100 ? "" : "progid:DXImageTransform.Microsoft.Alpha(opacity=" + e + ")")) : this.setStyle("opacity", e) }, unselectable: r.gecko ? function () { this.$.style.MozUserSelect = "none" } : r.webkit ? function () { this.$.style.uE = "none" } : function () { if (l || r.opera) { var e, t = this.$, n = 0; for (t.unselectable = "on"; e = t.all[n++];)switch (e.tagName.toLowerCase()) { case "iframe": case "textarea": case "input": case "select": break; default: e.unselectable = "on" } } }, vr: function () { for (var e = this; "html" != e.getName();) { if ("static" != e.getComputedStyle("position")) return e; e = e.getParent() } return null }, ir: function (e) { var t = this, n = 0, o = 0, i = t.getDocument().bH(), a = "BackCompat" == t.getDocument().$.compatMode, s = t.getDocument(); if (document.documentElement.getBoundingClientRect) { var d = t.$.getBoundingClientRect(), c = s.$.documentElement, f = c.clientTop || i.$.clientTop || 0, p = c.clientLeft || i.$.clientLeft || 0, h = !0; if (l) { var m = s.gT().contains(t), g = s.bH().contains(t); h = a && g || !a && m } h && (n = d.left + (!a && c.scrollLeft || i.$.scrollLeft), n -= p, o = d.top + (!a && c.scrollTop || i.$.scrollTop), o -= f) } else for (var v, b = t, y = null; b && "body" != b.getName() && "html" != b.getName();) { n += b.$.offsetLeft - b.$.scrollLeft, o += b.$.offsetTop - b.$.scrollTop, b.equals(t) || (n += b.$.clientLeft || 0, o += b.$.clientTop || 0); for (var w = y; w && !w.equals(b);)n -= w.$.scrollLeft, o -= w.$.scrollTop, w = w.getParent(); y = b, b = (v = b.$.offsetParent) ? new u(v) : null } if (e) { var _ = t.getWindow(), F = e.getWindow(); if (!_.equals(F) && _.$.frameElement) { var k = new u(_.$.frameElement).ir(e); n += k.x, o += k.y } } return document.documentElement.getBoundingClientRect || r.gecko && !a && (n += t.$.clientLeft ? 1 : 0, o += t.$.clientTop ? 1 : 0), { x: n, y: o } }, scrollIntoView: function (e) { var t = this, n = t.getWindow(), o = n.eR().height, i = -1 * o; e ? i += o : (i += t.$.offsetHeight || 0, i += parseInt(t.getComputedStyle("marginBottom") || 0, 10) || 0), i = (i += t.ir().y) < 0 ? 0 : i; var a = n.hV().y; (i > a || i < a - o) && n.$.scrollTo(0, i) }, bR: function (t) { var n = this; switch (t) { case e.eV: n.addClass("cke_on"), n.removeClass("cke_off"), n.removeClass("cke_disabled"); break; case e.aY: n.addClass("cke_disabled"), n.removeClass("cke_off"), n.removeClass("cke_on"); break; default: n.addClass("cke_off"), n.removeClass("cke_on"), n.removeClass("cke_disabled") } }, getFrameDocument: function () { var e = this.$; try { e.contentWindow.document } catch (t) { e.src = e.src, l && r.version < 7 && window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")') } return e && new c(e.contentWindow.document) }, qw: function (e, t) { var n = this, o = n.$.attributes; t = t || {}; for (var i = 0; i < o.length; i++) { var a = o[i]; if (a.specified || l && a.nodeValue && "value" == a.nodeName.toLowerCase()) { var r = a.nodeName; if (r in t) continue; var s = n.getAttribute(r); null === s && (s = a.nodeValue), e.setAttribute(r, s) } } "" !== n.$.style.cssText && (e.$.style.cssText = n.$.style.cssText) }, renameNode: function (e) { var t = this; if (t.getName() != e) { var n = t.getDocument(), o = new u(e, n); t.qw(o), t.jg(o), t.$.parentNode.replaceChild(o.$, t.$), o.$._ckf_expando = t.$._ckf_expando, t.$ = o.$ } }, getChild: function (e) { var t = this.$; if (e.slice) for (; e.length > 0 && t;)t = t.childNodes[e.shift()]; else t = t.childNodes[e]; return t ? new s.bi(t) : null }, iu: function () { return this.$.childNodes.length }, hX: function () { this.on("contextmenu", function (e) { e.data.bK().hasClass("cke_enable_context_menu") || e.data.preventDefault() }) }, toString: function () { return this.getName() + "#" + this.dS() + "." + this.getAttribute("class") } }), function () { var e = { width: ["border-left-width", "border-right-width", "padding-left", "padding-right"], height: ["border-top-width", "border-bottom-width", "padding-top", "padding-bottom"] }; function t(t) { for (var n = 0, o = 0, i = e[t].length; o < i; o++)n += parseInt(this.getComputedStyle(e[t][o]) || 0, 10) || 0; return n } u.prototype.setSize = function (e, n, o) { "number" == typeof n && (!o || l && r.quirks || (n -= t.call(this, e)), this.setStyle(e, n + "px")) }, u.prototype.hR = function (e, n) { var o = Math.max(this.$["offset" + d.capitalize(e)], this.$["client" + d.capitalize(e)]) || 0; return n && (o -= t.call(this, e)), o } }(), e.command = function (t, n) { this.pW = [], this.exec = function (o) { return !(this.bu == e.aY || !1 === this.readOnly && t.config.readOnly) && (n.oD && t.focus(), !1 !== n.exec.call(this, t, o)) }, d.extend(this, n, { iH: { qt: 1 }, oD: !0, bu: e.aS }), e.event.call(this) }, e.command.prototype = { enable: function () { var t = this; t.bu == e.aY && t.bR(t.vf && void 0 !== t.lJ ? t.lJ : e.aS) }, disable: function () { this.bR(e.aY) }, bR: function (e) { var t = this; return t.bu != e && (t.lJ = t.bu, t.bu = e, t.oW("bu"), !0) }, rJ: function () { var t = this; t.bu == e.aS ? t.bR(e.eV) : t.bu == e.eV && t.bR(e.aS) } }, e.event.du(e.command.prototype, !0), e.config = { customConfig: e.getUrl("config.js"), connectorLanguage: "aspx", language: "", defaultLanguage: "en", defaultViewType: "thumbnails", defaultSortBy: "filename", defaultDisplayFilename: !0, defaultDisplayDate: !0, defaultDisplayFilesize: !0, pO: "", height: 400, plugins: "foldertree,folder,filebrowser,container,connector,resource,search,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,mobile,html5upload,gallery,csrftokenmanager", extraPlugins: "", fileIcons: "ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip", removePlugins: "", tabIndex: 0, thumbnailDelay: 100, theme: "default", skin: "kama", width: "100%", baseFloatZIndex: 1e4, directDownload: !1, log: !1, logStackTrace: !1, rememberLastFolder: !0, id: null, startupPath: "", startupFolderExpanded: !0, selectActionFunction: null, selectActionData: null, selectThumbnailActionFunction: null, selectThumbnailActionData: null, disableThumbnailSelection: !1, thumbsUrl: null, thumbsDirectAccess: !1, imagesMaxWidth: 0, imagesMaxHeight: 0, selectActionType: "js", resourceType: null, disableHelpButton: !1, connectorPath: "", connectorInfo: "", uiColor: null, showContextMenuArrow: !1, useNativeIcons: !1, maxSimultaneousUploads: 1, readOnly: !1, selectMultiple: !0, popupTitle: "CKFinder 2", popupFeatures: "location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes" }, CKFinder.config = e.config; var f = e.config; e.dU = function (e, t) { this.rG = e, this.message = t }, e.fs = function (e) { return e.fs ? e.fs : (this.hasFocus = !1, this._ = { application: e }, this) }, e.fs.prototype = { focus: function () { var t = this; if (t._.fW && clearTimeout(t._.fW), !t.hasFocus) { e.nG && e.nG.fs.ly(); var n = t._.application; n.container.getFirst().addClass("cke_focus"), t.hasFocus = !0, n.oW("focus") } }, blur: function () { var e = this; e._.fW && clearTimeout(e._.fW), e._.fW = setTimeout(function () { delete e._.fW, e.ly() }, 100) }, ly: function () { if (this.hasFocus) { var e = this._.application; e.container.getFirst().removeClass("cke_focus"), this.hasFocus = !1, e.oW("blur") } } }, e.lang = { ko: { bg: 1, ca: 1, cs: 1, cy: 1, da: 1, de: 1, el: 1, en: 1, eo: 1, es: 1, "es-mx": 1, et: 1, fa: 1, fi: 1, fr: 1, gu: 1, he: 1, hi: 1, hr: 1, hu: 1, it: 1, ja: 1, lv: 1, lt: 1, nb: 1, nl: 1, no: 1, nn: 1, pl: 1, "pt-br": 1, ro: 1, ru: 1, sk: 1, sl: 1, sr: 1, sv: 1, tr: 1, vi: 1, "zh-cn": 1, "zh-tw": 1 }, load: function (t, n, o) { t && e.lang.ko[t] || (t = this.jV(n, t)), this[t] ? o(t, this[t]) : e.scriptLoader.load(e.getUrl("lang/" + t + ".js"), function () { o(t, CKFinder.lang[t]) }, this) }, jV: function (t, n) { var o = this.ko, i = (n = n || navigator.userLanguage || navigator.language).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/), a = i[1], r = i[2]; return o[a + "-" + r] ? a = a + "-" + r : o[a] || (a = null), e.lang.jV = a ? function () { return a } : function (e) { return e }, a || t } }, e.log = function () { if (f.log || window.CKFINDER_LOG) { for (var t = "", n = 0; n < arguments.length; n++) { var o = arguments[n]; if (o) switch (t && (t += "; "), typeof o) { case "function": var i = /function (\w+?)\(/.exec(o.toString()); t += i = i ? i[1] : "anonymous func"; break; default: t += o ? o.toString() : "" } } e._.log.push(t), "object" == typeof window.console && (console.log.apply ? console.log.apply(console, arguments) : console.log(t)) } }, e.ba = function (t) { return f.logStackTrace && e.log("[EXCEPTION] " + t.toString()), t }, e.mZ = function (t) { for (var n = "", o = 0; o < e._.log.length; o++)n += o + 1 + ". " + e._.log[o] + "\n"; return n }, e._.log = [], e.scriptLoader = function () { var t = {}, n = {}; return { load: function (o, i, a, r, s, d) { var c = "string" == typeof o; c && (o = [o]), a || (a = e); var f = o.length, p = [], h = [], m = function (e) { i && (c ? i.call(a, e) : i.call(a, p, h)) }; if (0 !== f) for (var g = function (e, t) { (t ? p : h).push(e), --f <= 0 && m(t) }, v = function (e, o) { t[e] = 1; var i = n[e]; delete n[e]; for (var a = 0; a < i.length; a++)i[a](e, o) }, b = function (o) { if (!0 !== r && t[o]) g(o, !0); else { var a = n[o] || (n[o] = []); if (a.push(g), !(a.length > 1)) { var c = new u("script", d); c.setAttributes({ type: "text/javascript", src: o }), i && (l ? c.$.onreadystatechange = function () { "loaded" != c.$.readyState && "complete" != c.$.readyState || (c.$.onreadystatechange = null, e.log("[LOADED] " + o), v(o, !0)) } : (c.$.onload = function () { setTimeout(function () { e.log("[LOADED] " + o), v(o, !0) }, 0) }, c.$.onerror = function () { v(o, !1) })), c.appendTo(s || e.document.getHead()) } } }, y = 0, w = f; y < w; y++)b(o[y]); else m(!0) }, uq: function (t) { var n = new u("script"); n.setAttribute("type", "text/javascript"), n.appendText(t), n.appendTo(e.document.getHead()) } } }(), CKFinder.scriptLoader = e.scriptLoader, e.fQ = function (e, t) { var n = this; n.basePath = e, n.fileName = t, n.bX = {}, n.loaded = {}, n.jn = {}, n._ = { rZ: {} } }, e.fQ.prototype = { add: function (e, t) { if (this.bX[e]) throw '[CKFINDER.fQ.add] The resource name "' + e + '" is already bX.'; this.bX[e] = t || {} }, eB: function (e) { return this.bX[e] || null }, getPath: function (t) { var n = this.jn[t]; return e.getUrl(n && n.dir || this.basePath + t + "/") }, pi: function (t) { var n = this.jn[t]; return e.getUrl(this.getPath(t) + (n && n.file || this.fileName + ".js")) }, tR: function (e, t, n) { e = e.split(","); for (var o = 0; o < e.length; o++) { var i = e[o]; this.jn[i] = { dir: t, file: n } } }, load: function (t, n, o) { d.isArray(t) || (t = t ? [t] : []); for (var i = this.loaded, a = this.bX, r = [], l = {}, s = {}, c = 0; c < t.length; c++) { var u = t[c]; if (u) if (i[u] || a[u]) s[u] = this.eB(u); else { var f = this.pi(u); r.push(f), f in l || (l[f] = []), l[f].push(u) } } e.scriptLoader.load(r, function (e, t) { if (t.length) throw '[CKFINDER.fQ.load] Resource name "' + l[t[0]].join(",") + '" was not found at "' + t[0] + '".'; for (var a = 0; a < e.length; a++)for (var r = l[e[a]], d = 0; d < r.length; d++) { var c = r[d]; s[c] = this.eB(c), i[c] = 1 } n.call(o, s) }, this) } }, e.plugins = new e.fQ("plugins/", "plugin"); var p = e.plugins; p.load = d.override(p.load, function (e) { return function (t, n, o) { var i = {}, a = function (t) { e.call(this, t, function (e) { d.extend(i, e); var t = []; for (var r in e) { var l = e[r], s = l && l.bM; if (s) for (var c = 0; c < s.length; c++)i[s[c]] || t.push(s[c]) } if (t.length) a.call(this, t); else { for (r in i) (l = i[r]).onLoad && !l.onLoad.qK && (l.onLoad(), l.onLoad.qK = 1); n && n.call(o || window, i) } }, this) }; a.call(this, t) } }), p.rX = function (e, t, n) { this.eB(e).lang[t] = n }, function () { var t = {}, n = function (e, n) { var o = function () { t[e] = 1, n() }, i = new u("img"); i.on("load", o), i.on("error", o), i.setAttribute("src", e) }; e.rw = { load: function (e, o) { for (var i = e.length, a = function () { 0 == --i && o() }, r = 0; r < e.length; r++) { var l = e[r]; t[l] ? a() : n(l, a) } } } }(), e.skins = function () { var t = {}, n = {}, o = {}, i = function (a, r, l, s) { var d = t[r]; a.skin || (a.skin = d, d.bz && d.bz(a)); var c = function (t) { for (var n = 0; n < t.length; n++)t[n] = e.getUrl(o[r] + t[n]) }; if (!n[r]) { var u = d.ls; if (u && u.length > 0) return c(u), void e.rw.load(u, function () { n[r] = 1, i(a, r, l, s) }); n[r] = 1 } var f = 0; if ((l = d[l]) ? l.iB ? l.iB[a.name] && (f = 1) : l.iB = [] : f = 1, f) s && s(); else { void 0 === l.eb && (l.eb = []), void 0 === l.eb[a.name] && (l.eb[a.name] = []); var p = l.eb[a.name]; if (p.push(s), p.length > 1) return; var h = !l.css || !l.css.length, m = !l.js || !l.js.length, g = function () { if (h && m) { l.iB[a.name] = 1; for (var e = 0; e < p.length; e++)p[e] && p[e]() } }; if (!h) { if (l.rr || (c(l.css), l.rr = 1), l.qx) for (var v = 0; v < l.css.length; v++)e.oC.appendStyleSheet(l.css[v]); else a.on("themeSpace", function (e) { if ("head" == e.data.space) for (var t = 0; t < l.css.length; t++)e.data.html += "<link rel='stylesheet' href='" + l.css[t] + "'>\n"; e.removeListener() }); h = 1 } m || (c(l.js), a.scriptLoader.load(l.js, function () { m = 1, g() })), g() } }; return { add: function (n, i) { t[n] = i, i.fh = o[n] || (o[n] = e.getUrl("skins/" + n + "/")) }, loaded: t, load: function (n, a, r) { var l = n.gd, s = n.fh; if (t[l]) { i(n, l, a, r); t[l] } else o[l] = s, e.scriptLoader.load(s + "skin.js", function () { i(n, l, a, r) }) } } }(), e.gc = new e.fQ("gc/", "theme"), e.bY = function (e) { return e.bY ? e.bY : (this._ = { jZ: {}, items: {}, application: e }, this) }; var h, m, g, v, b, y, w, _, F, k, C = e.bY; if (C.prototype = { add: function (e, t, n) { this._.items[e] = { type: t, command: n.command || null, mp: Array.prototype.slice.call(arguments, 2) } }, create: function (e) { var t = this, n = t._.items[e], o = n && t._.jZ[n.type], i = n && n.command && t._.application.cS(n.command), a = o && o.create.apply(t, n.mp); return i && i.pW.push(a), a }, kd: function (e, t) { this._.jZ[e] = t } }, h = 0, m = function () { var t = "ckfinder" + ++h; return e.instances && e.instances[t] ? m() : t }, g = {}, v = function (t) { var n = t.config.customConfig; if (!n) return !1; var o = g[n] || (g[n] = {}); return o.fn ? setTimeout(function () { o.fn.call(t, t.config), t.config.customConfig != n && v(t) || t.cr("customConfigLoaded") }, 0) : e.scriptLoader.load(n, function () { CKFinder.customConfig ? o.fn = CKFinder.customConfig : o.fn = function () { }, v(t) }), !0 }, b = function (t) { var n = t.config.skin.split(","), o = n[0], i = e.getUrl(n[1] || "skins/" + o + "/"); t.gd = o, t.fh = i, t.iy = "cke_skin_" + o + " skin_" + o, t.qn = t.ox(), t.on("uiReady", function () { t.document.getWindow().on("lW", function () { d.setCookie("CKFinder_UTime", Math.round((new Date).getTime() / 1e3), !0), d.setCookie("CKFinder_UId", encodeURIComponent(t.id ? t.id : location.href), !0) }) }), t.cr("configLoaded"), w(t) }, y = function (t, n) { var o, i = [e.oC]; if (n.$.top.location.href.match(/ckfinder.html/) || "CKFinderpopup" == n.$.top.name) { if (t.document.focus(), t.focus(), t.cg.inUrlPopup) try { i.push(new c(e.oC.getWindow().$.opener.document)) } catch (e) { } for (function (t, n) { e.event.jP = !0, t.document.on("keydown", function (o) { var i = o.data, a = i.oV(), r = i.db(); if (116 == a || r == e.bP + 82 || r == e.bP + e.dy + 82) { t.execCommand("refresh"), n.$.event && n.$.event.keyCode && (n.$.event.keyCode = 5055); try { o.data.preventDefault() } catch (o) { } } }), e.event.jP = !1 }(t, n), function (e, t, n) { var o, i, a = []; for (i = 0; i < n.length; i++)o = n[i], a.push({ evt: "onbeforeunload", bi: o.bH().$, fO: o.bH().$.onbeforeunload }, { evt: "onunload", bi: o.getWindow().$, fO: o.getWindow().$.onunload }, { evt: "onbeforeunload", bi: o.getWindow().$, fO: o.getWindow().$.onbeforeunload }); t.$.onunload = t.$.onbeforeunload = function () { var e; for (e = 0; e < a.length; e += 1)a[e].bi[a[e].evt] = a[e].fO } }(0, n, i), o = 0; o < i.length; o += 1)i[o].bH().$.onbeforeunload = i[o].getWindow().$.onunload = i[o].getWindow().$.onbeforeunload = function () { var e = t.element && t.element.getDocument().getWindow().$; e.closed || e.close() } } }, w = function (t) { e.lang.load(t.config.language, t.config.defaultLanguage, function (e, n) { var o, i; t.langCode = e, t.lang = d.prototypedCopy(n), t.lB = (o = "['" + t.lang.DateAmPm.join("','") + "']", i = (i = "'" + (i = t.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g, function (e) { var t; switch (e) { case "d": t = "day.replace(/^0/,'')"; break; case "dd": t = "day"; break; case "m": t = "month.replace(/^0/,'')"; break; case "mm": t = "month"; break; case "yy": t = "year.substr(2)"; break; case "yyyy": t = "year"; break; case "H": t = "hour.replace(/^0/,'')"; break; case "HH": t = "hour"; break; case "h": t = "( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')"; break; case "hh": t = "( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )"; break; case "M": t = "minute.replace(/^0/,'')"; break; case "MM": t = "minute"; break; case "a": t = o + "[ hour < 12 ? 0 : 1 ].charAt(0)"; break; case "aa": t = o + "[ hour < 12 ? 0 : 1 ]"; break; default: t = "'" + e + "'" }return "'," + t + ",'" })) + "'").replace(/('',)|,''$/g, ""), new Function("day", "month", "year", "hour", "minute", "return [" + i + "].join('');")), r.gecko && r.version < 10900 && "rtl" == t.lang.dir && (t.lang.dir = "ltr"), _(t) }) }, _ = function (t) { var n = t.config, o = n.plugins, i = n.extraPlugins, a = n.removePlugins; if (i) { var r = new RegExp("(?:^|,)(?:" + i.replace(/\s*,\s*/g, "|") + ")(?=,|$)", "g"); o = o.replace(r, ""), o += "," + i } a && (r = new RegExp("(?:^|,)(?:" + a.replace(/\s*,\s*/g, "|") + ")(?=,|$)", "g"), o = o.replace(r, "")), p.load(o.split(","), function (n) { var o = [], i = [], a = []; if (t.config.readOnly) for (var r in n) !1 === n[r].readOnly && delete n[r]; for (r in t.plugins = n, n) { var l = n[r], s = l.lang, c = p.getPath(r), u = null; n[r].name = r, l.pathName = c, s && (u = d.indexOf(s, t.langCode) >= 0 ? t.langCode : s[0], l.lang[u] ? (d.extend(t.lang, l.lang[u]), u = null) : a.push(e.getUrl(c + "lang/" + u + ".js"))), i.push(u), o.push(l) } e.scriptLoader.load(a, function () { for (var n = ["eK", "bz", "gr"], a = 0; a < n.length; a++)for (var r = 0; r < o.length; r++) { var l = o[r]; 0 === a && i[r] && l.lang && d.extend(t.lang, l.lang[i[r]]), l[n[a]] && (e.log("[PLUGIN] " + l.name + "." + n[a]), l[n[a]](t)) } t.oW("pluginsLoaded"), F(t) }) }) }, F = function (t) { e.skins.load(t, "application", function () { e.skins.load(t, "host", function () { k(t) }) }) }, k = function (t) { var n = t.config.theme; e.gc.load(n, function () { (t.theme = e.gc.eB(n)).pathName = e.gc.getPath(n), t.oW("themeAvailable") }) }, e.application.prototype.iI = function (t) { var n = u.eB(this._.element), i = this._.instanceConfig; if (delete this._.element, delete this._.instanceConfig, this._.ky = {}, this._.gS = [], n.getDocument().getWindow().$.CKFinder = t, this.element = n, this.document = null, this.rQ = {}, this.name = m(), this.name in e.instances) throw '[CKFINDER.application] The instance "' + this.name + '" already exists.'; this.config = d.prototypedCopy(f), this.bY = new C(this), this.fs = new e.fs(this), this.aL = {}, this.ld = {}, this.on("uiReady", function (e) { var t = this, n = t.document.getWindow(); n.on("lW", t.destroy, t), t.cg.inPopup && y(t, n) }, this), this.cg = new o(this), this.on("configLoaded", function (e) { var t, n, o, i = this; t = i.cg, n = i, o = i.config.callback, n.on("appReady", function (e) { e.removeListener(), t.document = n.document.$, t.folders = n.folders, t.files = n.ld["filesview.filesview"].data().files, t.basketFiles = n.basketFiles, t.resourceTypes = n.resourceTypes, t.connector = n.connector, t.lang = n.lang, t.langCode = n.langCode, t.config = n.config, n.ld["foldertree.foldertree"].on("afterAddFolder", function (e) { e.removeListener(), o && o(t) }, t) }, t, null, 999), i.id = i.config.id }, this), function (e, t) { e.on("customConfigLoaded", function () { if (t) { if (t.on) for (var n in t.on) e.on(n, t.on[n]); d.extend(e.config, t, !0), delete e.config.on } b(e) }), t && t.id && (e.config.id = t.id), t && null != t.customConfig && (e.config.customConfig = t.customConfig), v(e) || e.cr("customConfigLoaded") }(this, i), e.oW("instanceCreated", null, this) }, d.extend(e.application.prototype, { bD: function (t, n) { return this._.ky[t] = new e.command(this, n) }, destroy: function () { var t = this; t.theme.destroy(t), t.oW("destroy"), e.remove(t) }, execCommand: function (t, n) { e.log("[COMMAND] " + t); var o = this.cS(t), i = { name: t, rm: n, command: o }; return !(!o || o.bu == e.aY || !0 === this.oW("beforeCommandExec", i) || (i.returnValue = o.exec(i.rm), o.async || !0 === this.oW("afterCommandExec", i))) && i.returnValue }, cS: function (e) { return this._.ky[e] }, ox: function () { var e = Math.round((new Date).getTime() / 1e3), t = d.getCookie("CKFinder_UTime"), n = decodeURIComponent(d.getCookie("CKFinder_UId")); return n && t && n == (this.id ? this.id : location.href) && Math.abs(e - t) < 5 ? 1 : 0 }, bs: "" }), function () { for (var t = "", n = 49; n < 58; n++)t += String.fromCharCode(n); for (n = 65; n < 91; n++)73 != n && 79 != n && (t += String.fromCharCode(n)); e.bs = t, e.nd = "lo", e.jG = "ho", e.hf = new window.RegExp("^www\\."), e.hg = new window.RegExp(":\\d+$"), e.lS = function (t) { return t.toLowerCase().replace(e.hf, "").replace(e.hg, "") } }(), e.on("loaded", function () { var t = e.application.eb; if (t) { delete e.application.eb; for (var n = 0; n < t.length; n++)t[n].iI() } }), delete e.dO, e.instances = {}, e.document = new c(document), e.oC = e.document.getWindow().$ != e.document.getWindow().$.top ? new c(e.document.getWindow().$.top.document) : e.document, e.add = function (t) { e.instances[t.name] = t, e.jt = t, t.on("focus", function () { e.nG != t && (e.nG = t, e.oW("nG")) }), t.on("blur", function () { e.nG == t && (e.nG = null, e.oW("nG")) }) }, e.remove = function (t) { delete e.instances[t.name] }, e.aL = {}, e.eV = 1, e.aS = 2, e.aY = 0, e.bF = "", function () { function t(e, t) { return e + "." + (t.name || t || e) } e.ld = { bX: {}, hS: function (n, i, a) { var r = t(n, i); if (void 0 !== this.bX[r]) throw "[CKFINDER] Widget " + r + " already bX!"; return e.log("[WIDGET] bX " + r), this.bX[r] = new o(r, a), this.bX[r] }, bz: function (n, o, i, a, r) { var l = t(o, i), s = this.bX[l], c = d.deepCopy(s.hF), f = function (e, t, n) { this.app = e, this.eh = t instanceof u ? t : new u(t), this.hF = c ? d.extend(c, n) : n || {}, this._ = {}; var o = function (e) { this.ib = e }; o.prototype = this.tools, this.tools = new o(this); var i = s.dT; if (i.length) for (var a = 0; a < i.length; a++)i[a].call(this, e, this) }; f.prototype = s; var p = new f(n, a, r); for (var h in p.fw) p.fw[h].readOnly && n.config.readOnly ? p.ke(h) : p.gA(h); if (n.ld[l]) throw "[CKFINDER Widget " + l + " already initiated."; return n.ld[l] = p, e.log("[WIDGET] instanced " + l), p } }; var n = { click: 1, mouseover: 1, mouseout: 1, focus: 1, blur: 1, submit: 1, dblclick: 1, mousedown: 1, mouseup: 1, mousemove: 1, keypress: 1, keydown: 1, keyup: 1, load: 1, lW: 1, abort: 1, error: 1, resize: 1, scroll: 1, select: 1, change: 1, reset: 1 }, o = function (e, t) { var n = this; n.id = e, n.readOnly = !0, n.fw = {}, n.hF = t || {}, n.dT = [], n.tools = new n.tools(n) }; o.prototype = { gA: function (t) { var o = this; e.log("[WIDGET] Enabling behavior " + t); var i = o.fw[t]; if (i) for (var a = o, r = 0; r < i.cC.length; r++) { var l = i.cC[r]; n[l] ? o.eh.on(l, i.fO, a) : (o.on(l, i.fO, a), o.app.on(l, i.fO, a)) } }, ke: function (t) { e.log("[WIDGET] Disabling behavior " + t); var o = this.fw[t]; if (o) for (var i = 0; i < o.cC.length; i++) { var a = o.cC[i]; n[a] ? this.eh.removeListener(a, o.fO) : this.removeListener(a, o.fO) } }, bh: function (e, t, n, o) { d.isArray(t) || (t = [t]), this.fw[e] = { cC: t, fO: n, readOnly: !1 === o }, this.eh && this.gA(e) }, removeBehavior: function (e) { delete this.fw[e] }, ur: function () { return this.fw }, bn: function () { return this.eh }, oE: function () { return this.hF }, data: function () { return this.hF }, tools: function () { } }, o.prototype.tools.prototype = { kg: function (e) { if (e.target == this.ib.eh) return 1 } }, e.event.du(o.prototype) }(), e.xml = function (e) { var t = null; if ("object" == typeof e) t = e; else { var n = (e || "").replace(/&nbsp;/g, " "); if (window.DOMParser) t = (new DOMParser).parseFromString(n, "text/xml"); else if (window.ActiveXObject) { try { t = new ActiveXObject("MSXML2.DOMDocument") } catch (e) { try { t = new ActiveXObject("Microsoft.XmlDom") } catch (e) { } } t && (t.async = !1, t.resolveExternals = !1, t.validateOnParse = !1, t.loadXML(n)) } } this.mq = t }, e.xml.prototype = { selectSingleNode: function (e, t) { var n = this.mq; if (t || (t = n)) { if ("selectSingleNode" in t) return t.selectSingleNode(e); if (n.evaluate) return (o = n.evaluate(e, t, null, 9, null)) && o.singleNodeValue || null; if (t.querySelectorAll) { var o, i = this.selectNodes(e, t); if (1 == i.length) return (o = e.match(/\/@(.*$)/)) ? i[0].getAttributeNode(o[1]) : i[0] } else alert("XPath is not supported in your browser") } return null }, selectNodes: function (e, t) { var n = this.mq, o = []; if (t || (t = n)) { if ("selectNodes" in t) return t.selectNodes(e); if (n.evaluate) { var i = n.evaluate(e, t, null, 5, null); if (i) for (var a; a = i.iterateNext();)o.push(a) } else { if (t.querySelectorAll) { var r = e.replace(/\/@(.*$)/, "[$1]").replace(/\//gi, ">"); return t.querySelectorAll(r) } alert("XPath is not supported in your browser") } } return o }, vB: function (e, t) { var n = this.selectSingleNode(e, t), o = []; if (n) for (n = n.firstChild; n;)n.xml ? o.push(n.xml) : window.XMLSerializer && o.push((new XMLSerializer).serializeToString(n)), n = n.nextSibling; return o.length ? o.join("") : null } }, function () { var t = { address: 1, tY: 1, dl: 1, h1: 1, h2: 1, h3: 1, h4: 1, h5: 1, h6: 1, p: 1, pre: 1, li: 1, dt: 1, de: 1 }, n = { body: 1, div: 1, table: 1, tbody: 1, tr: 1, td: 1, th: 1, caption: 1, form: 1 }, o = function (t) { for (var n = t.getChildren(), o = 0, i = n.count(); o < i; o++) { var a = n.getItem(o); if (a.type == e.cv && e.ga.um[a.getName()]) return !0 } return !1 }; s.qS = function (i) { for (var a = this, r = null, s = null, d = [], c = i; c;) { if (c.type == e.cv) { a.qH || (a.qH = c); var u = c.getName(); if (l && "HTML" != c.$.scopeName && (u = c.$.scopeName.toLowerCase() + ":" + u), s || (!r && t[u] && (r = c), n[u] && (r || "div" != u || o(c) ? s = c : r = c)), d.push(c), "body" == u) break } c = c.getParent() } a.block = r, a.tX = s, a.elements = d } }(), s.qS.prototype = { sJ: function (e) { var t = this.elements, n = e && e.elements; if (!n || t.length != n.length) return !1; for (var o = 0; o < t.length; o++)if (!t[o].equals(n[o])) return !1; return !0 } }, s.text = function (e, t) { "string" == typeof e && (e = (t ? t.$ : document).createTextNode(e)), this.$ = e }, s.text.prototype = new s.bi, d.extend(s.text.prototype, { type: e.fl, hJ: function () { return this.$.nodeValue.length }, getText: function () { return this.$.nodeValue }, split: function (e) { var t = this; if (l && e == t.hJ()) { var n = t.getDocument().jT(""); return n.kB(t), n } var o = t.getDocument(), i = new s.text(t.$.splitText(e), o); if (r.ie8) { var a = new s.text("", o); a.kB(i), a.remove() } return i }, substring: function (e, t) { return "number" != typeof t ? this.$.nodeValue.substr(e) : this.$.nodeValue.substring(e, t) } }), s.pa = function (t) { t = t || e.document, this.$ = t.$.createDocumentFragment() }, d.extend(s.pa.prototype, u.prototype, { type: e.om, kA: function (e) { (e = e.$).parentNode.insertBefore(this.$, e.nextSibling) } }, !0, { append: 1, pd: 1, getFirst: 1, dB: 1, appendTo: 1, jg: 1, insertBefore: 1, kA: 1, replace: 1, trim: 1, type: 1, ltrim: 1, rtrim: 1, getDocument: 1, iu: 1, getChild: 1, getChildren: 1 }), function () { function t(t, n) { if (this._.end) return null; var o, i, a = this.mk, r = this.vR, l = this.type, s = t ? "getPreviousSourceNode" : "getNextSourceNode"; if (!this._.start && (this._.start = 1, a.trim(), a.collapsed)) return this.end(), null; if (!t && !this._.kp) { var d = a.endContainer, c = d.getChild(a.endOffset); this._.kp = function (t, n) { return !(n && d.equals(t) || c && t.equals(c) || t.type == e.cv && "body" == t.getName()) } } if (t && !this._.ka) { var u = a.startContainer, f = a.startOffset > 0 && u.getChild(a.startOffset - 1); this._.ka = function (t, n) { return !(n && u.equals(t) || f && t.equals(f) || t.type == e.cv && "body" == t.getName()) } } var p = t ? this._.ka : this._.kp; for (i = r ? function (e, t) { return !1 !== p(e, t) && r(e) } : p, this.current ? o = this.current[s](!1, l, i) : t ? (o = a.endContainer, a.endOffset > 0 ? !1 === i(o = o.getChild(a.endOffset - 1)) && (o = null) : o = !1 === i(o) ? null : o.hZ(!0, l, i)) : (o = (o = a.startContainer).getChild(a.startOffset)) ? !1 === i(o) && (o = null) : o = !1 === i(a.startContainer) ? null : a.startContainer.hL(!0, l, i); o && !this._.end;) { if (this.current = o, this.lf && !1 === this.lf(o)) { if (n && this.lf) return !1 } else if (!n) return o; o = o[s](!1, l, i) } return this.end(), this.current = null } function n(e) { for (var n, o = null; n = t.call(this, e);)o = n; return o } s.gm = d.createClass({ $: function (e) { this.mk = e, this._ = {} }, ej: { end: function () { this._.end = 1 }, next: function () { return t.call(this) }, previous: function () { return t.call(this, !0) }, sC: function () { return !1 !== t.call(this, !1, !0) }, sD: function () { return !1 !== t.call(this, !0, !0) }, uF: function () { return n.call(this) }, uB: function () { return n.call(this, !0) }, reset: function () { delete this.current, this._ = {} } } }); var o = { block: 1, "list-item": 1, table: 1, "table-row-group": 1, "table-header-group": 1, "table-footer-group": 1, "table-row": 1, "table-column-group": 1, "table-column": 1, "table-cell": 1, "table-caption": 1 }, i = { hr: 1 }; u.prototype.qy = function (e) { var t = d.extend({}, i, e || {}); return o[this.getComputedStyle("display")] || t[this.getName()] }, s.gm.pQ = function (t) { return function (n, o) { return !(n.type == e.cv && n.qy(t)) } }, s.gm.us = function () { return this.pQ({ br: 1 }) }, s.gm.tU = function (e) { }, s.gm.tW = function (e, t) { function n(e) { return e && e.getName && "span" == e.getName() && e.hasAttribute("_fck_bookmark") } return function (o) { var i, a; return i = o && !o.getName && (a = o.getParent()) && n(a), i = e ? i : i || n(o), t ^ i } }, s.gm.sf = function (t) { return function (n) { var o = n && n.type == e.fl && !d.trim(n.getText()); return t ^ o } } }(), function () { if (r.webkit) r.hc = !1; else { var t = u.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"></div>', e.document); t.appendTo(e.document.getHead()); try { r.hc = t.getComputedStyle("border-top-color") == t.getComputedStyle("border-right-color") } catch (e) { r.hc = !1 } r.hc && (r.cssClass += " cke_hc"), t.remove() } }(), p.load(f.pO.split(","), function () { e.status = "loaded", e.oW("loaded"); var t = e._.io; if (t) { delete e._.io; for (var n = 0; n < t.length; n++)e.add(t[n]) } }), l) try { document.execCommand("BackgroundImageCache", !1, !0) } catch (h) { } CKFinder.lang.en = { appTitle: "CKFinder", common: { unavailable: '%1<span class="cke_accessibility">, unavailable</span>', confirmCancel: "Some of the options were changed. Are you sure you want to close the dialog window?", ok: "OK", cancel: "Cancel", confirmationTitle: "Confirmation", messageTitle: "Information", inputTitle: "Question", undo: "Undo", redo: "Redo", skip: "Skip", skipAll: "Skip all", makeDecision: "What action should be taken?", rememberDecision: "Remember my decision" }, dir: "ltr", HelpLang: "en", LangCode: "en", DateTime: "m/d/yyyy h:MM aa", DateAmPm: ["AM", "PM"], FoldersTitle: "Folders", FolderLoading: "Loading...", FolderNew: "Please type the new folder name: ", FolderRename: "Please type the new folder name: ", FolderDelete: 'Are you sure you want to delete the "%1" folder?', FolderRenaming: " (Renaming...)", FolderDeleting: " (Deleting...)", DestinationFolder: "Destination Folder", FileRename: "Please type the new file name: ", FileRenameExt: "Are you sure you want to change the file extension? The file may become unusable.", FileRenaming: "Renaming...", FileDelete: 'Are you sure you want to delete the file "%1"?', FilesDelete: "Are you sure you want to delete %1 files?", FilesLoading: "Loading...", FilesEmpty: "The folder is empty.", DestinationFile: "Destination File", SkippedFiles: "List of skipped files:", BasketFolder: "Basket", BasketClear: "Clear Basket", BasketRemove: "Remove from Basket", BasketOpenFolder: "Open Parent Folder", BasketTruncateConfirm: "Do you really want to remove all files from the basket?", BasketRemoveConfirm: 'Do you really want to remove the file "%1" from the basket?', BasketRemoveConfirmMultiple: "Do you really want to remove %1 files from the basket?", BasketEmpty: "No files in the basket, drag and drop some.", BasketCopyFilesHere: "Copy Files from Basket", BasketMoveFilesHere: "Move Files from Basket", OperationCompletedSuccess: "Operation completed successfully.", OperationCompletedErrors: "Operation completed with errors.", FileError: "%s: %e", MovedFilesNumber: "Number of files moved: %s.", CopiedFilesNumber: "Number of files copied: %s.", MoveFailedList: "The following files could not be moved:<br />%s", CopyFailedList: "The following files could not be copied:<br />%s", Upload: "Upload", UploadTip: "Upload New File", Refresh: "Refresh", Settings: "Settings", Help: "Help", HelpTip: "Help", Select: "Select", SelectThumbnail: "Select Thumbnail", View: "View", Download: "Download", NewSubFolder: "New Subfolder", Rename: "Rename", Delete: "Delete", DeleteFiles: "Delete Files", CopyDragDrop: "Copy Here", MoveDragDrop: "Move Here", RenameDlgTitle: "Rename", NewNameDlgTitle: "New Name", FileExistsDlgTitle: "File Already Exists", SysErrorDlgTitle: "System Error", FileOverwrite: "Overwrite", FileAutorename: "Auto-rename", ManuallyRename: "Manually rename", OkBtn: "OK", CancelBtn: "Cancel", CloseBtn: "Close", UploadTitle: "Upload New File", UploadSelectLbl: "Select a file to upload", UploadProgressLbl: "(Upload in progress, please wait...)", UploadBtn: "Upload Selected File", UploadBtnCancel: "Cancel", UploadNoFileMsg: "Please select a file from your computer.", UploadNoFolder: "Please select a folder before uploading.", UploadNoPerms: "File upload not allowed.", UploadUnknError: "Error sending the file.", UploadExtIncorrect: "File extension not allowed in this folder.", UploadLabel: "Files to Upload", UploadTotalFiles: "Total Files:", UploadTotalSize: "Total Size:", UploadSend: "Upload", UploadAddFiles: "Add Files", UploadClearFiles: "Clear Files", UploadCancel: "Cancel Upload", UploadRemove: "Remove", UploadRemoveTip: "Remove !f", UploadUploaded: "Uploaded !n%", UploadProcessing: "Processing...", SetTitle: "Settings", SetView: "View:", SetViewThumb: "Thumbnails", SetViewList: "List", SetDisplay: "Display:", SetDisplayName: "File Name", SetDisplayDate: "Date", SetDisplaySize: "File Size", SetSort: "Sorting:", SetSortName: "by File Name", SetSortDate: "by Date", SetSortSize: "by Size", SetSortExtension: "by Extension", FilesCountEmpty: "<Empty Folder>", FilesCountOne: "1 file", FilesCountMany: "%1 files", Kb: "%1 KB", Mb: "%1 MB", Gb: "%1 GB", SizePerSecond: "%1/s", ErrorUnknown: "It was not possible to complete the request. (Error %1)", Errors: { 10: "Invalid command.", 11: "The resource type was not specified in the request.", 12: "The requested resource type is not valid.", 102: "Invalid file or folder name.", 103: "It was not possible to complete the request due to authorization restrictions.", 104: "It was not possible to complete the request due to file system permission restrictions.", 105: "Invalid file extension.", 109: "Invalid request.", 110: "Unknown error.", 111: "It was not possible to complete the request due to resulting file size.", 115: "A file or folder with the same name already exists.", 116: "Folder not found. Please refresh and try again.", 117: "File not found. Please refresh the files list and try again.", 118: "Source and target paths are equal.", 201: 'A file with the same name is already available. The uploaded file was renamed to "%1".', 202: "Invalid file.", 203: "Invalid file. The file size is too big.", 204: "The uploaded file is corrupt.", 205: "No temporary folder is available for upload in the server.", 206: "Upload cancelled due to security reasons. The file contains HTML-like data.", 207: 'The uploaded file was renamed to "%1".', 300: "Moving file(s) failed.", 301: "Copying file(s) failed.", 500: "The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.", 501: "The thumbnails support is disabled." }, ErrorMsg: { FileEmpty: "The file name cannot be empty.", FileExists: "File %s already exists.", FolderEmpty: "The folder name cannot be empty.", FolderExists: "Folder %s already exists.", FolderNameExists: "Folder already exists.", FileInvChar: 'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |', FolderInvChar: 'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |', PopupBlockView: "It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.", XmlError: "It was not possible to properly load the XML response from the web server.", XmlEmpty: "It was not possible to load the XML response from the web server. The server returned an empty response.", XmlRawResponse: "Raw response from the server: %s" }, Imageresize: { dialogTitle: "Resize %s", sizeTooBig: "Cannot set image height or width to a value bigger than the original size (%size).", resizeSuccess: "Image resized successfully.", thumbnailNew: "Create a new thumbnail", thumbnailSmall: "Small (%s)", thumbnailMedium: "Medium (%s)", thumbnailLarge: "Large (%s)", newSize: "Set a new size", width: "Width", height: "Height", invalidHeight: "Invalid height.", invalidWidth: "Invalid width.", invalidName: "Invalid file name.", newImage: "Create a new image", noExtensionChange: "File extension cannot be changed.", imageSmall: "Source image is too small.", contextMenuName: "Resize", lockRatio: "Lock ratio", resetSize: "Reset size" }, Fileeditor: { save: "Save", fileOpenError: "Unable to open file.", fileSaveSuccess: "File saved successfully.", contextMenuName: "Edit", loadingFile: "Loading file, please wait..." }, Maximize: { maximize: "Maximize", minimize: "Minimize" }, Gallery: { current: "Image {current} of {total}" }, Zip: { extractHereLabel: "Extract here", extractToLabel: "Extract to...", downloadZipLabel: "Download as zip", compressZipLabel: "Compress to zip", removeAndExtract: "Remove existing and extract", extractAndOverwrite: "Extract overwriting existing files", extractSuccess: "File extracted successfully." }, Search: { searchPlaceholder: "Search" } }, e.aL.Acl = function (e) { var t = this; e || (e = 0), t.folderView = 1 == (1 & e), t.folderCreate = 2 == (2 & e), t.folderRename = 4 == (4 & e), t.folderDelete = 8 == (8 & e), t.fileView = 16 == (16 & e), t.fileUpload = 32 == (32 & e), t.fileRename = 64 == (64 & e), t.fileDelete = 128 == (128 & e) }, p.add("acl"), function () { p.add("connector", { bM: ["csrftokenmanager"], bz: function (t) { t.on("appReady", function () { t.connector = new e.aL.Connector(t); var n = t.config.resourceType, o = n ? { type: n } : null; t.connector.sendCommand("Init", o, function (n) { var o; if (!n.checkError()) { var i = "Connector/ConnectorInfo/"; e.ed = n.selectSingleNode(i + "@s").value, e.bF = n.selectSingleNode(i + "@c").value + "----", t.config.thumbsEnabled = "true" == n.selectSingleNode(i + "@thumbsEnabled").value, t.config.thumbsDirectAccess = !1, t.config.thumbsEnabled ? ((o = n.selectSingleNode(i + "@thumbsUrl")) && (t.config.thumbsUrl = o.value), (o = n.selectSingleNode(i + "@thumbsDirectAccess")) && (t.config.thumbsDirectAccess = "true" == o.value), o = n.selectSingleNode(i + "@thumbsWidth"), t.config.thumbsWidth = (o ? parseInt(o.value, 10) : 100) || 100, o = n.selectSingleNode(i + "@thumbsHeight"), t.config.thumbsHeight = (o ? parseInt(o.value, 10) : 100) || 100) : (t.config.thumbsWidth = 100, t.config.thumbsHeight = 100), t.config.imagesMaxWidth = parseInt(n.selectSingleNode(i + "@imgWidth").value, 10), t.config.imagesMaxHeight = parseInt(n.selectSingleNode(i + "@imgHeight").value, 10), o = n.selectSingleNode(i + "@uploadMaxSize"), t.config.uploadMaxSize = o ? parseInt(o.value, 10) : 0, o = n.selectSingleNode(i + "@uploadCheckImages"), t.config.uploadCheckImages = !!o && "true" == o.value, o = n.selectSingleNode(i + "@csrfProtection"), t.config.csrfProtection = !!o && "true" == o.value; var a = n.selectSingleNode(i + "@plugins"), r = a && a.value; r && r.length ? p.load(r.split(","), function (o) { var i = [], a = [], r = []; for (var l in o) { var s = o[l], c = s.lang, u = p.getPath(l), f = null; t.plugins[l] || (t.plugins[l] = o[l], o[l].name = l, s.pathName = u, c && (f = d.indexOf(c, t.langCode) >= 0 ? t.langCode : c[0], s.lang[f] ? (d.extend(t.lang, s.lang[f]), f = null) : r.push(e.getUrl(u + "lang/" + f + ".js"))), a.push(f), i.push(s)) } e.scriptLoader.load(r, function () { for (var o = ["eK", "bz", "gr"], r = 0; r < o.length; r++)for (var l = 0; l < i.length; l++) { var s = i[l]; 0 === r && a[l] && s.lang && d.extend(t.lang, s.lang[a[l]]), s[o[r]] && (e.log("[PLUGIN] " + s.name + "." + o[r]), s[o[r]](t)) } t.cr("uiReady"), t.cr("appReady"), t.oW("pluginsLoaded", { step: 2, jN: t.connector }), t.cr("connectorInitialized", { xml: n }) }) }) : (t.oW("pluginsLoaded", { step: 2, jN: t.connector }), t.cr("connectorInitialized", { xml: n })) } }) }) } }), e.aL.Connector = function (t) { this.app = t; var n = t.config.connectorLanguage || "aspx"; t.config.connectorPath ? this.oN = t.config.connectorPath : this.oN = e.basePath + "core/connector/" + n + "/connector." + n }, e.aL.Connector.prototype = { ERROR_NONE: 0, ERROR_CUSTOMERROR: 1, ERROR_INVALIDCOMMAND: 10, ERROR_TYPENOTSPECIFIED: 11, ERROR_INVALIDTYPE: 12, ERROR_INVALIDNAME: 102, ERROR_UNAUTHORIZED: 103, ERROR_ACCESSDENIED: 104, ERROR_INVALIDEXTENSION: 105, ERROR_INVALIDREQUEST: 109, ERROR_UNKNOWN: 110, ERROR_ALREADYEXIST: 115, ERROR_FOLDERNOTFOUND: 116, ERROR_FILENOTFOUND: 117, ERROR_SOURCE_AND_TARGET_PATH_EQUAL: 118, ERROR_UPLOADEDFILERENAMED: 201, ERROR_UPLOADEDINVALID: 202, ERROR_UPLOADEDTOOBIG: 203, ERROR_UPLOADEDCORRUPT: 204, ERROR_UPLOADEDNOTMPDIR: 205, ERROR_UPLOADEDWRONGHTMLFILE: 206, ERROR_UPLOADEDINVALIDNAMERENAMED: 207, ERROR_MOVE_FAILED: 300, ERROR_COPY_FAILED: 301, ERROR_CONNECTORDISABLED: 500, ERROR_THUMBNAILSDISABLED: 501, currentFolderUrl: function () { if (this.app.aV) return this.app.aV.getUrl() }, currentType: function () { if (this.app.aV) return this.app.aV.type }, currentTypeHash: function () { if (this.app.aV) return e.getResourceType(this.app.aV.type).hash }, currentResourceType: function () { return e.getResourceType(this.currentType()) }, sendCommand: function (n, o, i, a, r) { var l = this.composeUrl(n, o, a, r), s = this; return i ? e.ajax.loadXml(l, function (e) { e.hy = s.app, s.app.oW("connectorResponse", { xml: e }), i(d.extend(e, t)) }) : e.ajax.loadXml(l, function (e) { s.app.oW("connectorResponse", { xml: e }) }) }, sendCommandPost: function (n, o, i, a, r, l) { var s = this.composeUrl(n, o, r, l), c = this; return i || (i = {}), i.ckCsrfToken = e.getCsrfToken(), i.CKFinderCommand = !0, a ? e.ajax.loadXml(s, function (e) { e.hy = c.app, c.app.oW("connectorResponse", { xml: e }), a(d.extend(e, t)) }, this.composeUrlParams(i)) : e.ajax.loadXml(s, function (e) { c.app.oW("connectorResponse", { xml: e }) }, this.composeUrlParams(i)) }, composeUrl: function (e, t, n, o) { var i = this, a = i.oN + "?command=" + encodeURIComponent(e); if ("Init" != e) { var r = ""; o || (o = i.app.aV), r = n ? i.app.getResourceType(n).hash : i.app.getResourceType(o.type).hash, a += "&type=" + encodeURIComponent(n || i.app.aV.type) + "&currentFolder=" + encodeURIComponent(o.getPath() || "") + "&langCode=" + i.app.langCode + "&hash=" + r } if (t) { var l = i.composeUrlParams(t); l && (a += "&" + l) } return i.app.id && (a += "&id=" + encodeURIComponent(i.app.id)), i.app.config.connectorInfo && (a += ("&" != i.app.config.connectorInfo.charAt(0) ? "&" : "") + i.app.config.connectorInfo), a }, composeUrlParams: function (e) { if (!e) return ""; var t = ""; for (var n in e) t.length && (t += "&"), t += encodeURIComponent(n) + "=" + encodeURIComponent(e[n]); return t } }; var t = { checkError: function () { var t = this, n = t.getErrorNumber(), o = t.hy.connector; if (n == o.ERROR_NONE) return !1; if (-1 === n) return !0; var i, a = t.getErrorMessage(); if (e.log("[ERROR] " + n), n == o.ERROR_CUSTOMERROR) i = a; else if (i = t.hy.lang.Errors[n]) for (var r = 0; r <= arguments.length; r++) { var l = 0 === r ? a : arguments[r - 1]; i = i.replace(/%(\d+)/, l) } else i = t.hy.lang.ErrorUnknown.replace(/%1/, n); return t.hy.msgDialog("", i), n != o.ERROR_UPLOADEDFILERENAMED }, getErrorNumber: function () { var e = this.selectSingleNode && this.selectSingleNode("Connector/Error/@number"); return e ? parseInt(e.value, 10) : -1 }, getErrorMessage: function () { var e = this.selectSingleNode && this.selectSingleNode("Connector/Error/@text"); return e ? e.value : "" } } }(), p.add("resource", { bM: ["connector"], bz: function (t) { t.resourceTypes = [], t.on("connectorInitialized", function (n) { for (var o = n.data.xml.selectNodes("Connector/ResourceTypes/ResourceType"), i = 0; i < o.length; i++) { var a = o[i].attributes; t.resourceTypes.push(new e.aL.ResourceType(t, { name: a.getNamedItem("name").value, url: a.getNamedItem("url").value, hasChildren: a.getNamedItem("hasChildren").value, allowedExtensions: a.getNamedItem("allowedExtensions").value, deniedExtensions: a.getNamedItem("deniedExtensions").value, acl: a.getNamedItem("acl").value, hash: a.getNamedItem("hash").value, maxSize: a.getNamedItem("maxSize").value })) } t.cr("resourcesReceived", { hK: t.resourceTypes }) }), t.getResourceType = function (e) { for (var t = 0; t < this.resourceTypes.length; t++) { var n = this.resourceTypes[t]; if (n.name == e) return n } return null } } }), function () { function t(e) { var t = {}; if (e.length > 0) for (var n = e.toLowerCase().split(","), o = 0; o < n.length; o++)t[n[o]] = !0; return t } e.aL.ResourceType = function (e, n) { var o = this; o.app = e, o.name = n.name, o.url = n.url, o.hasChildren = "true" === n.hasChildren, o.defaultView = "Thumbnails", o.allowedExtensions = n.allowedExtensions, o.deniedExtensions = n.deniedExtensions, o.oT = t(n.allowedExtensions), o.ms = t(n.deniedExtensions), o.nS = n.acl, o.hash = n.hash, o.maxSize = n.maxSize }, e.aL.ResourceType.prototype = { isExtensionAllowed: function (e) { var t = this; return e = e.toLowerCase(), !(0 !== t.deniedExtensions.length && t.ms[e] || 0 !== t.allowedExtensions.length && !t.oT[e]) }, allowedExtensions: function () { return this.allowedExtensions }, getRootFolder: function () { for (var e = 0; e < this.app.folders.length; e++) { var t = this.app.folders[e]; if (t.isRoot && t.type == this.name) return t } } } }(), function () { var e = function (e) { this.app = e }; e.prototype.er = function (e, t) { var n = this; if (!n.id) { n.toolbarId = "cke_" + d.getNextNumber(), n.id = "cke_" + d.getNextNumber(), n.placeholderId = "cke_" + d.getNextNumber(); var o = { id: n.id, placeholderId: n.placeholderId, lastTimeout: -1, app: e }, i = d.addFunction(e.search.doSearch, o), a = d.addFunction(e.search.onFocus, o); t.push('<span class="cke_search_box" id="', n.toolbarId, '" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>'), t.push('<input id="' + n.id + '" '), t.push(' onkeyup="window.parent.CKFinder._.callFunction(', i, ', this);"'), t.push(' oninput="window.parent.CKFinder._.callFunction(', i, ', this);"'), t.push(' onfocus="window.parent.CKFinder._.callFunction(', a, ', this);"'), t.push(">"), t.push('<span id="' + n.placeholderId + '" class="cke_search_placeholder" onclick="window.parent.CKFinder._.callFunction(', a, ', this);">' + e.lang.Search.searchPlaceholder + "</span>"), t.push('<span class="cke_toolbar_end"></span></span>') } }, e.prototype.doSearch = function () { var e = this.app.ld["filesview.filesview"].oE().shownFiles.length, t = this.app.document.getById(this.id).getValue(), n = this.app; this.lastTimeout && (clearTimeout(this.lastTimeout), this.lastTimeout = null), e < 200 ? n.ld["filesview.filesview"].oW("requestRenderFiles", { lookup: t }) : this.lastTimeout = setTimeout(function () { n.ld["filesview.filesview"].oW("requestRenderFiles", { lookup: t }) }, 1e3) }, e.prototype.onFocus = function () { var e = this; e.app.document.getById(e.placeholderId).setStyle("display", "none"), e.app.document.getById(e.id).$.focus() }, e.prototype.reset = function () { var e = this; e.app.document.getById(e.id).setValue(""), e.app.document.getById(e.placeholderId).setStyle("display", "inline") }, p.add("search", { bM: ["foldertree"], eK: function (t) { t.search = new e(t) }, bz: function (e) { e.on("appReady", function () { e.ld["foldertree.foldertree"].on("beforeSelectFolder", function () { e.search.reset() }), e.ld["formpanel.formpanel"].on("afterUploadFile", function () { e.search.reset() }) }) } }) }(), function () { var t = { iz: /[\\\/:\*\?"<>\|]/ }; function n(t, n, o, i, a) { null === t.childFolders && (t.childFolders = []); var r = new e.aL.Folder(t.app, n, o, i, a); return r.parent = t, r.nh = t.isRoot ? 0 : t.nh + 1, t.childFolders.push(r), r } function o(e) { return e.folders || (e.folders = []), e.folders } function i(n, o) { if (!n || 0 === n.length) throw new e.dU("name_empty", o.lang.ErrorMsg.FolderEmpty); if (t.iz.test(n)) throw new e.dU("name_invalid_chars", o.lang.ErrorMsg.FolderInvChar); return !0 } p.add("folder", { bM: ["resource", "connector", "acl"], bz: function (t) { t.folders = o(t), t.aV = null, t.on("resourcesReceived", function (n) { for (var o = [], i = n.data.hK, a = 0; a < i.length; a++) { var r = i[a]; o.push(new e.aL.Folder(t, r.name, r.name, r.hasChildren, r.nS)), o[o.length - 1].isRoot = !0 } t.oW("requestAddFolder", { folders: o }, function () { var n = t.config.startupPath || "", o = 0, i = "", a = ""; if (t.config.rememberLastFolder) { var r = t.id ? "CKFinder_Path_" + t.id : "CKFinder_Path"; i = decodeURIComponent(d.getCookie(r)) || "" } if (n && !t.qn ? (a = n, o = 1) : i ? a = i : n ? a = n : t.resourceTypes.length && (a = t.resourceTypes[0].name + "/"), a) { e.log("[FOLDER] Opening startup path: " + a); var l = a.split(":"); (!t.getResourceType(l[0]) || l.length < 2) && (l = [t.resourceTypes[0].name, "/"]); var s = t.ld["foldertree.foldertree"], c = /(.*\/)(.*)$/.exec(l[1]); s.tools.jL(l[0], c[1], function (n) { if (n) { e.log("[FOLDER] Opening startup folder: ", n); var i = !o && ("1" == l[2] || void 0 === l[2]); i && !1 === t.config.startupFolderExpanded && (i = 0), s.oW("requestSelectFolder", { folder: n, expand: i, file: c[2] && n.type == l[0] && n.getPath() == c[1] ? c[2] : "" }) } }) } }) }), t.bD("RemoveFolder", { readOnly: !1, exec: function (e) { var t = e.aV; if (t) { if (t.isRoot || !t.acl.folderDelete) return; e.fe("", e.lang.FolderDelete.replace("%1", d.escapeHtml(t.name)), function () { e.oW("requestProcessingFolder", { folder: t }), t.remove() }) } } }), t.bD("CreateSubFolder", { readOnly: !1, exec: function (t) { var n = t.aV; n && t.hs(t.lang.NewNameDlgTitle, t.lang.FolderRename, "", function (o) { if (o = d.trim(o)) try { t.oW("requestProcessingFolder", { folder: n }), n.createNewFolder(o) } catch (o) { if (!(o instanceof e.dU)) throw o; t.oW("requestRepaintFolder", { folder: n }), t.msgDialog("", o.message) } }) } }), t.bD("RenameFolder", { readOnly: !1, exec: function (t) { var n = t.aV; if (n) { if (n.isRoot || !n.acl.folderRename) return; t.hs(t.lang.RenameDlgTitle, t.lang.FolderRename, t.aV.name, function (o) { if (o = d.trim(o)) try { n.rename(o) } catch (o) { if (!(o instanceof e.dU)) throw o; t.oW("requestRepaintFolder", { folder: n }), t.msgDialog("", o.message) } }) } } }), t.eU && (t.dZ("folder0", 99), t.dZ("folder1", 100), t.dZ("folder2", 101), t.dZ("folder3", 102), t.eU({ createSubFolder: { label: t.lang.NewSubFolder, command: "CreateSubFolder", group: "folder1" }, renameFolder: { label: t.lang.Rename, command: "RenameFolder", group: "folder1" }, removeFolder: { label: t.lang.Delete, command: "RemoveFolder", group: "folder2" } })) } }), e.aL.Folder = function (t, n, i, a, r) { var l = this; l.app = t, l.type = n || "", l.name = i || "", l.hasChildren = null == a || null === a || !!a, l.isRoot = !1, l.isOpened = !1, l.parent = null, l.isDirty = !1, l.acl = new e.aL.Acl(r), l.index = o(t).push(l) - 1, l.childFolders = null }, e.aL.Folder.prototype = { getPath: function () { for (var e = this, t = e.isRoot ? "/" : e.name; e.parent;)t = (e = e.parent).isRoot ? "/" + t : e.name + "/" + t; return e != this ? t + "/" : t }, getUrl: function () { for (var e = this, t = ""; e;)t = e.isRoot ? this.app.getResourceType(e.type).url + t : encodeURIComponent(e.name) + "/" + t, e = e.parent; return t }, getUploadUrl: function () { return this.app.connector.composeUrl("FileUpload", {}, this.type, this) }, getResourceType: function () { return this.app.getResourceType(this.type) }, updateReference: function () { var e = this; if (e.app.folders[e.index] == e) return e; for (var t = 0; t < e.parent.childFolders.length; t++)if (e.parent.childFolders[t].name == e.name) return e.parent.childFolders[t] }, getChildren: function (t, o) { var i = this, a = i.childFolders; if (!i.hl || o) { if (a && !i.isDirty && !o) return t(a), a; if (i.hl = !0, i.isDirty && a) { e.log("[FOLDER] Clearing folder children cache."); for (var r = 0; r < a.length; r++)delete i.app.folders[a[r].index] } return i.app.oW("requestLoadingFolder", { folder: i }), this.app.connector.sendCommand("GetFolders", null, function (e) { if (e.checkError()) i.app.oW("requestRepaintFolder", { folder: i }); else { var o = e.selectSingleNode("Connector/@resourceType").value; i.hm = !0; var a = e.selectNodes("Connector/Folders/Folder"), r = []; i.childFolders = null; for (var l = 0; l < a.length; l++) { var s = a[l].attributes.getNamedItem("name").value, d = "true" == a[l].attributes.getNamedItem("hasChildren").value, c = parseInt(a[l].attributes.getNamedItem("acl").value, 10); r.push(n(i, o, s, d, c)) } i.hasChildren = !!a.length, i.isDirty = !1, i.hl = null, i.app.oW("requestRepaintFolder", { folder: i }), t(r) } }, i.type, i), null } e.log("[FOLDER] getChildrenLock active, defering callback..."), i.app.oW("requestLoadingFolder", { folder: i }); var l = 100; setTimeout(function () { i.hl ? l <= 3e3 ? setTimeout(arguments.callee, l *= 2) : (e.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!"), i.hl = !1, i.getChildren(t)) : t(a) }) }, mapLoadedDescendants: function (e) { if (this.childFolders) for (var t = 0; t < this.childFolders.length; t++) { var n = this.childFolders[t]; n.mapLoadedDescendants(e), e(n) } }, select: function () { this.app.oW("requestSelectFolder", { folder: this }) }, isSelected: function () { return this.app.aV && this == this.app.aV }, deselect: function () { this.app.oW("requestSelectFolder") }, open: function (e) { e && !this.hm || this.app.oW("requestExpandFolder", { folder: this }) }, close: function () { this.app.oW("requestExpandFolder", { folder: this, collapse: 1 }) }, hU: function () { for (var e = 1, t = this; t;)e++, t = t.parent; return e }, toggle: function () { var e = this; e.hasChildren && (e.isOpened ? e.close() : e.open()) }, createNewFolder: function (e) { i(e, this.app); var t = this; t.isDirty = !0, t.app.connector.sendCommandPost("CreateFolder", { NewFolderName: e }, null, function (n) { n.checkError() ? t.app.oW("requestRepaintFolder", { folder: t }) : (t.hasChildren = !0, t.app.oW("afterCommandExecDefered", { name: "CreateFolder", ip: t, uv: e })) }, this.type, this) }, rename: function (e) { i(e, this.app); var t = this; this.app.oW("requestProcessingFolder", { folder: t }), t.parent.isDirty = !0, t.name != e ? t.app.connector.sendCommandPost("RenameFolder", { NewFolderName: e }, null, function (e) { e.checkError() ? t.app.oW("requestRepaintFolder", { folder: t }) : (t.parent.isDirty = !1, t.name = e.selectSingleNode("Connector/RenamedFolder/@newName").value, t.app.oW("requestRepaintFolder", { folder: t })) }, this.type, this) : t.app.oW("requestRepaintFolder", { folder: t }) }, remove: function () { var e = this; e.deselect(), e.parent.isDirty = !0, this.app.oW("requestProcessingFolder", { folder: e }), e.app.connector.sendCommandPost("DeleteFolder", null, null, function (t) { t.checkError() ? e.app.oW("requestRepaintFolder", { folder: e }) : e.app.oW("requestRemoveFolder", { folder: e }, function () { var t = d.indexOf(e.parent.childFolders, e), n = e.index, o = e.parent, i = e.app; o.childFolders[t].mapLoadedDescendants(function (e) { i.folders[e.index].isDeleted = !0, delete i.folders[e.index] }), o.childFolders.splice(t, 1), i.folders[n].isDeleted = !0, delete i.folders[n], 0 === o.childFolders.length && (o.childFolders = null, o.hasChildren = !1), e.releaseDomNodes && e.releaseDomNodes(), i.oW("afterCommandExecDefered", { name: "RemoveFolder", ip: o, uN: n, folder: e }) }) }, this.type, this) }, toString: function () { return this.getPath() } } }(), function () { var t = '<a href="javascript:void(0)" class="dropdown">▼</a>'; function n(e) { var n = e.hasChildren ? "" : " nochildren"; return '<li id="' + ("f" + e.index) + '" role="presentation" class="openable' + n + '"><span role="presentation" class="expander"' + (e.hasChildren ? ' onclick="void(0)"' : "") + '></span><a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="' + e.hU() + '">' + d.htmlEncode(e.name) + "</a>" + (e.isBasket ? "" : t) + "<ul></ul></li>" } function o(e, t) { for (var n = "", o = 0; o < e.length; o++)n += t(e[o]); return n } function i(e, t, n) { return function (e, t) { for (var n in e) if (void 0 !== t(e[n])) return e[n] }(e, function (e) { if (e.tagName && e.tagName.toLowerCase() == t && !n--) return e }) } function a(e) { return new u(e) } p.add("foldertree", { bM: ["folder"], onLoad: function () { !function () { var t = e.ld.hS("foldertree", "foldertree"); function r(e) { this.ib = e, this.bi = e.tools.kI().cf() } t.dT.push(function () { var e = this.bn(); e.hasClass("view") || (e = e.getParent()), d.mH(e) }), t.bh("KeyboardNavigation", ["keydown", "requestKeyboardNavigation"], function (t) { var n = this, o = this.tools.cq(t), i = 0; if (t.data && t.data.bK) { var a = t.data.bK(); i = a.$ == n.bn().$ } if (o || i) { var r = d.extend({}, t.data, { folder: o }, !0); this.oW("beforeKeyboardNavigation", r, function (a, r) { if (!a) try { var l = t.data.db(); if (i && l >= 37 && l <= 40) { var s = n.app.folders[0]; s && this.tools.cT(s) } else { var d; if (38 == l) if (t.data.preventDefault(), (d = o.liNode()).gE()) { for (var c = this.tools.cq(d.cf()); c.isOpened && c.hasChildren && c.childFolders.length;)c = c.childFolders[c.childFolders.length - 1]; this.tools.cT(c) } else o.isRoot || this.tools.cT(o.parent); else 39 == l && o.hasChildren ? o.isOpened ? o.getChildren(function (e) { n.tools.cT(e[0]) }) : this.oW("requestExpandFolder", { folder: o }) : 40 == l ? (t.data.preventDefault(), d = o.liNode(), o.isOpened && o.hasChildren ? o.getChildren(function (e) { n.tools.cT(e[0]) }) : d.ge() ? this.tools.cT(this.tools.cq(d.dG())) : !o.isRoot && o.parent && function (e) { var t = e.liNode(); t.ge() ? n.tools.cT(n.tools.cq(t.dG())) : e.parent && arguments.callee(e.parent) }(o.parent)) : 37 == l ? o.isOpened ? this.oW("requestExpandFolder", { folder: o, collapse: 1 }) : !o.isRoot && o.parent && this.tools.cT(o.parent) : 46 == l ? (n.app.oW("requestSelectFolder", { folder: o }), n.app.execCommand("RemoveFolder")) : 113 == l && (n.app.oW("requestSelectFolder", { folder: o }), n.app.execCommand("RenameFolder")) } this.oW("successKeyboardNavigation", r), this.oW("afterKeyboardNavigation", r) } catch (t) { throw t = e.ba(t), this.oW("failedKeyboardNavigation", r), this.oW("afterKeyboardNavigation", r), t } }) } }), t.dT.push(function (e, t) { e.on("afterCommandExecDefered", function (n) { if (n.data) { var o = n.data.folder; if ("RemoveFolder" == n.data.name) { o == t.tools.ew && (t.tools.cT(), t.bn().focus()); var i = e.ld["filesview.filesview"].tools.folder, a = o == i; o.mapLoadedDescendants(function (e) { i == o && (a = !0) }), t.oW("requestSelectFolder", { folder: o.parent, expand: a }) } else "RenameFolder" == n.data.name && o == t.tools.ew && o.focus() } }) }), t.bh("RemoveFolder", "requestRemoveFolder", function (t) { var n = this.tools.cq(t), o = d.extend({}, t.data, { folder: n }, !0); this.oW("beforeRemoveFolder", o, function (t, o) { var i = this; if (!t) try { n.liNode().remove(), i.oW("successRemoveFolder", o), i.oW("afterRemoveFolder", o) } catch (t) { throw i.oW("failedRemoveFolder", o), i.oW("afterRemoveFolder", o), e.ba(t) } }) }, !1), t.bh("LoadingFolder", "requestLoadingFolder", function (t) { var n = this, o = this.tools.cq(t); if (o) { var i = d.extend({}, t.data, { folder: o }, !0); this.oW("beforeLoadingFolder", i, function (t, o) { if (!t) { var i = o.folder; try { this.on("afterExpandFolder", function (e) { if (e.data && e.data.folder == i) { e.removeListener(); var t = i.childrenRootNode().getChild(0); t && t.hasClass("loading") && (t.remove(), this.oW("requestRepaintFolder", { folder: i }), o.step = 2, n.oW("successLoadingFolder", o), n.oW("afterLoadingFolder", o)) } }, null, null, 1), i.childrenRootNode() && i.childrenRootNode().setHtml('<li class="loading">' + n.app.lang.FolderLoading + "</li>"), this.oW("requestProcessingFolder", { folder: i }), o.step = 1, this.oW("successLoadingFolder", o) } catch (t) { throw this.oW("failedLoadingFolder", o), this.oW("afterLoadingFolder", o), e.ba(t) } } }) } }), t.bh("ProcessingFolder", ["requestProcessingFolder"], function (t) { t.result = this.oW("beforeProcessingFolder", t.data, function (t, n) { var o = this; if (!t) try { var i = o.tools.cq(n.folder), a = i.aNode(); a.addClass("processing"), o.oW("successProcessingFolder", n), o.oW("afterProcessingFolder", n) } catch (t) { throw t = e.ba(t), o.oW("failedProcessingFolder", n), o.oW("afterProcessingFolder", n), t } }) }), t.bh("RepaintFolder", ["requestRepaintFolder"], function (t) { this.oW("beforeRepaintFolder", t.data, function (t, n) { var o = this; if (!t) try { var i = o.tools.cq(n.folder), a = i.liNode(), r = i.expanderNode(), l = i.aNode(), s = i.childrenRootNode(), c = i.name; l.getHtml() != c && l.setHtml(d.htmlEncode(i.name)), l.removeClass("processing"), i.hasChildren ? i.hasChildren && (s.$.hasChildNodes() ? (a.addClass("closable"), a.removeClass("openable"), r.setAttribute("aria-expanded", "true")) : (a.addClass("openable"), a.removeClass("closable"), r.removeAttribute("aria-expanded"))) : (a.removeClass("openable"), a.removeClass("closable"), a.addClass("nochildren"), r.removeAttribute("aria-expanded"), s.$.hasChildNodes() && s.setHtml("")), o.oW("successRepaintFolder"), o.oW("afterRepaintFolder") } catch (t) { throw o.oW("failedRepaintFolder"), o.oW("afterRepaintFolder"), e.ba(t) } }) }), t.dT.push(function (e, t) { e.on("afterCommandExecDefered", function (e) { e.data && "RemoveFolder" == e.data.name && t.oW("requestRepaintFolder", { folder: e.data.ip }) }) }), t.bh("AddFolder", "requestAddFolder", function (t) { var i = this, a = { folders: t.data.folder ? [t.data.folder] : t.data.folders, root: t.data.root }; this.oW("beforeAddFolder", a, function (t, a) { if (!t) { var r, l, s = a.folders, d = a.root ? this.tools.cq(a.root) : null; try { if (d) !1 === d.hasChildren ? d.liNode().addClass("nochildren") : (d.liNode().removeClass("nochildren"), r = o(s, n), d.childrenRootNode().appendHtml(r)); else { for (var c = {}, u = 0; u < s.length; u++)l = s[u].parent ? s[u].parent.index : -1, c[l] || (c[l] = []), c[l].push(s[u]); for (var f in c) r = o(c[f], n), -1 == f ? this.tools.kI().appendHtml(r) : ((l = this.tools.cq(f)).liNode().removeClass("nochildren"), l.childrenRootNode().appendHtml(r)); (1 == e.bs.indexOf(e.bF.substr(1, 1)) % 5 && e.lS(window.top[e.nd + "cation"][e.jG + "st"]) != e.lS(e.ed) || e.bF.substr(3, 1) != e.bs.substr(9 * (e.bs.indexOf(e.bF.substr(0, 1)) + e.bs.indexOf(e.bF.substr(2, 1))) % (e.bs.length - 1), 1)) && setTimeout(function () { i.app.layout.ea() }, 100) } this.oW("successAddFolder"), this.oW("afterAddFolder") } catch (t) { throw this.oW("failedAddFolder"), this.oW("afterAddFolder"), e.ba(t) } } }) }), t.bh("SelectFolder", ["click", "requestSelectFolder", "requestSelectFolderRefresh"], function (t) { var n = this, o = "click" == t.name, i = o && t.data.bK(); if (!this.tools.kg(t)) { var a = this.tools.cq(t); if (o && i.hasClass("dropdown")) return t.jN.oW("contextmenu", t.data), void t.cancel(); if (o || "requestSelectFolder" == t.name) { if (o && !a) return; if (o && a.aNode() && a.aNode().$ != i.$) return; var r = d.extend({ jR: 1, expand: 0 }, t.data, { folder: a }, !0); this.oW("beforeSelectFolder", r, function (t, i) { if (!t) { var a = i.folder; try { if (this.app.aV && (!a || a != this.app.aV)) { var r = this.app.aV.liNode(); r && r.removeClass("selected"), n.tools.hk().mc(), this.app.aV = null } return a ? (o && this.tools.cT(a), i.expand && n.oW("requestExpandFolder", { folder: a }), a.liNode().addClass("selected"), this.app.aV = a, n.tools.hk().select(a.aNode()), i.jR && (n.oW("requestProcessingFolder", { folder: a }), n.tools.mV(a, 1), n.app.oW("requestShowFolderFiles", { folder: a, mw: i.file }, function (e, t) { t.ib && t.ib.on("afterShowFolderFiles", function (e) { e.data.folder == a && (e.removeListener(), n.oW("requestRepaintFolder", { folder: a })) }) })), this.oW("successSelectFolder"), this.oW("afterSelectFolder"), a) : (this.oW("successSelectFolder"), void this.oW("afterSelectFolder")) } catch (t) { throw this.oW("failedSelectFolder"), this.oW("afterSelectFolder"), e.ba(t) } } }) } else "requestSelectFolderRefresh" == t.name && this.oW("beforeSelectFolderRefresh", function (t) { var n = this; if (!t) try { if (n.app.aV) { var o = n.app.aV.aNode(); o ? n.tools.hk().select(o) : (n.tools.hk().mc(), n.oW("failedSelectFolderRefresh")) } else n.oW("successSelectFolderRefresh"); return n.oW("afterSelectFolderRefresh"), a } catch (t) { throw n.oW("failedSelectFolderRefresh"), n.oW("afterSelectFolderRefresh"), e.ba(t) } }) } }), t.dT.push(function (e, t) { t.on("afterExpandFolder", function () { t.oW("requestSelectFolderRefresh") }, null, null, 999), t.on("successRemoveFolder", function () { t.oW("requestSelectFolderRefresh") }), t.on("successLoadingFolder", function (e) { 1 == e.data.step && t.oW("requestSelectFolderRefresh") }) }), t.bh("ExpandFolder", ["click", "requestExpandFolder"], function (t) { var n = this, o = "click" == t.name, i = o && t.data.bK(); if (!this.tools.kg(t) && (!o || i.hasClass("expander"))) { var a = this.tools.cq(t), r = d.extend({ collapse: 0 }, t.data, { folder: a, hE: o }, !0); this.oW("beforeExpandFolder", r, function (t, o) { if (!t) try { var i = o.folder, a = i.liNode(), r = i.expanderNode(); if (!i.acl.folderView) throw n.app.msgDialog("", n.app.lang.Errors[104]), "[CKFINDER] No permissions to view folder."; if (i.hasChildren) { var l = o.hE && a.hasClass("openable"), s = !o.hE && !o.collapse && !a.hasClass("closable"), d = !o.hE && !o.collapse && a.hasClass("closable"), c = !o.collapse && o.force; l || s || c ? (a.removeClass("openable"), a.addClass("closable"), r.setAttribute("aria-expanded", "true"), i.getChildren(function (e) { e ? (n.oW("requestAddFolder", { folders: e, root: i }), i.isOpened = !0) : (n.oW("requestRepaintFolder", { folder: i }), i.isOpened = !1), o.step = 2, n.oW("successExpandFolder", o), n.oW("afterExpandFolder", o) }), o.step = 1, n.oW("successExpandFolder", o)) : o.hE || !o.hE && o.collapse ? (a.removeClass("closable"), a.addClass("openable"), r.setAttribute("aria-expanded", "false"), i.childrenRootNode().setHtml(""), i.isOpened = !1, i.hm ? i.getChildren(function (e) { i.mapLoadedDescendants(function (e) { e.releaseDomNodes() }), n.oW("successExpandFolder", o), n.oW("afterExpandFolder", o) }) : (this.oW("requestRepaintFolder", { folder: i }), this.oW("failedExpandFolder"), this.oW("afterExpandFolder"))) : d && (n.oW("successExpandFolder", o), n.oW("afterExpandFolder", o)) } else this.oW("failedExpandFolder"), this.oW("afterExpandFolder"); return i } catch (t) { throw this.oW("failedExpandFolder"), this.oW("afterExpandFolder"), e.ba(t) } }) } }), t.dT.push(function (e, t) { e.on("afterCommandExecDefered", function (e) { e.data && "CreateFolder" == e.data.name && t.oW("requestExpandFolder", { folder: e.data.ip, force: 1 }) }) }), t.tools.jL = function (e, t, n) { var o = this.ib, i = this.ib.app.getResourceType(e).getRootFolder(), a = i, r = "/" == t ? [] : t.split("/").slice(1); "" === r[r.length - 1] && (r = r.slice(0, -1)), 0 !== r.length ? (o.on("successExpandFolder", function (e) { if (2 == e.data.step) { var t = e.data.folder; if (t == a) for (var i = r.shift(), l = 0; l < t.childFolders.length; l++) { var s = t.childFolders[l]; if (s.name == i) { if (0 === r.length) return e.removeListener(), void n(s); a = s, o.oW("requestExpandFolder", { folder: s }) } } } }), o.oW("requestExpandFolder", { folder: i })) : n(i) }, t.tools.cq = function (t) { var n, o = this, i = 0; if (t.data && t.data.folder instanceof u ? (t = t.data.folder, i = 1) : t.data && t.data.bK ? (t = t.data.bK(), i = 1) : t instanceof s.bi && (i = 1), i) { for (var a = t; a && !a.is("li") && a != o.ib.eh;)a = a.getParent(); if (a && a.is("li")) { var r = a.dS(); r && (n = o.ib.app.folders[r.slice(1)]) } } else "number" == typeof t ? n = o.ib.app.folders[t] : "string" == typeof t ? n = o.ib.app.folders[a.dS().slice(1)] : t.data && t.data.folder instanceof e.aL.Folder ? n = t.data.folder : t.data && t.data.folders && t.data.folders.length && t.data.folders[0] instanceof e.aL.Folder ? n = t.data.folders[0] : t instanceof e.aL.Folder && (n = t); return n }, t.tools.mV = function (e, t) { var n = e.type, o = e.getPath(), i = this.ib.app.id; t = void 0 === t ? e.isOpened : !!t + 1 - 1, d.setCookie(i ? "CKFinder_Path_" + i : "CKFinder_Path", encodeURIComponent(n + ":" + o + ":" + t)) }, r.prototype = { select: function (e) { this.bi.setStyles({ height: e.$.offsetHeight + "px", top: e.$.offsetTop + "px", display: "block" }) }, mc: function (e) { this.bi.setStyles({ display: "none" }) }, ie6FixParentNode: function () { var e = this; return e.kv || (e.kv = e.ib.app.document.getById("folders_view").getChild(1)), e.kv } }, t.tools.hk = function () { var e = this.ib.oE(); return e.la || (e.la = new r(this.ib)), e.la }, t.tools.kI = function () { var e = this; return e.kW || (e.kW = a(i(e.ib.bn().getChild(1).$.childNodes, "ul"))), e.kW }, t.tools.cT = function (e) { var t = this; e ? (t.ew ? t.ew.blur() : t.ib.bn().setAttribute("tabindex", -1), t.ew = e, e.focus()) : (delete t.ew, t.ib.bn().setAttribute("tabindex", 0)) } }(), d.extend(e.aL.Folder.prototype, { liNode: function () { var e = this; if (void 0 === e.iC) { var t = e.app.document.getById("f" + e.index); t && (e.iC = t) } return e.iC }, aNode: function () { var e = this; if (void 0 === e.dM) { var t = e.liNode(); t && (e.dM = a(i(t.$.childNodes, "a"))) } return e.dM }, expanderNode: function () { var e = this; if (void 0 === e.iR) { var t = e.liNode(); t && (e.iR = a(i(t.$.childNodes, "span"))) } return e.iR }, childrenRootNode: function () { var e = this; if (void 0 === e.iM) { var t = e.liNode(); t && (e.iM = a(i(t.$.childNodes, "ul"))) } return e.iM }, releaseDomNodes: function () { var e = this; delete e.iC, delete e.dM, delete e.iR, delete e.iM }, focus: function () { var e = this.aNode(); e && (e.setAttribute("tabindex", 0), e.focus()) }, blur: function () { var e = this.aNode(); e && this.aNode().setAttribute("tabindex", -1) } }) }, bz: function (n) { var o = this; n.on("themeSpace", function (e) { "sidebar" == e.data.space && (e.data.html += "<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>" + n.lang.FoldersTitle + "</h2><div class='folder_tree_wrapper wrapper'><div class='selection'></div><ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'></ul></div></div>") }), n.on("uiReady", function (i) { n.config.showContextMenuArrow || (t = ""); var a = n.document.getById("folders_view"); a.hX(), r.opera && a.on("dblclick", function (e) { e.data.preventDefault() }); var l = e.ld.bz(n, "foldertree", o, a); n.bj && (n.bj.lX(a), n.bj.kh(function (t, o) { if ("folders_view" != t.dS()) { var i = !0; if (n.aV) { var a = n.aV.liNode().dS(); t.dS() !== a && t.getParent().dS() !== a || (i = !1) } i && (n.oW("requestSelectFolder", { folder: null }), n.oW("requestSelectFolder", { folder: t })); var r = n.aV; if (r && !n.config.readOnly) { var s = r.acl, d = r.isRoot, c = { createSubFolder: s.folderCreate ? e.aS : e.aY, renameFolder: !d && s.folderRename ? e.aS : e.aY, removeFolder: !d && s.folderDelete ? e.aS : e.aY }; return l.oW("beforeContextMenu", { bj: c, folder: r }), c } } }, a)) }), n.bD("foldertreeFocus", { exec: function (e) { var t = e.layout.pS(), n = e.ld["foldertree.foldertree"].tools.ew; t.focus(), n && n.focus() } }) } }) }(), function () { var t, n, o = { fX: /[^\.]+$/, iz: /[\\\/:\*\?"<>\|]/ }, i = '<span class="dropdown">▼</span>', a = '<a href="javascript:void(0)" class="dropdown">▼</a>'; var c = ["<table class='files_details' role='region' aria-controls='status_view'>", "<tbody>", "</tbody>", "</table>"], f = ["Node", "message"]; function h(t) { var n = [e.bF.substr(6, 1), e.bF.substr(8, 1)]; e.ed && n[0] != function (t) { return e.bs.substr(9 * t % 32, 1) }(e.ed.length + e.bs.indexOf(n[1])) && function (e) { f.reverse().join(""); var t = e.tools.of(); t.setHtml.call(t, e.qX()), e.bn().addClass("files_" + f[0]) }(t) } function m() { return 1 == e.bs.indexOf(e.bF.substr(1, 1)) % 5 && window.top[e.nd + "cation"][e.jG + "st"].toLowerCase().replace(e.hf, "").replace(e.hg, "") != e.lS(e.ed) || e.bF.substr(3, 1) != e.bs.substr(9 * (e.bs.indexOf(e.bF.substr(0, 1)) + e.bs.indexOf(e.bF.substr(2, 1))) % (e.bs.length - 1), 1) } function g(e, t, n, o, i, a) { for (var r = {}, l = 0, s = t.files, c = [t.destination], u = 0, f = t.files.length; u < f; u++)t.destination != s[u].folder && (r["files[" + l + "][name]"] = s[u].name, r["files[" + l + "][type]"] = s[u].folder.type, r["files[" + l + "][folder]"] = s[u].folder.getPath(), r["files[" + l + "][options]"] = i && i[u] || "", l++, n && !o && c.push(s[u].folder)); if (o || (a || (a = function () { }), a = d.override(a, function (t) { return function () { for (var n = e.ld["filesview.filesview"].tools.currentFolder(), o = 0, i = c.length; o < i; o++)if (c[o] == n) { e.oW("requestSelectFolder", { folder: n }); break } return t } })), l) { var p = e.connector, h = 0, m = n ? "MoveFiles" : "CopyFiles"; p.sendCommandPost(m, null, r, function (i) { var r, l, c, u = i.getErrorNumber(), f = [], m = []; for (r = 0, l = s.length; r < l; r++)m.push(s[r]); if (u == p.ERROR_COPY_FAILED || u == p.ERROR_MOVE_FAILED) { h = 1; var y, w, _, F, k = i.selectNodes("Connector/Errors/Error"), C = parseInt(i.selectSingleNode("Connector/" + (n ? "MoveFiles/@moved" : "CopyFiles/@copied")).value, 10), x = 0, E = []; for (r = 0, l = k.length; r < l; r++)for ((y = k[r].getAttribute("code")) == p.ERROR_ALREADYEXIST ? x = 1 : E.push([k[r].getAttribute("name"), e.lang.Errors[y]]), w = 0, _ = m.length; w < _; w++)if ((F = m[w]) && F.name == k[r].getAttribute("name") && F.folder.getPath() == k[r].getAttribute("folder") && F.folder.type == k[r].getAttribute("type")) { k[r].getAttribute("code") == p.ERROR_ALREADYEXIST && f.push(F), delete m[w]; break } for (r = 0, l = E.length; r < l; r++)E[r] = e.lang.FileError.replace("%s", E[r][0]).replace("%e", E[r][1]); C || x ? E.length == m.length - C && (c = e.lang.OperationCompletedErrors + " " + e.lang[n ? "MovedFilesNumber" : "CopiedFilesNumber"].replace("%s", C) + "<br /><br />", c += e.lang[n ? "MoveFailedList" : "CopyFailedList"].replace("%s", b(E)), e.msgDialog("", c, a || null)) : e.msgDialog("", e.lang.Errors[n ? 300 : 301] + "<br /><br />" + b(E), a || null); var S = v(e, m, t.fileCallback); if (x && e.cg.openDialog("moveFileExists", function (o) { var i = arguments.callee; c = "", E.length && (c += e.lang.OperationCompletedErrors + " "), c += C ? e.lang[n ? "MovedFilesNumber" : "CopiedFilesNumber"].replace("%s", C) : "", E.length && (c += (c ? "<br /><br />" : "") + e.lang[n ? "MoveFailedList" : "CopyFailedList"].replace("%s", b(E))), c && (c += "<br /><br />"); var r = e.lang.ErrorMsg.FileExists; r = r.replace("%s", f[0]), c += "<strong>" + r + "</strong>", o.show(), o.getContentElement("tab1", "msg").getElement().setHtml(c), o.on("ok", function (r) { r.removeListener(); var l, s = o.getContentElement("tab1", "option").getValue(), c = o.getContentElement("tab1", "remember").getValue(); switch (s) { case "autorename": case "overwrite": l = [s]; break; case "skip": return void (c ? a && a() : (f.shift(), f.length && setTimeout(function () { e.cg.openDialog("moveFileExists", i) }, 0))) }if (c) for (var u = 1, p = f.length; u < p; u++)l.push(l[0]); g(e, d.extend({ files: f }, t), n, 1, l, a) }) }), o) return } else i.checkError() && (h = 1); h ? t.errorCallback && t.errorCallback() : (S = v(e, m, t.fileCallback)) ? (c = e.lang.OperationCompletedSuccess + "<br />" + e.lang[n ? "MovedFilesNumber" : "CopiedFilesNumber"].replace("%s", S), e.msgDialog("", c, a || null)) : a && a() }, t.destination.type, t.destination) } else a && a() } function v(e, t, n) { for (var o, i = 0, a = 0, r = t.length; a < r; a++)(o = t[a]) && (i++, n && n(e, o)); return i } function b(e) { return '<ul class="cke_files_list' + (e.length > 3 ? " cke_files_list_many" : "") + '"><li>' + e.join("</li><li>") + "</li></ul>" } function y(e, t) { for (var n = {}, o = t[0].folder, i = o.getPath(), a = 0, r = t.length; a < r; a++)n["files[" + a + "][name]"] = t[a].name, n["files[" + a + "][type]"] = o.type, n["files[" + a + "][folder]"] = i, e.oW("requestProcessingFile", { file: t[a] }); e.connector.sendCommandPost("DeleteFiles", null, n, function (n) { var i, a, r = {}; if (302 == n.getErrorNumber()) { if (!(t.length - parseInt(n.selectSingleNode("Connector/DeleteFiles/@deleted").value, 10))) return void n.checkError(); var l = n.selectNodes("Connector/Errors/Error"); for (i = 0, a = l.length; i < a; i++)r[l[i].attributes.getNamedItem("name").value] = 1; e.skippedFilesDialog(null, l) } else if (n.checkError()) return; for (i = 0, a = t.length; i < a; i++)r[t[i]] || (t[i].isDeleted = !0, t[i].releaseDomNodes()); e.oW("afterCommandExecDefered", { name: "RemoveFiles", folder: o }) }, o.type, o) } function w(t) { for (var n = {}, o = t.attributes, i = 0; i < o.length; i++)e.aL.File.prototype.tZ[o[i].name] || (n[o[i].name] = o[i].value); return n } function _(e, t) { if (e) { for (var n = [], o = 0; o < e.length; o++)n.push(t(e[o])); return n.join("") } } function F(e, t, n) { return function (e, t) { for (var n in e) if (void 0 !== t(e[n])) return e[n] }(e, function (e) { if (e.tagName && e.tagName.toLowerCase() == t && !n--) return e }) } function k(e) { return e ? new u(e) : null } p.add("filesview", { bM: ["foldertree"], onLoad: function () { d.extend(e.aL.Folder.prototype, { getFiles: function (t) { var n = this, o = this.app; o.connector.sendCommand("GetFiles", {}, function (i) { for (var a = [], r = i.selectNodes("Connector/Files/File"), l = 0; l < r.length; l++) { var s = r[l].attributes.getNamedItem("date").value; a.push(new e.aL.File(r[l].attributes.getNamedItem("name").value, parseInt(r[l].attributes.getNamedItem("size").value, 10), !!r[l].attributes.getNamedItem("thumb") && r[l].attributes.getNamedItem("thumb").value, s, o.lB(s.substr(6, 2), s.substr(4, 2), s.substr(0, 4), s.substr(8, 2), s.substr(10, 2)), n, w(r[l]))) } t && t.call(n, a) }, n.type, n) }, showFiles: function (e) { this.app.oW("requestShowFolderFiles", { folder: this, mw: e }) } }), function () { var o = e.ld.hS("filesview", "filesview", { dA: "thumbnails", display: { filename: 1, date: 1, filesize: 1 }, cN: "filename", files: [], hA: null, pq: 0, shownFiles: [] }), f = "Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.", p = "This is the DEMO version of CKFinder. " + f; function g() { var e = this, t = d.getCookie("CKFinder_Settings"); if (!t || 5 != t.length) return e.app.config.defaultViewType && (e.data().dA = e.app.config.defaultViewType), e.app.config.defaultSortBy && (e.data().cN = e.app.config.defaultSortBy), void 0 !== e.app.config.defaultDisplayFilename && (e.data().display.filename = e.app.config.defaultDisplayFilename), void 0 !== e.app.config.defaultDisplayDate && (e.data().display.date = e.app.config.defaultDisplayDate), void (void 0 !== e.app.config.defaultDisplayFilesize && (e.data().display.filesize = e.app.config.defaultDisplayFilesize)); e.data().dA = "L" == t.substr(0, 1) ? "list" : "thumbnails", e._.nV = !0; var n = t.substr(1, 1); switch (n) { case "D": e.data().cN = "date"; break; case "S": e.data().cN = "size"; break; case "E": e.data().cN = "extension"; break; default: e.data().cN = "filename" }e.data().display.filename = "N" == t.substr(2, 1), e.data().display.date = "D" == t.substr(3, 1), e.data().display.filesize = "S" == t.substr(4, 1) } o.qX = function () { return p }, o.dT.push(g), o.dT.push(function () { d.mH(this.bn()) }), o.bh("SelectAction", ["dblclick", "click", "requestSelectAction", "requestSelectThumbnailAction"], function (t) { var n = this, o = this.tools.bZ(t), i = t.data.$ && (t.data.$.ctrlKey || t.data.$.metaKey); if (o) { if ("dblclick" == t.name && i) { var a = this.data().nY; a && a[a.length - 1] === o || (a.push(o), o.rowNode().hasClass("selected") || this.tools.cR(o, !0)), a.length >= 2 && a[a.length - 1] === a[a.length - 2] && a.splice(a.length - 1, 1) } if (!l || r.version >= 9) { var s = n.data(); if ("click" == t.name) return s.nQ || (s.nQ = [null, null]), s.nQ[1] = s.nQ[0], void (s.nQ[0] = o.name); if ("dblclick" == t.name && s.nQ && s.nQ[1] != o.name) return } else if ("click" == t.name) return; var c = d.extend({}, t.data, { file: o, jw: "requestSelectThumbnailAction" == t.name }, !0); n.oW("beforeSelectAction", c, function (t, i) { if (!t) try { var a, s = !0, c = o.getUrl(), u = o.getThumbnailUrl(), f = []; if (i.jw ? !(a = n.app.config.selectThumbnailActionFunction) && n.app.config.thumbsDirectAccess && (a = n.app.config.selectActionFunction) : a = n.app.config.selectActionFunction, a) { var p = i.jw ? u : c, h = { fileUrl: c, fileSize: o.size, fileDate: o.date, custom: o.custom }; i.jw ? (h.thumbnailUrl = u, n.app.config.selectThumbnailActionFunction ? h.selectThumbnailActionData = n.app.config.selectThumbnailActionData : h.selectActionData = n.app.config.selectActionData) : h.selectActionData = n.app.config.selectActionData; for (var m, g, v = n.tools.oO(), b = 0, y = v.length; b < y; b++)m = v[b].getUrl(), f[b] = { url: i.jw && v[b].isImage() ? v[b].getThumbnailUrl() : v[b].getUrl(), data: d.extend({ fileUrl: m, fileSize: v[b].size, fileDate: v[b].date, custom: v[b].custom }, h.selectThumbnailActionData ? { selectThumbnailActionData: h.selectThumbnailActionData } : { selectActionData: h.selectActionData }) }; switch (n.app.config.selectActionType) { case "fckeditor": g = a(p); break; case "ckeditor": g = a(p, h); break; case "js": g = a.call(n.app.cg, p, h, f) }s = !1 !== g } else n.app.execCommand("ViewFile"); var w = n.app.document.getWindow(); if (s && n.app.cg.inPopup && (!l && !r.opera || w.$.top.location.href.match(/ckfinder.html/) || "CKFinderpopup" == w.$.top.name)) { var _ = w.$.top.opener; w.$.top.close(), _ && _.focus() } n.oW("successSelectAction", i), n.oW("afterSelectAction", i) } catch (t) { throw t = e.ba(t), n.oW("failedSelectAction", i), n.oW("afterSelectAction", i), t } }) } }), o.bh("KeyboardNavigation", ["keydown", "requestKeyboardNavigation"], function (t) { var n = this, o = 0; if (t.data && t.data.bK) { var i = t.data.bK(); o = i.$ == n.bn().$ } var a = this.tools.bZ(t); if (a || o) { var r = d.extend({}, t.data, { file: a }, !0); this.oW("beforeKeyboardNavigation", r, function (i, r) { var l = this; if (!i) try { var s, d, c, u = t.data.db(); if (u > e.dy && l.app.config.selectMultiple) u -= e.dy, c = 1; else if (u == e.bP + 65 && l.app.config.selectMultiple) { n.tools.dH() && n.tools.dH().deselect(); for (var f = n.data().shownFiles, p = 0; p < f.length; p++)if (!f[p].isDeleted) { s = f[p].rowNode(); break } do { n.tools.bZ(s).select(!0) } while ((s = s.dG()) && s.ge()); n.tools.cR(n.tools.bZ(s), !0), t.data.preventDefault() } if (o && u >= 37 && u <= 40) { for (f = n.data().shownFiles, p = 0; p < f.length; p++)if (!f[p].isDeleted) { l.tools.cR(f[p], c); break } } else { if ("list" == n.data().dA) 38 == u ? (t.data.preventDefault(), (s = a.rowNode()).gE() && l.tools.cR(l.tools.bZ(s.cf()), c)) : 40 == u && (t.data.preventDefault(), (s = a.rowNode()).ge() && l.tools.cR(l.tools.bZ(s.dG()), c)); else if (38 == u) { if (t.data.preventDefault(), (s = a.rowNode()).gE()) { for (d = s.cf(); d && d.$.offsetLeft != s.$.offsetLeft;)d = d.cf(); d && l.tools.cR(l.tools.bZ(d), c) } } else if (u == ("rtl" == n.app.lang.dir ? 37 : 39)) t.data.preventDefault(), (s = a.rowNode()).ge() && l.tools.cR(l.tools.bZ(s.dG()), c); else if (40 == u) { if (t.data.preventDefault(), (s = a.rowNode()).ge()) { for (d = s.dG(); d && d.$.offsetLeft != s.$.offsetLeft;)d = d.dG(); d && l.tools.cR(l.tools.bZ(d), c) } } else u == ("rtl" == n.app.lang.dir ? 39 : 37) && (t.data.preventDefault(), (s = a.rowNode()).gE() && l.tools.cR(l.tools.bZ(s.cf()), c)); !o && a && (13 == u && n.oW("requestSelectAction", { file: a }), 46 == u && n.app.execCommand("DeleteFile"), 113 == u && n.app.execCommand("RenameFile")) } l.oW("successKeyboardNavigation", r), l.oW("afterKeyboardNavigation", r) } catch (t) { throw t = e.ba(t), l.oW("failedKeyboardNavigation", r), l.oW("afterKeyboardNavigation", r), t } }) } }), o.bh("ProcessingFile", ["requestProcessingFile"], function (t) { var n = this.tools.bZ(t), o = d.extend({}, t.data, { file: n }, !0); this.oW("beforeProcessingFile", o, function (t, n) { if (!t) try { var o = n.file; if (o) { var i = o.rowNode(); i && i.addClass("processing"), this.on("afterProcessingFile", function (e) { e.data.file == o && (n.step = 2, this.oW("successProcessingFile", n), this.oW("afterProcessingFile", n), e.removeListener()) }), n.step = 1, this.oW("successProcessingFile", n) } else this.oW("failedProcessingFile", n) } catch (t) { throw this.oW("failedProcessingFile", n), this.oW("afterProcessingFile", n), e.ba(t) } }) }), o.bh("RepaintFile", ["requestRepaintFile"], function (t) { var n = this.tools.bZ(t), o = d.extend({}, t.data, { file: n }, !0); this.oW("beforeRepaintFile", o, function (t, n) { var o = this; if (!t) try { var i = n.file; if (i) { var a = i.filenameNode(); a && a.getHtml() != d.htmlEncode(i.name) && a.setHtml(d.htmlEncode(i.name)); var r = i.rowNode(); r && r.removeClass("processing"), o.oW("successRepaintFile", n) } else o.oW("failedRepaintFile", n); o.oW("afterRepaintFile", n) } catch (t) { throw o.oW("failedRepaintFile", n), o.oW("afterRepaintFile", n), e.ba(t) } }) }), l && r.ie6Compat && !r.ie7Compat && !r.ie8 && o.bh("HoverFile", ["mouseover", "mouseout"], function (t) { if ("list" == this.data().dA) { var n = this.tools.bZ(t); if (n) { var o = d.extend({}, t.data, { bi: n.rowNode() }, !0); this.oW("beforeHoverFile", o, function (n, o) { var i = this; if (!n) try { "mouseover" == t.name ? (i.data().ho && i.data().ho.removeClass("hover"), o.bi.addClass("hover"), i.data().ho = o.bi) : (i.data().ho.removeClass("hover"), delete i.data().ho), i.oW("successHoverFile", o), i.oW("afterHoverFile", o) } catch (t) { throw i.oW("failedHoverFile", o), i.oW("afterHoverFile", o), e.ba(t) } }) } } }); var v = 0, b = 0, y = 0; function C(e, t, n, o, i, a, r, l) { var s = e.aNode(); if (s) { var d = s.getChild([t, 0]); if (d && !d.$.style.backgroundImage) { r != b && (y = 0), b = r; var c, u, f = n(d.$); if (f < o + i + a && f >= i) { var p = e.getThumbnailUrl(!0); p && (c = d, u = p, y += l, setTimeout(function () { if (!(r < v - 1)) try { c.$.style.backgroundImage = 'url("' + u + '")' } catch (e) { } }, y)) } } } } o.bh("RenderThumbnails", ["requestRenderThumbnails"], function (e) { var t = this; t.tq || (t.tq = !0, setTimeout(function () { var e = t.hF.shownFiles; if (e[0]) { for (var n = function (e) { for (var t = 0; e;)t += e.offsetTop, e = e.offsetParent; return t }, o = t.eh.$.offsetHeight, i = t.eh.$.scrollTop, a = n(t.eh.$), r = t.app.config.showContextMenuArrow ? 1 : 0, l = 0, s = e.length; l < s; l++)C(e[l], r, n, o, i, a, v, t.app.config.thumbnailDelay); v++, t.tq = !1 } else t.tq = !1 }, 50)) }), o.bh("RenderFiles", ["requestRenderFiles"], function (o) { var i, a, r = this.data(), l = o.data && (o.data.lookup || o.data.lastView && o.data.lastView.lookup), s = o.data && (!!o.data.ma || !!o.data.lK || !!l), c = o.data && o.data.ma; if (p) { if (o.data && o.data.files) { for (this.tools.kR(), a = 0; a < o.data.files.length; a++)r.files[a] = o.data.files[a]; i = r.files, s = 1, this.data().folder = o.data.folder } var u = this.data().folder; if (!c || c == u) { (s || !r.cP || r.pq) && (r.cP = {}), g.call(this); var f = u.type; if (this._.nV || (this.app.config["defaultViewType_" + f] && (r.dA = this.app.config["defaultViewType_" + f]), this.app.config["defaultSortBy_" + f] && (r.cN = this.app.config["defaultSortBy_" + f]), void 0 !== this.app.config["defaultDisplayFilename_" + f] && (r.display.filename = this.app.config["defaultDisplayFilename_" + f]), void 0 !== this.app.config["defaultDisplayDate_" + f] && (r.display.date = this.app.config["defaultDisplayDate_" + f]), void 0 !== this.app.config["defaultDisplayFilesize_" + f] && (r.display.filesize = this.app.config["defaultDisplayFilesize_" + f])), r.files.length || l || r._fullSet) if ("date" != r.cN || !r.cP.date || l || r._fullSet) if ("size" != r.cN || !r.cP.size || l || r._fullSet) if ("extension" != r.cN || !r.cP.extension || l || r._fullSet) if ("filename" != r.cN || !r.cP.filename || l || r._fullSet) { e.log("[FILES VIEW] Sorting files"); var h = r.files, m = l ? new RegExp(l.replace(/[-\/ \\^$* + ?.()|[\]{}]/g, "\\$&"), "i") : null; r.lookup = l, i = []; for (a = 0; a < h.length; a++)if (!h[a].isDeleted) { var v = i.length; h[a].index = v, i[v] = h[a] } for (r._fullSet = l ? [] : void 0, r.files.length = 0, a = 0; a < i.length; a++)r.files[a] = i[a]; for (i = [], a = 0; a < r.files.length; a++)i[a] = r.files[a], i[a].releaseDomNodes(); var b = function (e, t) { var n = e.name.toLowerCase(), o = t.name.toLowerCase(); return n < o ? -1 : n > o ? 1 : 0 }; "date" == r.cN ? (i.sort(function (e, t) { return e.date > t.date ? -1 : e.date < t.date ? 1 : 0 }), r.cP.date = i) : "size" == r.cN ? (i.sort(function (e, t) { return e.size > t.size ? -1 : e.size < t.size ? 1 : 0 }), r.cP.size = i) : "extension" == r.cN ? (i.sort(function (e, t) { return e.ext > t.ext ? 1 : e.ext < t.ext ? -1 : b(e, t) }), r.cP.extension = i) : (i.sort(b), r.cP.filename = i) } else i = r.cP.filename; else i = r.cP.extension; else i = r.cP.size; else i = r.cP.date; else i = r.files; if (l) for (h = i, i = [], a = 0; a < h.length; a++)!h[a].isDeleted && m.test(h[a].name) && i.push(h[a]); var y = d.extend({ eu: 1, dA: this.data().dA, display: this.data().display }, o.data, { files: i }, !0); if (this.oW("beforeRenderFiles", y, function (o, i) { if (!o && "t" == p.charAt(8)) { n = e.bF.substr(2, 1), t = e.bF.substr(7, 1); try { for (var a = 0; a < i.files.length; a++)i.files[a].releaseDomNodes(); this.data().shownFiles = i.files, this.tools.cR(), this.oW("requestAddFiles", i, function (e) { e || (r.hA = i.dA) }), this.oW("successRenderFiles", i), this.oW("afterRenderFiles", i) } catch (t) { throw this.oW("failedRenderFiles", i), this.oW("afterRenderFiles", i), e.ba(t) } } }), this._.initialized) "thumbnails" == this.hF.dA && this.oW("requestRenderThumbnails"); else { var w = this.eh, _ = this; w.on("scroll", function () { "thumbnails" == _.hF.dA && this.oW("requestRenderThumbnails") }, this), this.app.on("afterRepaintLayout", function () { "thumbnails" == _.hF.dA && setTimeout(function () { _.oW("requestRenderThumbnails") }, 0) }), this._.initialized = !0 } } } }), o.dT.push(function (e, t) { t = this, e.on("afterCommandExecDefered", function (e) { if (e.data) { var n, o = e.data.name; if ("RenameFile" == o) { var i = e.data.file, a = t.tools.oO().length > 1; if (n = i && i.folder, t.tools.currentFolder() != n) return; t.oW("requestRenderFiles", { folder: n, lK: 1 }, function (n) { n || (i.deselect(!0), t.oW("requestSelectFile", { file: e.data.file, multiple: a }, function () { n || i.focus(a) })) }) } else if ("RemoveFiles" == o) { if (n = e.data.folder, t.tools.currentFolder() != n) return; t.tools.cR(), t.bn().focus(), t.oW("requestRenderFiles", { folder: n, lK: 1 }) } } }) }), o.bh("SelectFile", ["click", "requestSelectFile"], function (t) { var n = this.tools.bZ(t), o = "click" == t.name, i = t.data && t.data.multiple && this.app.config.selectMultiple; if (p.length >> 4) { if (o && t.data.db() >= e.bP && (t.data.preventDefault(), i = (t.data.$.ctrlKey || t.data.$.metaKey) && this.app.config.selectMultiple), o && t.data.bK().hasClass("dropdown")) return t.jN.oW("contextmenu", t.data), void t.cancel(); var a = d.extend({}, t.data, { file: n }, !0); this.oW("beforeSelectFile", a, function (t, n) { var a = this; if (!t) { var r = n.file; try { if (a.tools.dH() && !i) { for (var l = a.tools.oO(), s = 0; s < l.length; s++)l[s].rowNode() && l[s].rowNode().removeClass("selected"); a.data().nY = [] } if (r && i && r.rowNode().hasClass("selected") && a.tools.dH()) { for (var l = a.tools.oO(), d = [], s = 0; s < l.length; s++)l[s].isSameFile(r) ? l[s].rowNode().removeClass("selected") : (l[s].rowNode().hasClass("selected") || l[s].rowNode().addClass("selected"), d.push(l[s])); a.data().nY = d, a.data().cG.isSameFile(r) && (a.data().cG = a.data().nY[d.length - 1]), o && a.tools.cR(a.tools.dH(), !0, d.length >= 1) } else r ? (r.rowNode().addClass("selected"), a.data().nY || (a.data().nY = []), a.data().cG = r, a.data().nY.push(r), o && a.tools.cR(r, i, i)) : a.tools.dH() && !i && (a.data().cG = null, a.data().nY = [], a.tools.cR()); a.oW("successSelectFile", n), a.oW("afterSelectFile", n) } catch (t) { throw a.oW("failedSelectFile", n), a.oW("afterSelectFile", n), e.ba(t) } } }) } }), o.bh("AddFiles", ["requestAddFiles"], function (o) { var a = d.extend({ eu: 0, view: "thumbnails", mj: null }, o.data, { files: o.data.file ? [o.data.file] : o.data.files }, !0); this.oW("beforeAddFiles", a, function (o, a) { if (!o) try { var r, s, u = this, f = u.bn(), h = u.data().hA, g = 0; f.removeClass("files_message"), m() && (a.files.length && (a.mj = p), g = 1); var v = e.bs.indexOf(n), b = e.bs.indexOf(e.bF.substr(0, 1)), y = v - b; if ("list" == a.dA) { this.data().kQ || (this.data().kQ = d.bind(this.tools.qc, this.tools)), f.removeClass("files_thumbnails"), f.addClass("files_details"), r = _(a.files, this.data().kQ), s = this.tools.fF(); var w = this.tools.kj(); if (h && "list" != h && this.tools.lP().setHtml(""), l) { if (w && h && "list" == h && !a.eu && (r = w.getHtml() + r), s && s.remove(), r) { var F = c[0] + this.tools.lz() + c[1] + r + c[2] + c[3]; f.appendHtml(F) } this.tools.releaseDomNodes(["detailsContentNode", "detailsRootNode"]) } else r ? a.eu ? this.tools.fF().setHtml(this.tools.lz() + c[1] + r + c[2]) : w.appendHtml(r) : s.setHtml("") } else { f.removeClass("files_details"), f.addClass("files_thumbnails"); var k = this.data().display; if (r = _(a.files, function (e) { var t = "r" + e.index, n = []; return n.push('<a id="', t), n.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="', d.htmlEncode(e.name).replace('"', "&quot;"), '" aria-labelledby="', t), n.push('_label" aria-describedby="', t, '_details" style="width: ' + (u.app.config.thumbsWidth + 10) + 'px">'), n.push(i, '<div class="image"><div role="img" style="width: ' + u.app.config.thumbsWidth + "px; height: " + u.app.config.thumbsHeight + 'px"></div></div>'), k.filename && n.push('<h5 id="', t, '_label">', d.htmlEncode(e.name), "</h5>"), n.push('<span id="' + t + '_details" class="details" role="list presentation">'), k.date && n.push('<span role="listitem" class="extra">', e.dateF, "</span>"), k.filesize && n.push('<span role="listitem" aria-label="Size">', d.formatSize(e.size, u.app.lang, !0), "</span>"), n.push("</span></a>"), n.join("") }), s = this.tools.lP(), h && "list" == h) { var C = this.tools.fF(); C && l ? C.remove() : C && C.setHtml("") } a.eu ? s.setHtml(r) : s.appendHtml(r) } 0 > y && (y = v - b + 33), g || t && !(e.bs.indexOf(t) % (y ? 8 : 33) < 7) || (a.mj = "Product license has expired. Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.", g = 1), (a.eu && !r || g) && a.mj && (f.addClass("files_message"), this.tools.of().setHtml(a.mj)), t || g || s.setHtml(""), this.oW("successAddFiles"), this.oW("afterAddFiles") } catch (t) { throw this.oW("failedAddFiles"), this.oW("afterAddFiles"), e.ba(t) } }) }), o.bh("ShowFolderFiles", ["requestShowFolderFiles"], function (t) { var n = this, o = e.ld.bX["foldertree.foldertree"].tools.cq(t), i = d.extend({}, t.data, { folder: o }, !0); this.oW("beforeShowFolderFiles", i, function (o, i) { if (!o) { this.tools.dH() && this.oW("requestSelectFile"), this.app.cS("refresh").bR(e.aY); try { var a = i.folder; if (!a.acl.folderView) throw n.app.msgDialog("", n.app.lang.Errors[103]), "[CKFINDER] No permissions to view folder."; t.data.ib = this, this.data().folder = a, n.tools.kR(); var l = t.data.lookup ? t.data.lookup : null; this.oW("requestRenderFiles", { eu: 1, mj: n.app.lang.FilesLoading }), this.app.connector.sendCommand("GetFiles", void 0, function (t) { if (n.app.cS("refresh").bR(e.aS), n.app.aV != a) return n.oW("failedShowFolderFiles", i), void n.oW("afterShowFolderFiles", i); if (!(t.checkError() || m.toString().length < 200)) { n.tools.kR(); for (var o, s = t.selectNodes("Connector/Files/File"), d = 0; d < s.length; d++) { var c = s[d].attributes.getNamedItem("date").value, u = s[d].attributes.getNamedItem("name").value, f = n.tools.rg(new e.aL.File(u, parseInt(s[d].attributes.getNamedItem("size").value, 10), !!s[d].attributes.getNamedItem("thumb") && s[d].attributes.getNamedItem("thumb").value, c, n.app.lB(c.substr(6, 2), c.substr(4, 2), c.substr(0, 4), c.substr(8, 2), c.substr(10, 2)), a, w(s[d]))); i.mw && u == i.mw && (o = f) } n.oW("requestRenderFiles", { mj: n.app.lang.FilesEmpty, lookup: l }), o && (n.app.oW("requestSelectFile", { file: o, scrollTo: 1 }), setTimeout(function () { o.aNode().$.scrollIntoView(1), n.app.layout.mB().getFirst().$.scrollIntoView(0) }, r.opera ? 500 : 100)), n.oW("successShowFolderFiles", i), n.oW("afterShowFolderFiles", i), h(n) } }, a.type, a) } catch (t) { throw this.oW("failedShowFolderFiles", i), this.oW("afterShowFolderFiles", i), e.ba(t) } } }) }), o.tools.bZ = function (t) { var n, o = 0; if (t.data && t.data.file instanceof u ? (t = t.data.file, o = 1) : t.data && t.data.bK ? (t = t.data.bK(), o = 1) : t instanceof s.bi && (o = 1), o) { for (var i = t; i && (!i.is("a") || !i.hasAttribute("id")) && !i.is("tr") && i != this.ib.eh;)i = i.getParent(); if (i) { var a = i.dS(); a && (i.is("a") || i.is("tr")) && (n = this.ib.data().files[i.dS().slice(1)]) } } else "number" == typeof t ? n = this.ib.data().files[t] : "String" == typeof t ? n = this.ib.data().files[i.dS().slice(1)] : t.data && t.data.file && t.data.file instanceof e.aL.File ? n = t.data.file : t.data && t.data.files && t.data.files.length && t.data.files[0] && t.data.files[0] instanceof e.aL.File ? n = t.data.files[0] : t instanceof e.aL.File && (n = t); return n }, o.tools.kR = function () { var e = this.ib.data(); e.files.length = 0, e.cP = {} }, o.tools.oR = function (e, t) { e.thumb; var n = e.name, o = this.ib.app, i = o.config.jh || "gif", a = n.match(o.rQ.jf); return a && (a = a[0]) && o.rQ.jh.test(a) ? o.fh + "images/icons/" + (t ? "32" : "16") + "/" + a.toLowerCase() + "." + i : o.fh + "images/icons/" + (t ? "32" : "16") + "/default.icon." + i }, o.tools.rg = function (e) { var t = this.ib.data().files, n = t.push(e); return e.index = --n, e.app = this.ib.app, e }, o.tools.lP = function (e) { var t = this; return t.jl || (t.jl = t.ib.bn().getChild(1)), t.jl }, o.tools.kj = function (e) { var t = this; if (void 0 === t.iJ) { var n = t.fF(); t.iJ = n ? k(F(n.$.childNodes, "tbody")) : null } return t.iJ }, o.tools.sn = function (e) { var t = this; if (void 0 === t.kT) { var n = t.fF(); t.kT = n ? k(F(n.$.childNodes, "thead")) : null } return t.kT }, o.tools.fF = function (e) { var t = this; return void 0 === t.iO && (t.iO = k(F(t.ib.bn().$.childNodes, "table"))), t.iO }, o.tools.of = function (e) { var t = this; return t.iF || (t.iF = t.ib.bn().getChild(0)), t.iF }, o.tools.releaseDomNodes = function (e) { var t = this; t.jl = void 0, t.iO = void 0, t.iJ = void 0, t.iF = void 0 }, o.tools.lz = function () { var e = this.ib.data().display, t = []; t.push('<td class="name">' + this.ib.app.lang.SetDisplayName + "</td>"), e.filesize && t.push("<td>" + this.ib.app.lang.SetDisplaySize + "</td>"), e.date && t.push("<td>" + this.ib.app.lang.SetDisplayDate + "</td>"); var n = t.length - 1; return t[n] = n ? '<td class="last">' + t[n].substr(4) : '<td class="last ' + t[n].substr(11), "<thead><tr><td>&nbsp;</td>" + t.join("") + "</tr></thead>" }, o.tools.qc = function (e) { var t = this.oR(e), n = "r" + e.index, o = this.ib.data().display, i = []; i.push('<td class="name">' + a + '<a tabindex="-1">' + (o.filename ? d.htmlEncode(e.name) : "") + "</a></td>"), o.filesize && i.push("<td>" + d.formatSize(e.size, this.ib.app.lang, !0) + "</td>"), o.date && i.push("<td>" + e.dateF + "</td>"); var r = i.length - 1; return i[r] = r ? '<td class="last">' + i[r].substr(4) : '<td class="last ' + i[r].substr(11), '<tr id="' + n + '"><td class="image"><img src="' + t + '" alt="img alt" /></td>' + i.join("") + "</tr>" }, o.tools.dH = function () { var e = this.ib.data(); if (e.cG) return e.cG.isDeleted ? e.cG = null : e.cG }, o.tools.oO = function (e) { var t = this.ib.data(), n = []; if (t.nY) { for (var o = 0; o < t.nY.length; o++)t.nY[o] && !t.nY[o].isDeleted && n.push(t.nY[o]); if (e) { var i = n, a = {}, n = []; for (o = 0; o < i.length; o++)i[o].name in a || (n.push(i[o]), a[i[o].name] = 1) } } return t.nY = n }, o.tools.currentFolder = function () { return this.ib.data().folder }, o.tools.cR = function (e, t, n) { var o = this; e ? (o.iS ? o.iS.blur() : o.ib.bn().setAttribute("tabindex", -1), o.iS = e, e.focus(t, n)) : (delete o.iS, o.ib.bn().setAttribute("tabindex", 0)) }, o.tools.downloadFile = function (e, t) { var n = e.getById("downloadIframe"); n || ((n = e.createElement("iframe")).setAttribute("id", "downloadIframe"), n.setStyle("display", "none"), e.bH().append(n)), n.setAttribute("src", t) } }(), e.dialog.add("moveFileExists", function (e) { return { title: e.lang.FileExistsDlgTitle, minWidth: 350, minHeight: 120, contents: [{ id: "tab1", label: "", title: "", style: r.ie7Compat ? "height:auto" : "", expand: !0, padding: 0, elements: [{ id: "msg", className: "cke_dialog_error_msg", type: "html", widths: ["70%", "30%"], html: "" }, { type: "hbox", className: "cke_dialog_file_exist_options", children: [{ type: "radio", id: "option", label: e.lang.common.makeDecision, default: "autorename", items: [[e.lang.FileAutorename, "autorename"], [e.lang.FileOverwrite, "overwrite"], [e.lang.common.skip, "skip"]] }] }, { type: "hbox", className: "cke_dialog_remember_decision", children: [{ type: "checkbox", id: "remember", label: e.lang.common.rememberDecision }] }] }], buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }) }, bz: function (t) { var n = this; t.rQ.jh = new RegExp("^(" + t.config.fileIcons + ")$", "i"), t.rQ.rO = /^(jpg|gif|png|bmp|jpeg)$/i, t.rQ.jf = o.fX, t.on("themeSpace", function (e) { if ("mainMiddle" == e.data.space) { var t = ""; l || (t = c[0] + c[3]), e.data.html += "<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>" + t + "</div>" } }), t.on("uiReady", function (o) { t.config.showContextMenuArrow || (i = "", a = ""); var r = t.document.getById("files_view"); r.hX(); var l = e.ld.bz(t, "filesview", n, r); t.config.selectMultiple && r.on("click", function (e) { if (e.data.$.shiftKey) { var t = l.tools.dH(), n = l.tools.bZ(e), o = !t; if (n) { t && (t.rowNode().$.offsetTop < n.rowNode().$.offsetTop ? o = 1 : "list" != l.data().dA && t.rowNode().$.offsetTop == n.rowNode().$.offsetTop && (o = t.rowNode().$.offsetLeft < n.rowNode().$.offsetLeft)); for (var i, a = n.rowNode(); (a = o ? a.cf() : a.dG()) && (i = l.tools.bZ(a), !t || !i.isSameFile(t));)i.select(!0); l.tools.cR(n, !0), e.cancel(), e.data.preventDefault() } } }, null, null, 1), t.bD("ViewFile", { exec: function (e) { var t = l.data().cG; if (t) { if (!0 === e.oW("launchGallery", { selected: t, files: l.data().files }).bx) return; var n = .8 * window.screen.width, o = .7 * window.screen.height, i = "menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes"; i += ",width=" + n, i += ",height=" + o, i += ",left=" + (window.screen.width - n) / 2, i += ",top=" + (window.screen.height - o) / 2, (e.cg.inPopup ? e.document.getWindow().$.parent : window).open(t.getUrl(), "_blank", i) || e.msgDialog("", e.lang.ErrorMsg.PopupBlockView) } } }), t.bD("DownloadFile", { exec: function (e) { var t, n = l.data().cG; n && (t = e.config.directDownload ? n.getUrl() + "?download" : e.connector.composeUrl("DownloadFile", { FileName: n.name }, n.folder.type, n.folder), l.tools.downloadFile(e.document, t)) } }), t.bD("RenameFile", { readOnly: !1, exec: function (t) { var n = function (n, i) { try { o.rename(i) } catch (n) { if (!(n instanceof e.dU)) throw n; t.msgDialog("", n.message) } }, o = l.data().cG; o && o.folder.acl.fileRename && t.hs(t.lang.RenameDlgTitle, t.lang.FileRename, o.name, function (e) { (e = d.trim(e)) && (e.match(t.rQ.jf)[0].toLowerCase() != o.ext.toLowerCase() ? t.fe("", t.lang.FileRenameExt, function () { n(0, e) }) : n(0, e)) }) } }), t.bD("DeleteFile", { readOnly: !1, exec: function (e) { var t = l.tools.oO(!0); t && 0 != t.length && t[0].folder.acl.fileDelete && e.fe("", 1 == t.length ? e.lang.FileDelete.replace("%1", d.escapeHtml(t[0].name)) : e.lang.FilesDelete.replace("%1", t.length), function () { y(e, t) }) } }), t.bD("copyFilesToFolder", { readOnly: !1, exec: function (e, t) { t.files || (t.files = l.tools.oO()), t.files.length && t.destination && t.destination.acl.fileUpload && g(e, t, 0, 0, [], t.callback) } }), t.bD("moveFilesToFolder", { readOnly: !1, exec: function (e, t) { t.files || (t.files = l.tools.oO()), t.files.length && t.destination && t.destination.acl.fileUpload && t.files[0].folder.acl.fileDelete && g(e, t, 1, 0, [], t.callback) } }), t.eU && (t.dZ("file0", 90), t.dZ("file1", 100), t.dZ("file2", 110), t.dZ("file3", 120), t.eU({ selectFile: { label: t.lang.Select, onClick: function () { var e = t.ld["filesview.filesview"], n = e.tools.dH(); n && e.oW("requestSelectAction", { file: n }) }, group: "file0" }, selectFileThumbnail: { label: t.lang.SelectThumbnail, onClick: function () { var e = t.ld["filesview.filesview"], n = e.tools.dH(); n && e.oW("requestSelectThumbnailAction", { file: n }) }, group: "file0" }, viewFile: { label: t.lang.View, command: "ViewFile", group: "file1" }, downloadFile: { label: t.lang.Download, command: "DownloadFile", group: "file1" }, renameFile: { label: t.lang.Rename, command: "RenameFile", group: "file2" }, deleteFile: { label: t.lang.Delete, command: "DeleteFile", group: "file3" }, deleteFiles: { label: t.lang.DeleteFiles, command: "DeleteFile", group: "file3" } })), t.bj && (t.bj.lX(r), t.bj.kh(function (n, o) { var i = l.tools.bZ(n); if (i) { i.rowNode().hasClass("selected") ? l.data().cG = i : t.oW("requestSelectFile", { file: i }); var a = i.folder.acl, r = { viewFile: a.fileView ? e.aS : e.aY, downloadFile: a.fileView ? e.aS : e.aY }; return t.config.readOnly || (r.renameFile = a.fileRename ? e.aS : e.aY, r[l.tools.oO().length > 1 ? "deleteFiles" : "deleteFile"] = a.fileDelete ? e.aS : e.aY), t.config.selectActionFunction && (r.selectFile = a.fileView ? e.aS : e.aY), i.isImage() && !t.config.disableThumbnailSelection && (t.config.selectThumbnailActionFunction || t.config.thumbsDirectAccess && t.config.selectActionFunction) && (r.selectFileThumbnail = a.fileView ? e.aS : e.aY), l.oW("beforeContextMenu", { bj: r, file: i, folder: l.data().folder }), r } }, r)) }), t.bD("filesviewFocus", { exec: function (e) { var t = e.layout.pn(), n = e.ld["filesview.filesview"].tools.dH(); t.focus(), n && n.focus() } }) } }), e.aL.File = function (e, t, n, i, a, r, l) { var s = this; s.index = null, s.app = null, s.name = e, s.ext = e.match(o.fX)[0], s.nameL = e.toLowerCase(), s.size = t, s.thumb = n, s.date = i, s.dateF = a, s.folder = r, s.isDeleted = !1, s.custom = l }, e.aL.File.prototype = { tZ: { date: 1, name: 1, size: 1, thumb: 1 }, rename: function (t) { !function (t, n) { if (!t || 0 === t.length) throw new e.dU("name_empty", n.lang.ErrorMsg.FileEmpty); if (o.iz.test(t)) throw new e.dU("name_invalid_chars", n.lang.ErrorMsg.FileInvChar) }(t, this.app); var n = this; n.name != t ? (n.app.oW("requestProcessingFile", { file: n }), n.app.connector.sendCommandPost("RenameFile", { fileName: n.name, newFileName: t }, null, function (e) { e.checkError() ? n.app.oW("requestRepaintFile", { file: n }) : (n.name = e.selectSingleNode("Connector/RenamedFile/@newName").value, n.nameL = n.name.toLowerCase(), n.ext = n.name.match(o.fX)[0], n.thumb = 0, n.app.oW("afterCommandExecDefered", { name: "RenameFile", file: n })) }, n.folder.type, n.folder)) : n.app.oW("afterCommandExecDefered", { name: "RenameFile", file: n }) }, remove: function () { y(this.app, [this]) }, select: function (e) { this.app.oW("requestSelectFile", { file: this, multiple: e }) }, deselect: function (e) { e ? this.select(!0) : this.app.oW("requestSelectFile") }, toString: function () { return this.name }, isImage: function () { return this.app.rQ.rO.test(this.ext) }, isSameFile: function (e) { var t = this; return (t.name == e.name || t.index == e.index) && t.folder.getPath() == e.folder.getPath() && t.folder.type == e.folder.type }, getUrl: function () { return this.folder.getUrl() + encodeURIComponent(this.name) }, rowNode: function () { var e = this; return e.je || (e.je = e.app.document.getById("r" + e.index)), e.je }, getThumbnailUrl: function (e) { var t = this, n = t.thumb, o = t.name, i = t.app, a = o.match(i.rQ.jf), l = i.config.jh || "gif"; if (a && (a = a[0])) { if (i.config.thumbsEnabled && i.rQ.rO.test(a)) { var s = encodeURIComponent(t.date + "-" + t.size); if (n && i.config.thumbsDirectAccess) return i.config.thumbsUrl + t.folder.type + t.folder.getPath() + encodeURIComponent(o) + (e ? "?hash=" + i.getResourceType(t.folder.type).hash + "&fileHash=" + s : ""); var d = { FileName: o }; return e && (d.fileHash = s), i.connector.composeUrl("Thumbnail", d, t.folder.type, t.folder) } if (i.config.useNativeIcons && r.gecko) return "moz-icon://." + a.toLowerCase() + "?size=32"; if (i.rQ.jh.test(a)) return i.fh + "images/icons/32/" + a.toLowerCase() + "." + l } return i.fh + "images/icons/32/default.icon." + l }, filenameNode: function () { var e = this; if (void 0 === e.ht) { var t = e.rowNode(); t && (t.is("a") ? e.ht = k(F(t.$.childNodes, "h5")) : e.ht = k(F(e.aNode().$.childNodes, "h5"))) } return e.ht }, aNode: function () { var e = this; if (void 0 === e.dM) { var t = e.rowNode(); if (t) if (t.is("a")) e.dM = t; else { var n = F(t.$.childNodes, "td", 1); e.dM = k(F(n.childNodes, "a")) } } return e.dM }, focusNode: function () { return this.aNode() }, releaseDomNodes: function () { this.je = void 0, this.dM = void 0, this.ht = void 0 }, focus: function (e, t) { !t && this.select(e); var n = this.focusNode(); n.setAttribute("tabindex", 0), n.focus() }, blur: function () { this.aNode().setAttribute("tabindex", -1) } } }(), function () { function t(e, t) { var n = []; if (!t) return e; for (var o in t) n.push(o + "=" + encodeURIComponent(t[o])); return e + (-1 != e.indexOf("?") ? "&" : "?") + n.join("&") } function n(e) { var t = this, n = t.getDialog(); return n.getParentApi()._.rb = t, !!n.getContentElement(t.for[0], t.for[1]).getInputElement().$.value && !!n.getContentElement(t.for[0], t.for[1]).vy() } function o(e, n, o) { var i = o.params || {}; o.url && (i.CKFinderFuncNum = e._.ra, i.langCode || (i.langCode = e.langCode), n.action = t(o.url, i), n.filebrowser = o) } function i(e, a, r, l) { var s; for (var d in l) if ("hbox" != (s = l[d]).type && "vbox" != s.type || i(e, a, r, s.children), s.filebrowser && "fileButton" == s.type && s.for) { if ("string" == typeof s.filebrowser) { var c = { target: s.filebrowser }; s.filebrowser = c } s.filebrowser.action = "QuickUpload"; var u = s.filebrowser.url; if (u) s.filebrowser.url = u, s.hidden = !1, o(e, r.vz(s.for[0]).eB(s.for[1]), s.filebrowser); else { var f = s.onShow; s.onShow = function (n) { var o = n.jN; if (f && !1 === f.call(o, n)) return !1; var i = e.getSelectedFolder(); if (i && (u = i.getUploadUrl()), !u) return !1; var a = s.filebrowser.params || {}; a.CKFinderFuncNum = e._.ra, a.langCode || (a.langCode = e.langCode), u = t(u, a); var r = this.getDialog().getContentElement(s.for[0], s.for[1]); return !!r && (r._.dg.action = u, r.reset(), !0) } } var p = s.onClick; s.onClick = function (e) { var t = e.jN; return (!p || !1 !== p.call(t, e)) && n.call(t, e) } } } function a(e, t, n) { if (-1 !== n.indexOf(";")) { for (var o = n.split(";"), i = 0; i < o.length; i++)if (a(e, t, o[i])) return !0; return !1 } var r = e.vz(t).eB(n).filebrowser; return r && r.url } function r(e, t) { var n = this, o = n._.rb.getDialog(), i = n._.rb.for, a = n._.rb.filebrowser.onSelect; i && o.getContentElement(i[0], i[1]).reset(), "function" == typeof t && !1 === t.call(n._.rb) || a && !1 === a.call(n._.rb, e, t) || ("string" == typeof t && t && alert(t), e && function (e, t) { var n = t.getDialog(), o = t.filebrowser.target || ""; if (o) { var i = o.split(":"), a = n.getContentElement(i[0], i[1]); a && (a.setValue(e), n.selectPage(i[0])) } }(e, n._.rb)) } p.add("filebrowser", { bz: function (e) { e.cg._.ra = d.addFunction(r, e.cg) } }), e.on("dialogDefinition", function (e) { var t, n = e.data.dg; for (var o in n.contents) t = n.contents[o], i(e.application.cg, e.data.name, n, t.elements), t.hidden && t.filebrowser && (t.hidden = !a(n, t.id, t.filebrowser)) }) }(), p.add("button", { eK: function (t) { t.bY.kd(e.UI_BUTTON, C.button.dq) } }), CKFinder._.UI_BUTTON = e.UI_BUTTON = 1, C.button = function (e) { d.extend(this, e, { title: e.label, className: e.className || e.command && "cke_button_" + e.command || "", click: e.click || function (t) { e.command ? t.execCommand(e.command) : e.onClick && e.onClick(t) } }), this._ = {} }, C.button.dq = { create: function (e) { return new C.button(e) } }, C.button.prototype = { canGroup: !0, er: function (t, n) { var o = r, i = this._.id = "cke_" + d.getNextNumber(); this._.app = t; var a = { id: i, button: this, app: t, focus: function () { var e = t.document.getById(i); e && e.focus() }, lc: function () { this.button.click(t) } }, l = d.addFunction(a.lc, a), s = C.button._.instances.push(a) - 1, c = "", u = this.command; if (this.iH ? t.on("mode", function () { this.bR(this.iH[t.mode] ? e.aS : e.aY) }, this) : u && (u = t.cS(u)) && (u.on("bu", function () { this.bR(u.bu) }, this), c += "cke_" + (u.bu == e.eV ? "on" : u.bu == e.aY ? "disabled" : "off")), u || (c += "cke_off"), this.className && (c += " " + this.className), n.push('<span class="cke_button">', '<a id="', i, '" class="', c, '" href="javascript:void(\'', (this.title || "").replace("'", ""), '\')" title="', this.title, '" tabindex="-1" hidefocus="true" role="button" aria-labelledby="' + i + '_label"' + (this.vZ ? ' aria-haspopup="true"' : "")), (o.opera || o.gecko && o.mac) && n.push(' onkeypress="return false;"'), o.gecko && n.push(' onblur="this.style.cssText = this.style.cssText;"'), n.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(', s, ', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(', s, ', event);" onclick="window.parent.CKFinder._.callFunction(', l, ', this); return false;">'), !1 !== this.icon && n.push('<span class="cke_icon"'), this.icon) { var f = -16 * (this.rD || 0); n.push(' style="background-image:url(', e.getUrl(this.icon), ");background-position:0 " + f + 'px;"') } return !1 !== this.icon && n.push("></span>"), n.push('<span id="', i, '_label" class="cke_label">', this.label, "</span>"), this.vZ && n.push('<span class="cke_buttonarrow"></span>'), n.push("</a>", "</span>"), this.onRender && this.onRender(), a }, bR: function (t) { var n = this; if (n._.bu == t) return !1; n._.bu = t; var o = n._.app.document.getById(n._.id); if (o) { o.bR(t), t == e.aY ? o.setAttribute("aria-disabled", !0) : o.removeAttribute("aria-disabled"), t == e.eV ? o.setAttribute("aria-pressed", !0) : o.removeAttribute("aria-pressed"); var i = n.title, a = n._.app.lang.common.unavailable, r = o.getChild(1); return t == e.aY && (i = a.replace("%1", n.title)), r.setHtml(i), !0 } return !1 } }, C.button._ = { instances: [], keydown: function (e, t) { var n = C.button._.instances[e]; if (n.onkey) return t = new s.event(t), !1 !== n.onkey(n, t.db()) }, focus: function (e, t) { var n, o = C.button._.instances[e]; return o.onfocus && (n = !1 !== o.onfocus(o, new s.event(t))), r.gecko && r.version < 10900 && t.preventBubble(), n } }, CKFinder._.uiButtonKeydown = C.button._.keydown, CKFinder._.uiButtonFocus = C.button._.focus, C.prototype.qW = function (t, n) { this.add(t, e.UI_BUTTON, n) }, p.add("container", { bM: [], bz: function (e) { var t = this; e.on("themeAvailable", function () { t.pV(e) }) }, pV: function (t) { var n = t.config.height, o = t.config.tabIndex || t.element.getAttribute("tabindex") || 0; isNaN(n) || (n = Math.max(n, 200), n += "px"); var i = "", a = t.config.width; a && (isNaN(a) || (a += "px"), i += "width: " + a + ";"); var s = t.config.className ? 'class="' + t.config.className + '"' : "", d = r.isCustomDomain(), f = "document.open();" + (d ? 'document.domain="' + window.document.domain + '";' : "") + "document.close();", p = u.kE('<iframe style="' + i + "height:" + n + '"' + s + ' frameBorder="0" src="' + (l ? "javascript:void(function(){" + encodeURIComponent(f) + "}())" : "") + '" tabIndex="' + o + '" allowTransparency="true"></iframe>', t.element.getDocument()); function h(n) { n && n.removeListener(); var o = p.getFrameDocument().$; if (o.open(), d && (o.domain = document.domain), t.document = new c(o), t.theme.dQ(t), o.close(), (o.defaultView || o.parentWindow).CKFinder = CKFinder, e.skins.load(t, "application", function () { var e = t.dJ; e && e.oA(t.document) }), !p.isVisible() && l && r.version >= 8) var i = setInterval(function () { p.isVisible() && (t.layout.ea(!0), i = clearInterval(i)) }, 500) } l && r.version >= 9 && t.cg.inPopup && (t.element.getDocument().getWindow().$.ckfinder = function () { t.element.getDocument().getWindow().$.ckfinder = void 0, h() }), p.on("load", h); var m = t.lang.appTitle.replace("%1", t.name); r.gecko ? (p.on("load", function (e) { e.removeListener() }), t.element.setAttributes({ role: "region", title: m }), p.setAttributes({ role: "region", title: " " })) : r.webkit ? (p.setAttribute("title", m), p.setAttribute("name", m)) : l && p.appendTo(t.element), l || t.element.append(p), t.container = p } }), e.application.prototype.focus = function () { var e = this; if (e._.oO && e._.oO.length > 1) { e.oW("requestSelectFile"); for (var t = 0, n = e._.oO.length; t < n; t++)e.oW("requestSelectFile", { file: e._.oO[t], multiple: !0 }) } (e._.activeElement ? u.eB(e._.activeElement) : e.document.getWindow()).focus() }, p.add("contextmenu", { bM: ["menu"], eK: function (e) { e.bj = new p.bj(e), e.bD("bj", { exec: function () { var t, n, o, i = e.layout.pn(); if (i.hasClass("focus_inside")) { var a = (o = e.ld["filesview.filesview"]).tools.dH(); if (a) return n = (t = a.dM).ir(), e.bj.show(e.document.bH().getParent(), null, n.x + 5, n.y + 5, t, i), e._.activeElement = t, void (e._.oO = o.tools.oO()) } if ((i = e.layout.pS()).hasClass("focus_inside")) { var r = (o = e.ld["foldertree.foldertree"]).tools.ew; if (r) return n = (t = r.dM).ir(), e.bj.show(e.document.bH().getParent(), null, n.x + 5, n.y + 5, t, i), e._.activeElement = t, void (e._.oO = []) } } }) } }), p.bj = d.createClass({ $: function (e) { this.id = "cke_" + d.getNextNumber(), this.app = e, this._.dF = [], this._.vx = d.addFunction(function (t) { this._.panel.hide(), e.focus && e.focus() }, this) }, _: { onMenu: function (t, n, o, i, a, r) { var s = this._.menu, c = this.app; s ? (s.hide(), s.ih()) : (s = this._.menu = new e.menu(c)).onClick = d.bind(function (e) { s.hide(), l && c.focus && c.focus(), e.onClick ? e.onClick() : e.command && c.execCommand(e.command) }, this), s.onEscape = function () { c.focus && c.focus(), a.focus && a.focus(), c._.activeElement = null }; var u = this._.dF; s.onHide = d.bind(function () { s.onHide = null, this.onHide && this.onHide() }, this); for (var f = 0; f < u.length; f++) { var p = u[f]; if (!p[1] || p[1].$ == r.$) { var h = u[f][0](a); if (h) for (var m in h) { var g = this.app.mh(m); g && (g.bu = h[m], s.add(g)) } } } s.items.length && s.show(t, n || ("rtl" == c.lang.dir ? 2 : 1), o, i) } }, ej: { lX: function (t, n) { var o; !r.opera || "oncontextmenu" in document.body || (t.on("mousedown", function (i) { if (2 == (i = i.data).$.button) { if (!n || !i.$.ctrlKey && !i.$.metaKey) { var a = i.bK(); if (!o) { var r = a.getDocument(); (o = r.createElement("input")).$.type = "button", r.bH().append(o) } o.setAttribute("style", "position:absolute;top:" + (i.$.clientY - 2) + "px;left:" + (i.$.clientX - 2) + "px;width:5px;height:5px;opacity:0.01") } } else i.db() == e.bP + 1 && t.oW("contextmenu", i) }), t.on("mouseup", function (e) { o && (o.remove(), o = void 0, t.oW("contextmenu", e.data)) })); if (t.on("contextmenu", function (e) { var o = e.data; if (!n || !(r.webkit ? i : o.$.ctrlKey || o.$.metaKey)) { o.preventDefault(); var a = o.bK(), l = o.bK().getDocument().gT(), s = o.$.clientX, c = o.$.clientY; d.setTimeout(function () { this._.onMenu(l, null, s, c, a, t) }, 0, this) } }, this), r.opera && t.on("keypress", function (e) { var t = e.data; 0 === t.$.keyCode && t.preventDefault() }), r.webkit) { var i, a = function () { i = 0 }; t.on("keydown", function (e) { i = e.data.$.ctrlKey || e.data.$.metaKey }), t.on("keyup", a), t.on("contextmenu", a) } }, kh: function (e, t) { this._.dF.push([e, t]) }, show: function (t, n, o, i, a, r) { this.app.focus(), this._.onMenu(t || e.document.gT(), n, o || 0, i || 0, a, r) } } }), function () { function t(e) { var t = this; t.jr = null, t.kP = null, t.nK = null, t.app = e } p.add("dragdrop", { bM: ["foldertree", "filesview", "contextmenu", "dialog"], readOnly: !1, gr: function (n) { var o, i; n.cK = new t(n), n.on("themeSpace", function (e) { "mainBottom" == e.data.space && (e.data.html += '<div id="dragged_container" style="display: none; position: absolute;"></div>') }), n.on("uiReady", function (e) { n.document.on("dragstart", function (e) { e.data.preventDefault(!0) }), n.document.on("drag", function (e) { e.data.preventDefault(!0) }), n.ld["filesview.filesview"].gA("Draggable"), n.ld["foldertree.foldertree"].ke("Droppable") }), e.ld.bX["filesview.filesview"].bh("Draggable", ["mousedown"], function (e) { var t = this, i = t.tools.bZ(e), a = t.tools.oO(!0); if (i && e.data.ov()) { e.data.preventDefault(), i.rowNode().hasClass("selected") || ((e.data.$.ctrlKey || e.data.$.metaKey) && n.config.selectMultiple ? a.push(i) : a = [i]); var r = d.extend({}, { file: i, files: a, step: 1 }, !0); t.oW("beforeDraggable", r, function (e, r) { if (!e) { var l = i.rowNode(), s = 0, d = 0; (o = o || n.document.getById("dragged_container")).hide(), n.document.on("mousemove", u), n.document.on("mouseup", f, 999); var c = n.document.bH().$; n.document.on("mouseout", function (e) { n.cK.qp() && e.data.bK().$ == c && f() }) } function u(e) { if (o.setStyles({ left: e.data.$.clientX - ("rtl" == n.lang.dir ? o.hR("width") : -1) + "px", top: e.data.$.clientY + "px" }), 0 === s && (s = e.data.$.clientY + e.data.$.clientX), !(d || Math.abs(e.data.$.clientY + e.data.$.clientX - s) < 20)) { t.app.cK.kG(l), t.app.cK.kz(a); for (var i = 0, c = a.length; i < c; i++)a[i].rowNode().addClass("dragged_source"); var u; if (1 == a.length ? (o.setStyle("width", l.rd("width")), o.addClass("file_entry")) : o.addClass("drag_multiple"), o.show(), 1 == a.length) u = (u = (u = l.getHtml()).replace(/url\(&quot;(.+?)&quot;\);?"/, 'url($1);"')).replace(/url\(([^'].+?[^'])\);?"/, "url('$1');\""); else { var f = n.config.jh || "gif"; u = function (e, t, n) { for (var o = !0, i = t[0].ext.toLowerCase(), a = 1, r = t.length; a < r; a++)if (t[a].ext.toLowerCase() != i) { o = !1; break } return '<div style="background-image: url(' + (o ? e.tools.oR(t[0], !0) : e.app.fh + "images/icons/32/default.icon." + n) + ')"><span>' + t.length + "</span></div>" }(t, a, f) } o.setHtml(u), d = 1, t.app.document.bH().addClass("dragging"), t.app.ld["foldertree.foldertree"].gA("Droppable"), r.step = 1, t.oW("successDraggable", r) } } function f(e) { o.hide(), o.removeClass("drag_multiple"), o.removeClass("file_entry"), o.setStyle("width", "auto"), o.setHtml(""); for (var i = 0, l = a.length; i < l; i++)a[i].rowNode().removeClass("dragged_source"); t.app.cK.kG(null), t.app.cK.kz(null), n.document.removeListener("mousemove", u), e ? e.removeListener() : n.document.removeListener("mouseup", f), t.app.ld["foldertree.foldertree"].ke("Droppable"), t.app.document.bH().removeClass("dragging"), r.step = 2, t.oW("successDraggable", r), t.oW("afterDraggable", r) } }) } }), e.ld.bX["foldertree.foldertree"].bh("Droppable", ["mouseup", "mouseover", "mouseout"], function (t) { var o = t.data.bK(), a = this, r = t.name; if (!!a.app.cK.qp() && !o.is("ul")) { var l = a.tools.cq(o); if (l) if ("mouseup" == r) { a.app.cK.iW(0), a.app.cK.nz(l); var s = a.app.cK.pe(), c = d.extend({}, { target: l, source: s }, !0); a.oW("beforeDroppable", c, function (t, o) { if (!t) try { var r = o.target, l = o.source, s = new e.iD(a.app, "copyFilesToFolderDrop", { label: a.app.lang.CopyDragDrop, bu: r != l[0].folder && r.acl.fileUpload ? e.aS : e.aY, onClick: function () { a.oW("successDroppable", { hH: l, hC: r, step: 2 }), a.app.execCommand("copyFilesToFolder", { files: l, destination: r, callback: function () { a.oW("successDroppable", { hH: l, hC: r, step: 3 }), a.oW("afterDroppable", o) }, errorCallback: function () { a.oW("failedDroppable", o), a.oW("afterDroppable", o) } }) } }), c = window.top[e.nd + "cation"][e.jG + "st"], u = { copyFilesToFolder: s, moveFilesToFolder: new e.iD(a.app, "moveFilesToFolderDrop", { label: a.app.lang.MoveDragDrop, bu: r != l[0].folder && r.acl.fileUpload && l[0].folder.acl.fileDelete ? e.aS : e.aY, onClick: function () { a.oW("successDroppable", { hH: l, hC: r, step: 2 }), e.bF && 1 == e.bs.indexOf(e.bF.substr(1, 1)) % 5 && e.lS(c) != e.lS(e.ed) || e.bF && e.bF.substr(3, 1) != e.bs.substr(9 * (e.bs.indexOf(e.bF.substr(0, 1)) + e.bs.indexOf(e.bF.substr(2, 1))) % (e.bs.length - 1), 1) ? a.app.msgDialog("", "This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license.") : a.app.execCommand("moveFilesToFolder", { files: l, destination: r, callback: function () { a.oW("successDroppable", { hH: l, hC: r, step: 3 }), a.oW("afterDroppable", o) }, errorCallback: function () { a.oW("failedDroppable", o), a.oW("afterDroppable", o) } }) } }) }; for (var f in a.oW("beforeDropMenu", { iG: u, folder: r }), i || ((i = new e.menu(a.app)).onClick = d.bind(function (e) { i.hide(), e.onClick ? e.onClick() : e.command && n.execCommand(e.command) }, this)), i.ih(), u) u.hasOwnProperty(f) && i.add(u[f]); i.items.length && i.show(r.aNode(), "rtl" == n.lang.dir ? 2 : 1, 0, r.aNode().$.offsetHeight), a.oW("successDroppable", { hH: l, hC: r, step: 1 }) } catch (t) { throw t = e.ba(t), a.oW("failedDroppable", o), a.oW("afterDroppable", o), t } }) } else "mouseover" == r ? a.app.cK.fZ || a.app.cK.iW(l.liNode()) : "mouseout" == r && a.app.cK.fZ && a.app.cK.iW(0) } }) } }), t.prototype = { iW: function (e) { var t = this, n = !!e; n && !t.fZ ? (t.app.document.bH().addClass("drop_accepted"), e.addClass("drop_target")) : !n && t.fZ && (t.app.document.bH().removeClass("drop_accepted"), t.fZ.removeClass("drop_target")), t.fZ = n ? e : null }, kG: function (e) { this.jr = e, this.jr instanceof u && this.jr.focus() }, vE: function () { return this.jr }, kz: function (e) { this.kP = e }, pe: function () { return this.kP }, qp: function () { return !!this.jr }, nz: function (e) { this.nK = e }, oa: function () { return this.nK } } }(), p.add("floatpanel", { bM: ["panel"] }), function () { var t = {}, n = !1; C.pY = d.createClass({ $: function (e, n, o, i) { o.lE = !0; var a = n.getDocument(), r = function (e, n, o, i, a) { var r = n.iY() + "-" + o.iY() + "-" + e.gd + "-" + e.lang.dir + (e.uiColor && "-" + e.uiColor || "") + (i.css && "-" + i.css || "") + (a && "-" + a || ""), l = t[r]; return l || ((l = t[r] = new C.panel(n, i, e.gd)).element = o.append(u.kE(l.nt(e), o.getDocument())), l.element.setStyles({ display: "none", position: "absolute" })), l }(e, a, n, o, i || 0), l = r.element, s = l.getFirst().getFirst(); this.element = l, e.ia ? e.ia.push(l) : e.ia = [l], this._ = { panel: r, parentElement: n, dg: o, document: a, iframe: s, children: [], dir: e.lang.dir } }, ej: { qq: function (e, t) { return this._.panel.qq(e, t) }, re: function (e, t) { return this._.panel.re(e, t) }, iv: function (e) { return this._.panel.iv(e) }, gf: function (t, o, i, a, c) { var u = this._.panel, f = u.gf(t); this.fj(!1), n = !0; var p = this.element, h = this._.iframe, m = this._.dg, g = o.ir(p.getDocument()), v = "rtl" == this._.dir, b = g.x + (a || 0), y = g.y + (c || 0); if (!v || 1 != i && 4 != i ? v || 2 != i && 3 != i || (b += o.$.offsetWidth - 1) : b += o.$.offsetWidth, 3 != i && 4 != i || (y += o.$.offsetHeight - 1), this._.panel._.nr = o.dS(), p.setStyles({ top: y + "px", left: "-3000px", visibility: "hidden", opacity: "0", display: "" }), p.getFirst().removeStyle("width"), !this._.qa) { var w = l ? h : new s.window(h.$.contentWindow); e.event.jP = !0, w.on("blur", function (e) { if (!l || this.fj()) { var t = e.data.bK(), o = t.getWindow && t.getWindow(); o && o.equals(w) || !this.visible || this._.gF || n || (r.webkit && r.isMobile ? d.setTimeout(function () { this.hide() }, 500, this) : this.hide()) } }, this), w.on("focus", function () { this._.lG = !0, this.gU(), this.fj(!0) }, this), e.event.jP = !1, this._.qa = 1 } u.onEscape = d.bind(function () { this.onEscape && this.onEscape() }, this), d.setTimeout(function () { v && (b -= p.$.offsetWidth), p.setStyles({ left: b + "px", visibility: "", opacity: "1" }); var e = p.getFirst(); if (f.oz) { function t() { var e = p.getFirst(), t = 0, n = f.element.$; (r.gecko || r.opera) && (n = n.parentNode); var o = n.scrollWidth; if (l && r.version < 10) for (var i = (n = n.document.body).getElementsByTagName("a"), a = 0; a < i.length; a++) { var s = i[a].children[1], d = s.scrollWidth + s.offsetLeft - o; d > 0 && d > t && (t = d) } o += t, l && r.quirks && o > 0 && (o += (e.$.offsetWidth || 0) - (e.$.clientWidth || 0)), o += 4, e.setStyle("width", o + "px"), f.element.addClass("cke_frameLoaded"); var c = f.element.$.scrollHeight; l && r.quirks && c > 0 && (c += (e.$.offsetHeight || 0) - (e.$.clientHeight || 0)), e.setStyle("height", c + "px"), u._.iL.element.setStyle("display", "none").removeStyle("display") } u.hm ? t() : u.onLoad = t } else e.removeStyle("height"); var n = u.element, o = n.getWindow(), i = o.hV(), a = o.eR(), s = n.$.offsetHeight, c = n.$.offsetWidth; (v ? b < 0 : b + c > a.width + i.x) && (b += c * (v ? 1 : -1)), y + s > a.height + i.y && (y -= s), p.setStyles({ top: y + "px", left: b + "px", opacity: "1" }), d.setTimeout(function () { if (m.ny && r.gecko) { var e = h.getParent(); e.setAttribute("role", "region"), e.setAttribute("title", m.ny), h.setAttribute("role", "region"), h.setAttribute("title", " ") } l && r.quirks ? h.focus() : h.$.contentWindow.focus(), l && !r.quirks && this.fj(!0) }, 0, this) }, 0, this), this.visible = 1, this.onShow && this.onShow.call(this), (r.ie7Compat || r.ie8 && r.ie6Compat) && d.setTimeout(function () { this._.parentElement.$.style.cssText += "" }, 0, this), n = !1 }, hide: function () { var e = this; !e.visible || e.onHide && !0 === e.onHide.call(e) || (e.gU(), e.element.setStyle("display", "none"), e.visible = 0) }, fj: function (e) { var t = this._.panel; return null != e && (t.fj = e), t.fj }, rA: function (e, t, n, o, i, a) { this._.gF == e && e._.panel._.nr == n.dS() || (this.gU(), e.onHide = d.bind(function () { d.setTimeout(function () { this._.lG || this.hide() }, 0, this) }, this), this._.gF = e, this._.lG = !1, e.gf(t, n, o, i, a), (r.ie7Compat || r.ie8 && r.ie6Compat) && setTimeout(function () { e.element.getChild(0).$.style.cssText += "" }, 100)) }, gU: function () { var e = this._.gF; e && (delete e.onHide, delete this._.gF, e.hide()) } } }) }(), function () { function t(e) { if ("submit" == e.name) { var t = this.app.ld["formpanel.formpanel"].data(); return this.oW("requestUnloadForm"), void this.oW("afterFilesViewSettingsForm", t) } var n = e.data.bK(), o = n.getAttribute("name"), i = n.getAttribute("value"), a = n.$.checked; "input" == n.getName() && d.setTimeout(function () { var e = this.app.ld["filesview.filesview"], t = e.data(), n = { dA: t.dA, cN: t.cN, display: CKFinder.tools.clone(t.display), lookup: t.lookup }; if ("sortby" == o) t.cN = i; else if ("view_type" == o) { t.dA = i; var r = this.app.document.getById("fs_display_filename"); "list" == i ? (t.display.filename = !0, r.$.checked = !0, r.$.disabled = !0) : r.$.disabled = !1 } else "display_filename" == o ? "list" != t.dA && (t.display.filename = !!a) : "display_date" == o ? t.display.date = !!a : "display_filesize" == o && (t.display.filesize = !!a); var l = ("list" == t.dA ? "L" : "T") + ("size" == t.cN ? "S" : "date" == t.cN ? "D" : "extension" == t.cN ? "E" : "N") + (t.display.filename ? "N" : "_") + (t.display.date ? "D" : "_") + (t.display.filesize ? "S" : "_"); d.setCookie("CKFinder_Settings", l, !1), n.display.filename == t.display.filename && n.display.date == t.display.date && n.display.filesize == t.display.filesize && n.cN == t.cN && n.dA == t.dA || e.oW("requestRenderFiles", { mj: e.app.lang.FilesEmpty, lastView: n }) }, 0, this) } function n(e) { e.data.preventDefault() } p.add("formpanel", { bM: ["button"], onLoad: function () { !function () { var o = e.ld.hS("formpanel", "formpanel", { dc: null }); o.dT.push(function () { d.mH(this.bn()) }), o.bh("UnloadForm", ["submit", "requestUnloadForm"], function (t) { ("submit" != t.name || this.data().gM) && (t.result = this.oW("beforeUnloadForm", function (t, n) { var o = this; if (!t) try { if (o.bn().getParent().setStyle("display", "none"), o.app.layout.ea(!0), o.data().dc) { var i = o.app.cS(o.data().dc); i && i.bR(e.aS), o.data().dc = null } var a = o.tools.formNode(); a && (a.mF(), a.remove()), o.tools.releaseDomNodes(), o.oW("successUnloadForm", n) } catch (t) { throw o.oW("failedUnloadForm", n), o.oW("afterUnloadForm", n), e.ba(t) } })) }), o.bh("LoadForm", ["requestLoadForm"], function (t) { var o = this, i = d.extend({ html: null, dq: null, cC: null, cancelSubmit: 1, gM: 1, command: null }, t.data, !0); t.result = this.oW("beforeLoadForm", i, function (t, i) { if (!t) { try { var a = this.bn(); a.setHtml(i.html), a.getParent().removeStyle("display"), this.app.layout.ea(!0); var r = this.tools.formNode(); if (r) { if (i.dq) if (i.cC) for (var l in i.cC) r.on(i.cC[l], i.dq); else r.on("submit", i.dq); i.cancelSubmit && r.on("submit", n); for (var s = r.eG("input"), l = 0; l < s.count(); l++)if ("cancel" == s.getItem(l).getAttribute("name")) { s.getItem(l).on("click", function (e) { o.oW("requestUnloadForm"), e.removeListener() }); break } i.cancelSubmit && r.on("submit", n) } if (this.data().gM = i.gM, i.command) { var d = this.app.cS(i.command); d && d.bR(e.eV), this.data().dc = i.command } this.oW("successLoadForm", i) } catch (t) { throw this.oW("failedLoadForm", i), e.ba(t) } this.oW("afterLoadForm", i) } }) }), o.bh("FilesViewSettingsForm", ["requestFilesViewSettingsForm"], function (n) { n.result = this.oW("beforeFilesViewSettingsForm", {}, function (n, o) { if (!n) try { if ("settings" == this.data().dc) this.oW("requestUnloadForm", function () { this.oW("successFilesViewSettingsForm", o), this.oW("afterFilesViewSettingsForm", o) }); else { this.data().dc && this.oW("requestUnloadForm"); var i = this.app.ld["filesview.filesview"].data(), a = function (e, t, n, o) { var i = 'checked="checked"', a = "", r = "", l = "", s = "", d = "", c = "", u = "", f = "", p = ""; "list" == t ? a = i : r = i; n.filename && (l = i); n.date && (s = i); n.filesize && (d = i); "date" == o ? u = i : "size" == o ? f = i : "extension" == o ? p = i : c = i; var h = a ? ' disabled="true"' : ""; return '<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">' + e.SetTitle + '</h2><table role="presentation"><tr><td><dl role="group" aria-labelledby="files_settings_type"><dt id="files_settings_type">' + e.SetView + '</dt><dd><input type="radio" name="view_type" value="thumbnails" ' + r + ' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">' + e.SetViewThumb + '</label></dd><dd><input type="radio" name="view_type" value="list" ' + a + ' id="fs_type_details" /> <label for="fs_type_details">' + e.SetViewList + '</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_display"><dt id="files_settings_display">' + e.SetDisplay + '</dt><dd><input type="checkbox" name="display_filename" value="1" ' + l + h + ' id="fs_display_filename" /> <label for="fs_display_filename">' + e.SetDisplayName + '</label></dd><dd><input type="checkbox" name="display_date" value="1" ' + s + ' id="fs_display_date" /> <label for="fs_display_date">' + e.SetDisplayDate + '</label></dd><dd><input type="checkbox" name="display_filesize" value="1" ' + d + ' id="fs_display_filesize" /> <label for="fs_display_filesize">' + e.SetDisplaySize + '</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_sorting"><dt id="files_settings_sorting">' + e.SetSort + '</dt><dd><input type="radio" name="sortby" value="filename" ' + c + ' id="fs_sortby_filename" /> <label for="fs_sortby_filename">' + e.SetSortName + '</label></dd><dd><input type="radio" name="sortby" value="date" ' + u + ' id="fs_sortby_date" /> <label for="fs_sortby_date">' + e.SetSortDate + '</label></dd><dd><input type="radio" name="sortby" value="size" ' + f + ' id="fs_sortby_size" /> <label for="fs_sortby_size">' + e.SetSortSize + '</label></dd><dd><input type="radio" name="sortby" value="extension" ' + p + ' id="fs_sortby_extension" /> <label for="fs_sortby_extension">' + e.SetSortExtension + '</label></dd></dl></td></tr></table><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="' + e.CloseBtn + '" /></div></div></form>' }(this.app.lang, i.dA, i.display, i.cN); this.oW("requestLoadForm", { html: a, dq: d.bind(t, this), cC: ["click", "submit"], command: "settings" }, function () { this.eh.addClass("show_border"), this.app.cg.resizeFormPanel(), this.oW("successFilesViewSettingsForm", o) }) } } catch (t) { throw this.oW("failedFilesViewSettingsForm", o), this.oW("afterFilesViewSettingsForm", o), e.ba(t) } }) }), o.tools = { formNode: function () { var e, t = this; return !t.iP && t.ib.bn().$.childNodes.length && (t.iP = (e = function (e, t, n) { return function (e, t) { for (var n in e) if (void 0 !== t(e[n])) return e[n]; return }(e, function (e) { if (e.tagName && e.tagName.toLowerCase() == t && !n--) return e }) }(t.ib.bn().$.childNodes, "form")) ? new u(e) : null), t.iP }, releaseDomNodes: function () { delete this.iP } } }() }, gr: function (t) { var n = this; t.on("themeSpace", function (e) { "mainTop" == e.data.space && (e.data.html += '<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget widget" tabindex="-1"></div></div>') }), t.on("uiReady", function (o) { var i = t.document.getById("panel_view").getChild(0); e.ld.bz(t, "formpanel", n, i) }), t.bD("settings", { exec: function (t) { t.oW("requestFilesViewSettingsForm", null, function () { t.cS("settings").bu == e.eV && setTimeout(function () { t.ld["formpanel.formpanel"].tools.formNode().eG("input").getItem(0).focus() }, 0) }) } }), t.bD("refresh", { exec: function (e) { var t = e.aV; t && e.oW("requestShowFolderFiles", { folder: t, lookup: e.ld["filesview.filesview"].data().lookup }, function () { setTimeout(function () { e.ld["filesview.filesview"].bn().focus() }, 0) }) } }), t.bY.add("Settings", e.UI_BUTTON, { label: t.lang.Settings, command: "settings" }), t.bY.add("Refresh", e.UI_BUTTON, { label: t.lang.Refresh, command: "refresh" }), t.cS("refresh").bR(e.aY) } }) }(), p.add("keystrokes", { eK: function (t) { t.dJ = new e.dJ(t), t.oX = {} }, bz: function (e) { for (var t = e.config.keystrokes, n = e.config.gN, o = e.dJ.keystrokes, i = e.dJ.gN, a = 0; a < t.length; a++)o[t[a][0]] = t[a][1]; for (a = 0; a < n.length; a++)i[n[a]] = 1 } }), e.dJ = function (e) { var t = this; return e.dJ ? e.dJ : (t.keystrokes = {}, t.gN = {}, t._ = { app: e }, t) }, function () { var t, n = function (e) { var n = (e = e.data).db(), o = this.keystrokes[n], i = this._.app; if (!(t = !0 === i.oW("iK", { keyCode: n }))) { if (o) { t = !1 !== i.execCommand(o, { gJ: "dJ" }) } if (!t) { var a = i.oX[n]; (t = a && !0 === a(i)) || (t = !!this.gN[n]) } } return t && e.preventDefault(!0), !t }, o = function (e) { t && (t = !1, e.data.preventDefault(!0)) }; e.dJ.prototype = { oA: function (e) { e.on("keydown", n, this), (r.opera || r.gecko && r.mac) && e.on("keypress", o, this) } } }(), f.gN = [], f.keystrokes = [[e.eJ + 119, "foldertreeFocus"], [e.eJ + 120, "filesviewFocus"], [e.eJ + 121, "hW"], [e.eJ + 85, "upload"], [e.dy + 121, "bj"], [e.bP + e.dy + 121, "bj"]], p.add("menu", { eK: function (e) { for (var t = e.config.nj.split(","), n = {}, o = 0; o < t.length; o++)n[t[o]] = o + 1; e._.iA = n, e._.iG = {} }, bM: ["floatpanel"] }), d.extend(e.application.prototype, { dZ: function (e, t) { this._.iA[e] = t || 100 }, gp: function (t, n) { this._.iA[n.group] && (this._.iG[t] = new e.iD(this, t, n)) }, eU: function (e) { for (var t in e) this.gp(t, e[t]) }, mh: function (e) { return this._.iG[e] } }), function () { e.menu = d.createClass({ $: function (e, t) { var n = this; n.id = "cke_" + d.getNextNumber(), n.app = e, n.items = [], n._.hx = t || 1 }, _: { jK: function (t) { var n = this, o = n._.oM, i = n.items[t], a = i.hQ && i.hQ(); if (a) { for (var r in o ? o.ih() : ((o = n._.oM = new e.menu(n.app, n._.hx + 1)).parent = n, o.onClick = d.bind(n.onClick, n)), a) o.add(n.app.mh(r)); var l = n._.panel.iv(n.id).element.getDocument().getById(n.id + String(t)); o.show(l, 2) } else n._.panel.gU() } }, ej: { add: function (e) { e.fE || (e.fE = this.items.length), this.items.push(e) }, ih: function () { this.items = [] }, show: function (t, n, o, i) { var a = this.items, r = this.app, l = this._.panel, s = this._.element; if (!l) { (l = this._.panel = new C.pY(this.app, this.app.document.bH(), { css: [], hx: this._.hx - 1, className: r.iy + " cke_contextmenu" }, this._.hx)).onEscape = d.bind(function () { this.onEscape && this.onEscape(), this.hide() }, this), l.onHide = d.bind(function () { this.onHide && this.onHide() }, this); var c = l.qq(this.id); c.oz = !0; var u = c.jQ; u[40] = "next", u[9] = "next", u[38] = "prev", u[e.dy + 9] = "prev", u[32] = "click", u[39] = "click", (s = this._.element = c.element).addClass(r.iy); var f = s.getDocument(); f.bH().setStyle("overflow", "hidden"), f.eG("html").getItem(0).setStyle("overflow", "hidden"), this._.qz = d.addFunction(function (e) { var t = this; clearTimeout(t._.jI), t._.jI = d.setTimeout(t._.jK, r.config.ob, t, [e]) }, this), this._.qm = d.addFunction(function (e) { clearTimeout(this._.jI) }, this), this._.ql = d.addFunction(function (t) { var n = this, o = n.items[t]; o.bu != e.aY ? o.hQ ? n._.jK(t) : n.onClick && n.onClick(o) : n.hide() }, this) } !function (e) { e.sort(function (e, t) { return e.group < t.group ? -1 : e.group > t.group ? 1 : e.fE < t.fE ? -1 : e.fE > t.fE ? 1 : 0 }) }(a); for (var p = ['<div class="cke_menu">'], h = a.length, m = h && a[0].group, g = 0; g < h; g++) { var v = a[g]; m != v.group && (p.push('<div class="cke_menuseparator"></div>'), m = v.group), v.er(this, g, p) } p.push("</div>"), s.setHtml(p.join("")), this.parent ? this.parent._.panel.rA(l, this.id, t, n, o, i) : l.gf(this.id, t, n, o, i), r.oW("menuShow", [l]) }, hide: function () { this._.panel && this._.panel.hide() } } }) }(), e.iD = d.createClass({ $: function (e, t, n) { var o = this; d.extend(o, n, { fE: 0, className: "cke_button_" + t }), o.group = e._.iA[o.group], o.app = e, o.name = t }, ej: { er: function (t, n, o) { var i = this, a = t.id + String(n), l = void 0 === i.bu ? e.aS : i.bu, s = " cke_" + (l == e.eV ? "on" : l == e.aY ? "disabled" : "off"), d = i.label; l == e.aY && (d = i.app.lang.common.unavailable.replace("%1", d)), i.className && (s += " " + i.className); var c = i.hQ; o.push('<span class="cke_menuitem"><a id="', a, '" class="', s, '" href="javascript:void(\'', (i.label || "").replace("'", ""), '\')" title="', i.label, '" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"' + (c ? 'aria-haspopup="true"' : "") + (l == e.aY ? 'aria-disabled="true"' : "") + (l == e.eV ? 'aria-pressed="true"' : "")), (r.opera || r.gecko && r.mac) && o.push(' onkeypress="return false;"'), r.gecko && o.push(' onblur="this.style.cssText = this.style.cssText;"'); var u = -16 * (i.rD || 0); o.push(' onmouseover="CKFinder.tools.callFunction(', t._.qz, ",", n, ');" onmouseout="CKFinder.tools.callFunction(', t._.qm, ",", n, ');" onclick="CKFinder.tools.callFunction(', t._.ql, ",", n, '); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"' + (i.icon ? ' style="background-image:url(' + e.getUrl(i.icon) + ");background-position:0 " + u + 'px;"' : "") + '></span></span><span class="cke_label">'), i.hQ && o.push('<span class="cke_menuarrow"></span>'), o.push(d, "</span></a></span>") } } }), f.ob = 400, f.nj = "", function () { function e(e) { r.opera && e.setStyle("overflow", "hidden"), e.on("touchstart", function (t) { var n = t.data.$.touches[0]; e.interval && (window.clearInterval(e.interval), delete e.interval), e.lL = e.$.scrollTop, e.nx = e.$.scrollLeft, e.mP = n.pageY, e.na = n.pageX, e.mO = new Date }), e.on("touchmove", function (n) { var o = n.data, i = o.$.touches[0]; t(e, i.pageX, i.pageY) && o.preventDefault() }), e.on("touchend", function (n) { var o = n.data, i = o.$.changedTouches[0]; if (t(e, i.pageX, i.pageY)) { o.preventDefault(); var a = (new Date - e.mO) / 100, r = i.pageX - e.na, l = i.pageY - e.mP; e.mK = r / a, e.nu = l / a, e.jy = i.pageX, e.mv = i.pageY, e.nf = 0, e.interval = window.setInterval(function () { !function (e) { var n = Math.cos(e.nf / 7 * Math.PI / 2); if (e.jy += e.mK * n, e.mv += e.nu * n, e.nf++ > 7 || !t(e, e.jy, e.mv)) window.clearInterval(e.interval), delete e.interval }(e) }, 100) } }) } function t(e, t, n) { var o = Math.round(t - e.na), i = Math.round(n - e.mP), a = e.nx - o, r = e.lL - i; return (e.$.scrollLeft != a || e.$.scrollTop != r) && (e.$.scrollLeft = a, e.$.scrollTop = r, Math.abs(o) > Math.abs(i) ? e.$.scrollLeft == a : e.$.scrollTop == r) } p.add("mobile", { bM: ["foldertree", "filesview"], bz: function (t) { var n = "ontouchstart" in window; (r.isMobile || n) && (t.config.showContextMenuArrow = !0, r.isMobile && t.on("uiReady", function (n) { (r.webkit && r.version < 534 || r.opera) && (e(t.layout.pS()), e(t.layout.pn())), t.hs = function (e, t, n, o) { var i = window.prompt(t, n); null !== i && o(i) }, t.msgDialog = function (e, t, n) { window.alert(t), n && n() }, t.fe = function (e, t, n) { window.confirm(t) && n() } }, null, null, 20)) } }) }(), p.add("panel", { eK: function (t) { t.bY.kd(e.UI_PANEL, C.panel.dq) } }), e.UI_PANEL = 2, C.panel = function (t, n, o) { var i = this; n && d.extend(i, n), d.extend(i, { className: "" }); var a = e.basePath; d.extend(i.css, [a + "skins/" + o + "/uipanel.css"]), i.id = d.getNextNumber(), i.document = t, i._ = { iq: {} } }, C.panel.dq = { create: function (e) { return new C.panel(e) } }, C.panel.prototype = { nt: function (e) { var t = []; return this.er(e, t), t.join("") }, er: function (e, t) { var n = this, o = "cke_" + n.id; if (t.push('<div class="', e.iy, ' cke_compatibility" lang="', e.langCode, '" role="presentation" style="display:none;z-index:' + (e.config.baseFloatZIndex + 1) + '"><div id="', o, '"', ' dir="', e.lang.dir, '"', ' role="presentation" class="cke_panel cke_', e.lang.dir), n.className && t.push(" ", n.className), t.push('">'), n.lE || n.css.length) { t.push('<iframe id="', o, '_frame" frameborder="0" src="'); var i = "document.open();" + (r.isCustomDomain() ? 'document.domain="' + window.document.domain + '";' : "") + "document.close();"; t.push(l ? "javascript:void(function(){" + encodeURIComponent(i) + "}())" : ""), t.push('"></iframe>') } return t.push("</div></div>"), o }, oU: function () { var e = this._.rE; if (!e) { if (this.lE || this.css.length) { var t = this.document.getById("cke_" + this.id + "_frame"), n = t.getParent(), o = n.getAttribute("dir"), i = n.getParent().getAttribute("class").split(" ")[0], a = n.getParent().getAttribute("lang"), l = t.getFrameDocument(); l.$.open(), r.isCustomDomain() && (l.$.domain = document.domain); var s = d.addFunction(d.bind(function (e) { this.hm = !0, this.onLoad && this.onLoad() }, this)), c = l.getWindow(); c.$.CKFinder = CKFinder; var u = r.cssClass.replace(/browser_quirks|browser_iequirks/g, ""); l.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\"" + o + '" class="' + i + '_container" lang="' + a + '"><head><style>.' + i + '_container{visibility:hidden}</style></head><body class="cke_' + o + " cke_panel_frame " + u + ' cke_compatibility" style="margin:0;padding:0" onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction(' + s + ');"></body><link type="text/css" rel=stylesheet href="' + this.css.join('"><link type="text/css" rel="stylesheet" href="') + '"></html>'), l.$.close(), c.$.CKFinder = CKFinder, l.on("keydown", function (e) { var t = this, n = e.data.db(); t._.onKeyDown && !1 === t._.onKeyDown(n) ? e.data.preventDefault() : 27 == n && t.onEscape && t.onEscape() }, this), e = l.bH() } else e = this.document.getById("cke_" + this.id); this._.rE = e } return e }, qq: function (e, t) { var n = this; return t = n._.iq[e] = t || new C.panel.block(n.oU()), n._.iL || n.gf(e), t }, iv: function (e) { return this._.iq[e] }, gf: function (e) { var t = this, n = t._.iq[e], o = t._.iL; return o && o.hide(), t._.iL = n, n._.cQ = -1, t._.onKeyDown = n.onKeyDown && d.bind(n.onKeyDown, n), n.show(), n } }, C.panel.block = d.createClass({ $: function (e) { var t = this; t.element = e.append(e.getDocument().createElement("div", { attributes: { class: "cke_panel_block", role: "presentation" }, gS: { display: "none" } })), t.jQ = {}, t._.cQ = -1, t.element.hX() }, _: {}, ej: { show: function () { this.element.setStyle("display", "") }, hide: function () { var e = this; e.onHide && !0 === e.onHide.call(e) || e.element.setStyle("display", "none") }, onKeyDown: function (e) { var t = this; switch (t.jQ[e]) { case "next": for (var n, o = t._.cQ, i = t.element.eG("a"); n = i.getItem(++o);)if (n.getAttribute("_cke_focus") && n.$.offsetWidth) { t._.cQ = o, n.focus(); break } return !1; case "prev": for (o = t._.cQ, i = t.element.eG("a"); o > 0 && (n = i.getItem(--o));)if (n.getAttribute("_cke_focus") && n.$.offsetWidth) { t._.cQ = o, n.focus(); break } return !1; case "click": return (n = (o = t._.cQ) >= 0 && t.element.eG("a").getItem(o)) && (n.$.click ? n.$.click() : n.$.onclick()), !1 }return !0 } } }), p.add("resize", { bz: function (t) { var n = t.config; n.nB && t.on("uiReady", function () { var o, i, a = null; function r(e) { t.document.bH().addClass("during_sidebar_resize"); var a = e.data.$.screenX - o.x, r = i.width + a * ("rtl" == t.lang.dir ? -1 : 1); t.nJ(Math.max(n.nN, Math.min(r, n.nC))) } function l(n) { t.document.bH().removeClass("during_sidebar_resize"), e.document.removeListener("mousemove", r), e.document.removeListener("mouseup", l), t.document && (t.document.removeListener("mousemove", r), t.document.removeListener("mouseup", l)) } t.layout.dV().on("mousedown", function (n) { a || (a = t.layout.dV()), n.data.bK().$ == a.$ && (i = { width: a.$.offsetWidth || 0 }, o = { x: n.data.$.screenX }, e.document.on("mousemove", r), e.document.on("mouseup", l), t.document && (t.document.on("mousemove", r), t.document.on("mouseup", l))) }) }) } }), f.nN = 120, f.nC = 500, f.nB = !0, function () { p.add("status", { bM: ["filesview"], onLoad: function () { !function () { var t = e.ld.hS("status", "status"); t.bh("ShowFileInfo", ["requestShowFileInfo"], function (t) { t.result = this.oW("beforeShowFileInfo", t.data, function (t, n) { var o = this; if (!t) { var i, a, r = n.file; try { var l = r ? (i = r, a = o.app.lang, "<p>" + d.escapeHtml(i.name) + " (" + d.formatSize(i.size, a, !0) + ", " + i.dateF + ")</p>") : ""; o.bn().setHtml(l), o.oW("successShowFileInfo", n) } catch (t) { throw o.oW("failedShowFileInfo", n), e.ba(t) } o.oW("afterShowFileInfo", n) } }) }), t.bh("ShowFolderInfo", ["requestShowFolderInfo"], function (t) { t.result = this.oW("beforeShowFolderInfo", t.data, function (n, o) { var i = this; if (!n) { o.folder; try { var a = function (e, t) { var n; n = 0 === e ? t.FilesCountEmpty : 1 == e ? t.FilesCountOne : t.FilesCountMany.replace("%1", e); return "<p>" + d.htmlEncode(n) + "</p>" }(t.data.ib.data().shownFiles.length, i.app.lang); i.bn().setHtml(a), i.oW("successShowFolderInfo", o) } catch (t) { throw i.oW("failedShowFolderInfo", o), e.ba(t) } i.oW("afterShowFolderInfo", o) } }) }) }() }, gr: function (t) { var n = this; t.on("themeSpace", function (e) { "mainBottom" == e.data.space && (e.data.html += '<div id="status_view" class="view" role="status"></div>') }), t.on("uiReady", function (o) { var i = t.document.getById("status_view"), a = t.ld["filesview.filesview"], r = e.ld.bz(t, "status", n, i, { parent: a }); a.app == t && (a.on("successSelectFile", function (e) { r.oW("requestShowFileInfo", e.data) }), a.on("successRenderFiles", function (e) { var t = { folder: e.data.folder, ib: a }; r.oW("requestShowFolderInfo", t) })), t.on("afterCommandExecDefered", function (e) { if ("RemoveFile" == e.data.name) { var t = { folder: e.data.folder, ib: a }; r.oW("requestShowFolderInfo", t) } }), r.on("afterShowFileInfo", function (e) { this.bn().getText() || r.oW("requestShowFolderInfo", { ib: a, folder: a.data().folder }) }) }) } }) }(), function () { var e = function () { this.fk = [], this.pZ = !1 }; e.prototype.focus = function () { for (var e, t = 0; e = this.fk[t++];)for (var n, o = 0; n = e.items[o++];)if (n.focus) return void n.focus() }; var t = { hW: { iH: { qt: 1, source: 1 }, exec: function (e) { e.dh && (e.dh.pZ = !0, l ? setTimeout(function () { e.dh.focus() }, 100) : e.dh.focus()) } } }; p.add("toolbar", { bM: ["formpanel"], bz: function (n) { var o = function (e, t) { switch (t) { case "rtl" == n.lang.dir ? 37 : 39: for (; (e = e.next || e.toolbar.next && e.toolbar.next.items[0]) && !e.focus;); return e ? e.focus() : n.dh.focus(), !1; case "rtl" == n.lang.dir ? 39 : 37: for (; (e = e.previous || e.toolbar.previous && e.toolbar.previous.items[e.toolbar.previous.items.length - 1]) && !e.focus;); if (e) e.focus(); else { var o = n.dh.fk[n.dh.fk.length - 1].items; o[o.length - 1].focus() } return !1; case 27: return n.focus(), !1; case 13: case 32: return e.lc(), !1 }return !0 }; n.on("themeSpace", function (t) { if ("mainTop" == t.data.space) { n.dh = new e; var i, a = "cke_" + d.getNextNumber(), r = ['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="', a, '"']; r.push(">"), r.push('<span id="', a, '" class="cke_voice_label">', n.lang.toolbar, "</span>"); for (var l = n.dh.fk, s = n.config.toolbar instanceof Array ? n.config.toolbar : n.config["toolbar_" + n.config.toolbar], c = 0; c < s.length; c++) { var u = s[c]; if (u) { var f = "cke_" + d.getNextNumber(), p = { id: f, items: [] }; if (i && (r.push("</div>"), i = 0), "/" !== u) { r.push('<span id="', f, '" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>'); var h = l.push(p) - 1; h > 0 && (p.previous = l[h - 1], p.previous.next = p); for (var m = 0; m < u.length; m++) { var g, v = u[m]; if (g = "-" == v ? C.separator : n.bY.create(v)) { g.canGroup ? i || (r.push('<span class="cke_toolgroup">'), i = 1) : i && (r.push("</span>"), i = 0); var b = g.er(n, r); (h = p.items.push(b) - 1) > 0 && (b.previous = p.items[h - 1], b.previous.next = b), b.toolbar = p, b.onkey = o } } i && (r.push("</span>"), i = 0), r.push('<span class="cke_toolbar_end"></span></span>') } else r.push('<div class="cke_break"></div>') } } n.search && n.search.er(n, r), r.push("</div></div>"), t.data.html += r.join("") } }), n.bD("hW", t.hW) } }) }(), C.separator = { er: function (e, t) { return t.push('<span class="cke_separator"></span>'), {} } }, f.toolbar_Basic = [["Upload", "Refresh"]], f.toolbar_Full = [["Upload", "Refresh", "Settings", "Maximize", "Help"]], f.toolbar = "Full", p.add("tools", { eK: function (e) { this.app = e }, addTool: function (e, t) { var n = "tool_" + d.getNextNumber(); return e = t ? '<div id="' + n + '" class="view tool_panel" tabindex="0" style="display: none;">' + e + "</div>" : '<div id="' + n + '" class="tool" style="display: none;">' + e + "</div>", this.app.layout.dV().getChild(0).appendHtml(e), n }, addToolPanel: function (e) { e = e || ""; var t = this.addTool(e, 1), n = this.app.layout.dV().getChild(0).dB(); return d.mH(n), t }, hideTool: function (e) { this.app.document.getById(e).setStyle("display", "none"), this.app.layout.ea(!0) }, showTool: function (e) { this.app.document.getById(e).removeStyle("display"), this.app.layout.ea(!0) }, removeTool: function (e) { this.hideTool(e), this.app.document.getById(e).remove() } }), function () { p.add("uploadform", { bM: ["formpanel", "button", "csrftokenmanager"], readOnly: !1, md: function () { if (!r.webkit) return !0; var e = document.createElement("input"); return e.setAttribute("type", "file"), !1 === e.disabled }, onLoad: function () { this.md() && function () { var t = e.ld.bX["formpanel.formpanel"]; if (!t) return; t.bh("UploadFileForm", ["requestUploadFileForm"], function (t) { var n = this.app.aV, o = this; this.oW("beforeUploadFileForm", { folder: n, step: 1 }, function (t, n) { if (!(t || e.bF.length > 0 && -1 != "RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ".indexOf(e.bF.substr(0, 9)))) { var i = this.data(), a = n.folder, r = 0; if (a || (this.app.msgDialog("", this.app.lang.UploadNoFolder), r = 1), r || a.acl.fileUpload || (this.app.msgDialog("", this.app.lang.UploadNoPerms), r = 1), r) return this.oW("failedUploadFileForm"), void this.oW("afterUploadFileForm"); this.oW("beforeUploadFileForm", { folder: a, step: 2 }, function (t, n) { try { if ("upload" == i.dc) this.oW("requestUnloadForm", function () { this.app.cS("upload").bR(e.aS), this.oW("successUploadFileForm", n), this.oW("afterUploadFileForm", n) }); else { i.dc && this.oW("requestUnloadForm"); var r = this.tools.qL(), l = this.app.connector.composeUrl("FileUpload", {}, a.type, a), s = function (t, n, o) { return '<form enctype="multipart/form-data" id="upload_form" role="region" action="' + o + '" method="POST" target="' + n + '"><h2 role="heading">' + t.lang.UploadTitle + '</h2><p><input type="file" name="upload" /></p><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="' + t.lang.UploadBtn + '" /><input type="hidden" name="ckCsrfToken" value="' + e.getCsrfToken() + '" /><input type="button" name="cancel" value="' + t.lang.UploadBtnCancel + '" /></div></div></form>' }(this.app, r.$.id, l), c = this; function u(e) { if (e.data.folder && e.data.folder.acl.fileUpload) { var t = o.tools.qO(); o.oW("requestUnloadForm"), o.oW("requestUploadFileForm", function () { var e = o.tools.qO(); t.kB(e), e.remove(), delete o.tools.jj }) } } this.oW("requestLoadForm", { html: s, dq: d.bind(function (t) { return function (t, n) { var o = this, i = (o.data(), 1), a = this.tools.qO(), r = a && a.$.value; if (!r.length) return t.data.preventDefault(!0), this.oW("failedUploadFileForm"), this.oW("afterUploadFileForm"), !1; var l = r.match(/\.([^\.]+)\s*$/)[1]; l && n.getResourceType().isExtensionAllowed(l) ? i = 0 : (t.data.preventDefault(), o.app.msgDialog("", o.app.lang.UploadExtIncorrect)); if (i) return t.data.preventDefault(!0), this.oW("failedUploadFileForm"), this.oW("afterUploadFileForm"), !1; var s = o.app.document.getWindow().$; return s.OnUploadCompleted = function (e, t) { var i = { step: 3, filename: e, folder: n }; if (t && !e) { o.app.msgDialog("", t); var a = o.tools.qB(); a.setStyle("display", "none"), a.getChild(1).setText(""), a.getChild(2).setText(""), o.oW("failedUploadFileForm", i) } else t && o.app.msgDialog("", t), o.app.aV == n && o.app.oW("requestShowFolderFiles", { folder: n, mw: e }), o.oW("requestUnloadForm"), o.oW("successUploadFileForm", i); o.oW("afterUploadFileForm", i); try { delete s.OnUploadCompleted } catch (e) { s.OnUploadCompleted = void 0 } }, e.log("[UPLOADFORM] Starting IFRAME file upload."), this.oW("successUploadFileForm", { step: 2 }), !0 }.call(c, t, a) }), cC: ["submit"], cancelSubmit: 0, gM: 0, command: "upload" }, function () { this.eh.addClass("show_border"), n.step = 1, this.oW("successUploadFileForm", n) }); var f = this.app.ld["filesview.filesview"]; f.on("successShowFolderFiles", u), this.on("requestUnloadForm", function (e) { e.removeListener(), f.removeListener("successShowFolderFiles", u) }) } } catch (t) { throw this.oW("failedUploadFileForm", n), this.oW("afterUploadFileForm", n), e.ba(t) } }) } }) }), t.tools.releaseDomNodes = d.override(t.tools.releaseDomNodes, function (e) { return function () { var t = this; e.apply(t, arguments), delete t.jj, delete t.jc, void 0 !== t.gq && (t.gq.remove(), delete t.gq) } }), t.tools.qB = function () { var e = this; return void 0 === e.jc && (e.jc = e.ib.bn().getChild([0, 2])), e.jc }, t.tools.qO = function () { var e = this; return void 0 === e.jj && (e.jj = e.ib.bn().getChild([0, 1, 0])), e.jj }, t.tools.qL = function () { var e = this; if (void 0 === e.gq) { var t = r.isCustomDomain(), n = "ckf_" + d.getNextNumber(), o = '<iframe id="' + n + '" name="' + n + '" style="display:none" frameBorder="0"' + (t ? " src=\"javascript:void((function(){document.open();document.domain='" + document.domain + "';document.close();})())\"" : "") + ' tabIndex="-1" allowTransparency="true"></iframe>', i = e.ib.app.document.bH(); i.appendHtml(o), e.gq = i.dB() } return e.gq } }() }, gr: function (t) { this.md() && (t.bD("upload", { exec: function (t) { t.oW("requestUploadFileForm", null, function () { var n = t.ld["formpanel.formpanel"].tools.formNode(), o = t.cg.inPopup && l && r.version > 8; o && n && n.submit(), t.cS("upload").bu == e.eV && setTimeout(function () { if (n) { var e = n.eG("input").getItem(0); o || e.on("change", function () { if (e.getValue()) for (var t = 0; t < n.$.elements.length; t++) { var o = n.$.elements[t]; "INPUT" == o.nodeName && "submit" == o.type && o.click() } }), e.$.click ? e.$.click() : e.focus() } }, 0) }) } }), t.bY.add("Upload", e.UI_BUTTON, { label: t.lang.Upload, command: "upload" }), t.on("appReady", function (n) { t.ld["filesview.filesview"].on("successShowFolderFiles", function (n) { var o = this.tools.currentFolder(), i = this.app.cS("upload"); if (o && o.acl.fileUpload) i.bu == e.aY && i.bR(e.aS); else { var a = t.ld["formpanel.formpanel"]; "upload" == a.data().dc && a.oW("requestUnloadForm"), i.bR(e.aY) } }) })) } }) }(), function () { "use strict"; var t, n, o, i, a, r, l, s, c, f, p, h, m, g, v, b, y, w, _, F, k, C, x, E, S, N, D, T, R, W, L, I = /\.([^\.]+)\s*$/, O = /^(jpg|jpeg|gif|png|bmp)$/i, U = /\|/, A = /(\{\{([a-z_]+)\}\})/g, P = function () { return (new Date).getTime() }, M = !1, B = "ckf_plugin_html5upload_" + P(), q = B + "_fallbackAsyncArrayTraverse", j = B + "_fallbackShouldFallback", H = B + "_fallbackOnFileBlobReady", z = B + "_fallbackOnXMLHttpRequestReady", K = B + "_fallbackGetCsrfToken", V = "CKFinder._['" + B + "']['{{application_name}}']", G = "var _files = ((('undefined' === typeof files) ? (this.files || (event.dataTransfer && event.dataTransfer.files)) : files) || []);setTimeout(function () {" + V + "['" + q + "'](_files, function (file, index, files) {var formData = new FormData(),uploadBlob,xhr = new XMLHttpRequest();if (file && " + V + "['" + j + "']()) {formData.append('upload', file);formData.append('ckCsrfToken', " + V + "['" + K + "']());uploadBlob = " + V + "['" + H + "'](file, formData);" + V + "['" + z + "'](file, uploadBlob, xhr, xhr.send.bind(xhr, formData), xhr.abort.bind(xhr));} else {return false;}});}, 500);", Y = '<div id="ckf_upload_form" ondrop="' + G + '"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span></span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span></div></div><div class="ckf_uploadButtons"><input type="file" {{input_multiple}} id="ckf_fileInput" onchange="' + G + '"><a class="cke_dialog_ui_button" href="javascript:void(0);"><span class="cke_dialog_ui_button" id="ckf_addFiles">{{lang_upload_add_files}}</span></a><br><a class="cke_dialog_ui_button cke_dialog_ui_button_ok" href="javascript:void(0);" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">{{lang_close_button}}</span></a></div></div></div>'; function X(e, n) { if (x() && !n.config.readOnly) { var i = new t(n), a = new b(n), l = new y(n, a), s = new r(e, n, a, l), d = new o(e, n, a, l, s), c = new h(e, n, a, l, s), u = new g(n, a, l); s.tS(window, B, q, j, H, z, K), l.tJ(n.config.maxSimultaneousUploads), l.uI = function (e) { s.ux = e }, u.ns(c), a.ns(u), l.ns(i), l.ns(u), l.ns(a), S(e, n, "filesview.filesview", function (t, n, o) { N(e, t, d, s, a, l, u, o) }), S(e, n, "formpanel.formpanel", function (t, n, o) { D(e, t, d, s, a, l, u, o) }), setInterval(function () { l.sX() && l.tx() }, 1e3) } } k = Object.hasOwnProperty("create") ? Object.create : function (e) { return M = !0, e }, F = function (e, t, n) { var o, i = 0; n || (n = null), t = t.bind(n), (o = function () { for (var n, a = 0, r = P(); ;) { if (!(n = e.item ? e.item(i) : e[i]) || !1 === t(n, i, e)) return; if (i += 1, (a += 1) >= 10 && P() - r > 10) return setTimeout(o, 10) } })() }, C = function (e) { return function (t) { var n; for (n in e) e.hasOwnProperty(n) && (t[n] = e[n]); return t } }, (i = function () { this.uU = [] }).prototype.mD = function (e) { var t = this; if (!(e instanceof i)) throw new Error("Invalid argument: expected EventDispatcher."); e.sy().forEach(function (e) { t.ns(e) }) }, i.mixin = C(i.prototype), i.prototype.ns = function (e) { if (!(e instanceof a)) throw new Error("Invalid argument: expected EventSubscriber."); if (this.sL(e)) throw new Error("Logic error: same EventSubscriber is added twice to the EventDispatcher"); this.uU.push(e) }, i.prototype.dispatch = function (e, t) { this.uU.forEach(function (n) { var o = n.tc(); o.hasOwnProperty(e) && n[o[e]].apply(n, t) }) }, i.prototype.sy = function (e) { return e ? this.uU.filter(function (t) { return t.sV(e) }) : this.uU.slice(0) }, i.prototype.sL = function (e) { return -1 !== this.uU.indexOf(e) }, i.prototype.removeSubscriber = function (e) { var t = this.uU.indexOf(e); if (!(e instanceof a)) throw new Error("Invalid argument: expected EventSubscriber."); if (-1 === t) throw new Error("Logic error: this EventSubscriber is not registered"); this.uU.splice(t, 1) }, (a = function () { }).prototype.sV = function (e) { return this.tc().hasOwnProperty(e) }, a.prototype.tc = function () { throw new Error("This method needs to be overriden in child class.") }, (t = function () { a.call(this) }).prototype = k(a.prototype), t.prototype.tc = function () { var e = {}; return e[y.qM] = "tF", e }, t.prototype.tF = function (e, t) { var n = t.targetFolder, o = e.connector.composeUrl("FileUpload", { response_type: "txt" }, n.type, n); t.bT.open("POST", o) }, (s = function (e, t, n, o) { var i = this; a.call(i), i.ckFinder = e, i.application = t, i.ty = n, i.ub = o }).prototype = k(a.prototype), (p = function (e) { this.tw(e) }).mixin = C(p.prototype), p.prototype.tj = function () { if (!this.so) throw new Error("Form panel widget is not set."); return this.so }, p.prototype.sX = function () { return !!this.so }, p.prototype.uV = function (e) { }, p.prototype.tC = function () { }, p.prototype.tw = function (e) { var t = this; !t.so && e ? t.uV(e) : t.so && e ? (t.tC(), t.uV(e)) : t.so && !e && t.tC(), t.so = e }, (o = function (e, t, n, o) { s.call(this, e, t, n, o), p.call(this) }).prototype = k(s.prototype), o.prototype = p.mixin(o.prototype), o.prototype.mE = function (e) { var t = this, n = e.layout.pn(), o = n.getDocument(), i = t.sS.bind(t), a = t.ss.bind(t), r = t.rs.bind(t); o.on("drop", r), o.on("dragover", a), n.on("dragover", i), t.domElementListeners || (t.domElementListeners = []), t.domElementListeners.push({ evt: "drop", fO: r, bi: o }, { evt: "dragover", fO: a, bi: o }, { evt: "dragover", fO: i, bi: n }) }, o.prototype.ss = function (e) { var t = e.data, n = t.$.dataTransfer; if (n) { n.dropEffect = "none"; try { n.effectAllowed = "none" } catch (e) { } this.ckFinder.env.webkit && t.preventDefault() } }, o.prototype.rs = function (e) { var t = e.data.$.dataTransfer; t && t.files && t.files.length > 0 && (this.ub.uG(t.files), e.data.preventDefault()) }, o.prototype.uV = function (e) { var t = this, n = e.bn().getDocument(), o = t.sS.bind(t), i = n.getById("ckf_upload_form"); t.domElementListeners || (t.domElementListeners = []), t.domElementListeners.length > 0 && t.tC(), t.mE(t.application), i.on("dragover", o), t.domElementListeners.push({ evt: "dragover", fO: o, bi: i }) }, o.prototype.sS = function (e) { var t = e.data, n = t.$.dataTransfer; n && (n.files && n.files.length || n.types && (n.types.contains && n.types.contains("Files") || n.types.indexOf && -1 !== n.types.indexOf("Files")) ? (n.dropEffect = "copy", t.stopPropagation()) : n.dropEffect = "none", t.preventDefault()) }, o.prototype.tC = function () { var e, t; for (e = 0; e < this.domElementListeners.length; e += 1)(t = this.domElementListeners[e]).bi.removeListener(t.evt, t.fO); delete this.domElementListeners }, (r = function (e, t, n, o) { s.call(this, e, t, n, o), this.pJ = {}, this.ux = !0 }).prototype = k(s.prototype), r.prototype.lT = function (e) { var t, n; for (t in this.pJ) if (this.pJ.hasOwnProperty(t)) for (n = 0; n < e.length; n += 1)e[n] === this.pJ[t] && delete this.pJ[t] }, r.prototype.ti = function (e, t) { if (this.ux) return new m(e, new f(t)) }, r.prototype.uK = function (e, t, o, i, a) { var r, l = this; l.ux && (l.ub.sX() ? ((r = new n(l.application, l.application.aV, t, i, a)).ns(l.ty), r.nv(o), t.ns(r), l.ub.expectedFiles -= 1, l.ub.tL(l.application, r)) : a()) }, r.prototype.tS = function (t, n, o, i, a, r, l) { var s = this, d = {}; d[o] = F, d[i] = s.shouldFallback.bind(s), d[a] = s.ti.bind(s), d[r] = s.uK.bind(s), d[l] = e.getCsrfToken, t.CKFinder.hasOwnProperty("_") || (t.CKFinder._ = {}), t.CKFinder._.hasOwnProperty(n) || (t.CKFinder._[n] = {}), t.CKFinder._[n][s.application.name] = d }, r.prototype.shouldFallback = function () { return !this.ub.shouldStopProcessing && this.ux }, (l = function () { i.call(this) }).prototype = k(i.prototype), l.qQ = "xhr.header", l.prototype.tn = function (e, t) { throw new Error("This method needs to be overriden in child class.") }, ((c = function (e) { l.call(this), this.file = e }).prototype = k(l.prototype)).tn = function (t, n) { var o = new FormData; o.append("upload", this.file), o.append("ckCsrfToken", e.getCsrfToken()), n(o) }, (f = function (e) { l.call(this), this.formData = e }).prototype = k(l.prototype), f.prototype.tn = function (e, t) { t(this.formData) }, (h = function (e, t, n, o, i) { s.call(this, e, t, n, o), this.qJ = i }).prototype = k(s.prototype), h.prototype.tc = function () { var e = {}; return e[g.qN] = "onFileInputChange", e }, h.prototype.onFileInputChange = function (e, t) { this.ub.uG(t) && this.qJ.lT(t) }, (m = function (e, t) { this.sz = t, this.file = e }).prototype = k(i.prototype), m.prototype.mD = function (e) { return this.sz.mD(e) }, m.prototype.ns = function (e) { return this.sz.ns(e) }, m.prototype.dispatch = function (e, t) { return this.sz.dispatch(e, t) }, m.prototype.bZ = function () { return this.file }, m.prototype.wv = function () { var e = "", t = this.getFileName(); return I.test(t) ? (e = t.match(I))[1].toLowerCase() : e }, m.prototype.getFileName = function () { return this.file.name }, m.prototype.getFileSize = function () { return this.file.size }, m.prototype.sy = function (e) { return this.sz.sy(e) }, m.prototype.tn = function (e) { this.sz.tn(this.file, e) }, (v = function () { }).prototype = k(a.prototype), v.pH = "abort", v.rj = "error", v.qk = "load", v.rc = "progress", v.prototype.tc = function () { var e = {}; return e[v.pH] = "onAbort", e[v.rj] = "onError", e[v.qk] = "onLoad", e[v.rc] = "onProgress", e }, v.prototype.onAbort = function (e) { }, v.prototype.onError = function (e, t) { }, v.prototype.onLoad = function (e) { }, v.prototype.onProgress = function (e, t, n, o) { }, (b = function (e) { i.call(this), v.call(this), this.application = e, this.tM = [] }).prototype = k(v.prototype), b.prototype = i.mixin(b.prototype), b.prototype.mC = function () { var e = this.tM.concat(); this.tM = [], F(e, function (e) { e && e.sY() && e.lN() }) }, b.prototype.mU = function (e) { this.tM.push(e) }, b.prototype.nU = function (e) { var t = this.tM.indexOf(e); if (-1 === t) throw new Error("Given upload supervisor is not attached."); this.tM.splice(t, 1) }, b.prototype.tc = function () { var e = v.prototype.tc.call(this); return e[w.pN] = "uc", e[y.qM] = "tF", e }, b.prototype.sj = function (e) { var t; for (t = 0; t < this.tM.length; t += 1)if (e === this.tM[t].uploadBlob.bZ()) return !0; return !1 }, b.prototype.sB = function (e) { return this.tM.indexOf(e) >= 0 }, b.prototype.tF = function (e, t) { this.mU(t) }, b.prototype.uc = function (e) { this.sB(e) && this.nU(e) }, (g = function (e, t, n) { var o = this; i.call(o), p.call(o), v.call(o), o.application = e, o.attachedUploadViewsNumber = 0, o.wU = [], o.sa = 0, o.sO = 0, o.tI = 0, o.totalFiles = 0, o.ty = t, o.ub = n, o.tM = [] }).prototype = k(v.prototype), g.prototype = i.mixin(g.prototype), g.prototype = p.mixin(g.prototype), g.prototype.mU = b.prototype.mU, g.prototype.nU = b.prototype.nU, g.prototype.sB = b.prototype.sB, g.prototype.tC = o.prototype.tC, g.qN = "event.file.input.change", g.ue = 300, g.prototype.mC = function () { var e, t = this; for (e = 0; e < t.tM.length; e += 1)t.tM[e].removeSubscriber(t); t.ty.mC(), t.ub.or(), t.attachedUploadViewsNumber = 0, t.tM = [], t.ud(t.application), t.ma(), t.remove() }, g.prototype.tc = function () { var e = {}; return e[y.qM] = "tF", e[w.pN] = "uc", e[_.EVENT_DOM_ATTACHED] = "onUploadViewDomAttached", e[_.EVENT_DOM_REMOVED] = "onUploadViewDomRemoved", e[_.pM] = "onFolderRefreshRequest", e }, g.prototype.onFileInputChange = function (e) { var t = e.jN.$, n = t.files; let o = [], i = 0; $.each(n, function () { let e = Date.now(), t = Math.random(), a = n[i].name.replace(".", "-" + e + t + "."), r = new File([n[i]], a, { type: n[i].type, lastModified: n[i].lastModified }); o.push(r), i++ }), console.log(o), n.length < 1 || this.dispatch(g.qN, [t, o]) }, g.prototype.onFolderRefreshRequest = function (e, t) { this.wU.push({ folder: e, mw: t }) }, g.prototype.uV = function (e) { var t, n = this, o = e.bn().getDocument(), i = o.getById("ckf_addFiles"), a = o.getById("ckf_cancelUpload"), r = o.getById("ckf_fileInput"), l = o.getById("ckf_globalUploads"), s = n.mC.bind(n), d = n.onFileInputChange.bind(n); l = l.getChild([0, 0]), n.domElement = { addFilesButton: i, cancelButton: a, countSpan: l.getChild(0), fileInput: r, ni: l.getChild([2, 0]), np: l.getChild(4), mz: l.getChild(3), totalSizeSpan: l.getChild(1) }, t = n.onDomElementAddFilesClickListener.bind(n), i.on("click", t), a.on("click", s), r.on("change", d), n.domElementListeners || (n.domElementListeners = []), n.domElementListeners.push({ evt: "click", fO: t, bi: i }, { evt: "click", fO: s, bi: a }, { evt: "change", fO: d, bi: r }), n.shouldBeClickedAutomatically && (n.shouldBeClickedAutomatically = !1, t()) }, g.prototype.onDomElementAddFilesClickListener = function (e) { this.domElement.fileInput.$.click() }, g.prototype.onUploadPanelUploadStartClick = function (e, t, n) { this.shouldBeClickedAutomatically = !0, n(e) }, g.prototype.uH = function (e) { this.domElement.cancelButton.getFirst().setHtml(e.lang.UploadBtnCancel) }, g.prototype.ud = function (e) { var t = this; t.domElement.cancelButton.getFirst().setHtml(e.lang.CloseBtn), t.sa = 0, t.sO = 0, t.tI = 0, t.totalFiles = 0 }, g.prototype.onUploadViewDomAttached = function (e) { this.attachedUploadViewsNumber += 1 }, g.prototype.onUploadViewDomRemoved = function (e) { var t = this; t.attachedUploadViewsNumber -= 1, t.ub.expectedFiles < 1 && t.attachedUploadViewsNumber < 1 && (t.attachedUploadViewsNumber = 0, t.ub.expectedFiles = 0, t.remove()) }, g.prototype.tF = function (e, t) { var n = this, o = t.uploadBlob.bZ(), i = n.tj(), a = new _(e, t, o); t.ns(n), t.ns(a), a.ns(n), a.tw(i), n.mU(t), n.tI += o.size, n.to(n.tI), n.totalFiles += 1, n.tm(n.totalFiles), 1 === n.totalFiles && n.uH(e) }, g.prototype.uc = function (e) { var t = this, n = t.ub.expectedFiles, o = e.uploadBlob.bZ(); t.sB(e) && t.nU(e), n < 1 && t.tM.length < 1 ? (t.ma(), t.ud(t.application)) : (t.sa += o.size, t.sO += 1), t.updateUploadProgress(t.sa, t.tI, t.sO, t.totalFiles, n), t.to(t.tI), t.tm(t.totalFiles) }, g.prototype.ma = function () { var e, t, n = this, o = n.application.aV; for (e = 0; e < n.wU.length; e += 1)if (n.wU[e].folder === o) { t = n.wU[e]; break } n.wU = [], t && n.application.oW("requestShowFolderFiles", t) }, g.prototype.remove = function () { this.tj().oW("requestUnloadForm") }, g.prototype.setUploadCommand = function (e, t) { var n, o, i, a; if (t.pW && !(t.pW.length < 1)) for (this.domElementListeners || (this.domElementListeners = []), i = function (e, n) { this.onUploadPanelUploadStartClick(n, t, e) }, a = t.pW, o = 0; o < a.length; o += 1)a[o].click && (n = a[o].click, a[o].click = i.bind(this, n)) }, g.prototype.tD = function (e, t) { this.updateLoadedPercentage(e, t) }, g.prototype.updateLoadedPercentage = function (e, t, n) { var o; (o = t > 0 ? Math.round(e / t * 100) : 0) < 0 && (o = 0), (o > 100 || isNaN(o)) && (o = 100), this.domElement.ni.setStyle("width", o + "%"), n = n ? " - " + n.trim() : "", this.updateStatusText(this.application.lang.UploadUploaded.replace("!n", o) + n) }, g.prototype.nR = function (e, t) { var n; t < 1 || (n = e / 1024 / t, this.domElement.np.setText(d.formatSpeed(n, this.application.lang))) }, g.prototype.updateStatusText = function (e) { this.domElement.mz.setText(e) }, g.prototype.to = function (e) { this.domElement.totalSizeSpan.setText(this.application.lang.UploadTotalSize + " " + d.formatSize(e / 1024, this.application.lang)) }, g.prototype.tm = function (e) { this.domElement.countSpan.setText(this.application.lang.UploadTotalFiles + " " + e + " ") }, g.prototype.updateUploadProgress = function (e, t, n, o, i) { var a, r = e / t, l = n / (o + i); a = CKFinder.tools.formatSize(e / 1024, this.application.lang), this.updateLoadedPercentage(1 * r + 3 * l, 4, a) }, (y = function (e, t) { var n = this; i.call(n), p.call(n), v.call(n), n.application = e, n.lQ = 10, n.expectedFiles = 0, n.shouldStopProcessing = !1, n.tM = [], n.ty = t }).prototype = k(v.prototype), y.prototype = i.mixin(y.prototype), y.prototype = p.mixin(y.prototype), y.qM = "upload.supervisor.ready", y.prototype.or = function () { this.expectedFiles = 0, this.shouldStopProcessing = !0, this.tM = [] }, y.prototype.nZ = function () { return this.tM.shift() }, y.prototype.qg = function (e) { this.sj(e.file) || this.tM.push(e) }, y.prototype.tc = function () { var e = {}; return e[w.pU] = "tH", e[w.pN] = "uc", e }, y.prototype.getUploadCommand = function () { if (!this.uploadCommand) throw new Error("Upload command is not set."); return this.uploadCommand }, y.prototype.sj = function (e) { var t; for (t = 0; t < this.tM.length; t += 1)if (e === this.tM[t].uploadBlob.bZ()) return !0; return !1 }, y.prototype.tH = function () { this.tx() }, y.prototype.uc = function () { this.lQ += 1, this.tx() }, y.prototype.uG = function (t) { var n, o, i = this.sX(), a = this, r = this.getUploadCommand(); if (!this.application.aV) return !1; if (this.expectedFiles += t.length, this.shouldStopProcessing = !1, r.bu !== e.aY) { if (t.length < 1) return !1; try { t[0], this.uI && this.uI(!1) } catch (e) { return !1 } finally { r.bu !== e.eV && (i = !1, r.exec(this.application)) } return o = F.bind(null, t, function (e) { if (a.shouldStopProcessing) return a.expectedFiles = 0, a.shouldStopProcessing = !1, !1; a.expectedFiles -= 1, a.tA(new m(e, new c(e))) }), i ? (o(), !0) : (n = setInterval(function () { a.sX() && (clearInterval(n), o()) }, 100), !0) } }, y.prototype.tA = function (e) { var t, n, o = this; e.getFileName().length < 1 ? o.tj().oW("failedUploadFile") : ((n = new w(o.application, o.application.aV, e)).ns(o.ty), e.ns(n), t = new XMLHttpRequest, n.nv(t), o.tL(o.application, n)) }, y.prototype.tL = function (e, t) { var n = this; n.dispatch(y.qM, [n.application, t]), t.ns(n), n.lQ < 1 ? n.qg(t) : n.tv(e, t) }, y.prototype.tx = function () { for (var e = this; e.tM.length > 0 && e.lQ > 0;)e.tv(e.application, e.nZ()) }, y.prototype.tJ = function (e) { this.lQ = e }, y.prototype.setUploadCommand = function (e, t) { this.uploadCommand = t }, y.prototype.tv = function (e, t) { this.lQ -= 1, t.mW() }, (w = function (e, t, n) { var o = this; i.call(o), v.call(o), o.application = e, o.isAborted = !1, o.sa = 0, o.oS = 0, o.targetFolder = t, o.uploadBlob = n }).prototype = k(v.prototype), w.prototype = i.mixin(w.prototype), w.pU = "start", w.pN = "stop", w.prototype.lN = function () { if (!this.sY()) throw new Error("Upload is not in progress."); this.isAborted = !0, this.bT.abort() }, w.prototype.ns = function (e) { if (!(e instanceof v)) throw new Error("Invalid argument: expected UploadProgressListener."); i.prototype.ns.call(this, e) }, w.prototype.ta = function (e) { var t = this.wv(), n = e.aV.getResourceType(); return !(t && !n.isExtensionAllowed(t)) || (this.onError(e.lang.UploadExtIncorrect), !1) }, w.prototype.wN = function (e) { var t, n = this.wv(), o = this.getFileSize(), i = parseInt(e.config.uploadMaxSize, 10), a = e.aV.getResourceType(); return t = parseInt(a.maxSize, 10), 0 === o ? (this.onError(e.lang.Errors[202]), !1) : !(i && o > i || t && o > t && (e.config.uploadCheckImages || !O.test(n))) || (this.onError(e.lang.Errors[203]), !1) }, w.prototype.tl = function (e) { return !!this.ta(e) && this.wN(e) }, w.prototype.nv = function (e) { var t, n = this; if (n.sY()) throw new Error("Upload is already started."); e.addEventListener(v.pH, n.onAbort.bind(n)), e.addEventListener(v.rj, n.onError.bind(n)), e.addEventListener(v.qk, n.onLoad.bind(n)), (t = e.upload) && t.addEventListener(v.rc, n.onProgress.bind(n)), n.bT = e, n.isAborted = !1 }, w.prototype.tK = function () { return this.oS }, w.prototype.bZ = function () { return this.uploadBlob.bZ() }, w.prototype.wv = function () { return this.uploadBlob.wv() }, w.prototype.getFileName = function () { return this.uploadBlob.getFileName() }, w.prototype.getFileSize = function () { return this.uploadBlob.getFileSize() }, w.prototype.tc = function () { var e = v.prototype.tc.call(this); return e["xhr.header"] = "tO", e }, w.prototype.sY = function () { return !this.isAborted && !!this.bT }, w.prototype.onAbort = function (e) { this.dispatch(v.pH, [this.uploadBlob]), this.onStop() }, w.prototype.onError = function (e) { e || (e = this.application.lang.UploadUnknError), this.dispatch(v.rj, [this.uploadBlob, e]), this.onStop() }, w.prototype.tO = function (e, t) { if (!this.bT) throw new Error("Request is not initialized"); this.bT.setRequestHeader(e, t) }, w.prototype.onLoad = function (e) { var t, n, o, i = this; if (200 !== i.bT.status) return i.onError(); t = (o = e.target.responseText.split(U, 2))[0], n = o[1], !t.length && n ? i.dispatch(v.rj, [i.uploadBlob, n]) : i.dispatch(v.qk, [i.uploadBlob, t, n]), i.onStop() }, w.prototype.onProgress = function (e) { var t = this; e.lengthComputable && (t.sa = e.target.kC = e.loaded, t.dispatch(v.rc, [t, t.uploadBlob, t.sa, t.tK()])) }, w.prototype.onStop = function () { var e = this; delete e.bT, e.isAborted = !0, e.oS = 0, e.dispatch(w.pN, [e, e.uploadBlob]) }, w.prototype.mW = function () { var e = this, t = this.bT; if (!this.tl(this.application)) return !1; this.uploadBlob.tn(function (n) { if (e.dispatch(w.pU, [e.uploadBlob]), t) { e.oS = P(); try { e.bT.send(n) } catch (t) { e.onStop() } } else e.onStop() }) }, (n = function (e, t, n, o, i) { w.call(this, e, t, n), this.isAborted = !1, this.tG = o, this.uz = i }).prototype = k(w.prototype), n.prototype.lN = function () { if (!this.sY()) throw new Error("Upload is not in progress."); this.isAborted = !0, this.uz() }, n.prototype.mW = function () { var e = this; if (!e.tl(e.application)) return !1; e.isAborted = !1, e.oS = P(), e.dispatch(w.pU, [e.uploadBlob]); try { e.tG() } catch (t) { try { e.uz() } catch (e) { throw e } finally { e.onStop() } } }, (_ = function (e, t, n) { var o = this; i.call(o), p.call(o), v.call(o), o.application = e, o.file = n, o.isDomAttached = !1, o.isDomRemoved = !1, o.shouldBeRemovedOnStop = !0, o.targetFolder = t.targetFolder, o.ts = t }).prototype = k(v.prototype), _.prototype = i.mixin(_.prototype), _.prototype = p.mixin(_.prototype), _.prototype.tD = g.prototype.updateLoadedPercentage, _.prototype.nR = g.prototype.nR, _.prototype.updateStatusText = g.prototype.updateStatusText, _.EVENT_DOM_ATTACHED = "event.dom.attached", _.EVENT_DOM_REMOVED = "event.dom.removed", _.pM = "event.folder.refresh.request", _.prototype.tc = function () { var e = v.prototype.tc.call(this); return e[w.pN] = "onStop", e }, _.prototype.onAbort = function (e) { var t = this; t.ts && (t.ts.sY() && (t.ts.lN(), t.ts.onStop()), t.onStop()) }, _.prototype.onError = function (e, t) { this.tE(t) }, _.prototype.uV = function (e) { var t = this; if (!t.isDomAttached) { var n, o = e.bn(), i = new u("div", o.getDocument()); i.setAttribute("class", "ckf_upload_info"), i.setHtml(L(t.application, e, t.file, '<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>{{file_name}}</span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span><div class="ckf_outcome"></div></div></div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">{{lang_cancel_button}}</span></a></div>')), o.dB().append(i), t.application.cg.resizeFormPanel(), n = i.getChild([0, 0]), t.domElement = { button: i.getChild([1, 0]), container: i, mI: n.getChild(5), ni: n.getChild([2, 0]), mx: n.getChild(1), np: n.getChild(4), mz: n.getChild(3) }, t.domElement.button.on("click", t.uk.bind(t, t.ts)), t.isDomAttached = !0, t.dispatch(_.EVENT_DOM_ATTACHED, [t]) } }, _.prototype.onLoad = function (e, t, n) { this.tN(n), this.dispatch(_.pM, [this.targetFolder, t]) }, _.prototype.onProgress = function (e, t, n, o) { this.tD(n, this.file.size), this.nR(n, o) }, _.prototype.onStop = function () { this.shouldBeRemovedOnStop && this.remove() }, _.prototype.uk = function (e, t) { this.shouldBeRemovedOnStop = !0, e.sY() ? e.lN() : this.onAbort(e.uploadBlob) }, _.prototype.remove = function () { var e = this; e.isDomRemoved || (e.domElement.container.remove(), e.application.cg.resizeFormPanel(), e.isDomRemoved = !0, e.dispatch(_.EVENT_DOM_REMOVED, [e])) }, _.prototype.tE = function (e) { var t = this.tj(); this.tp(e), this.domElement.container.addClass("ckf_FileError"), this.application.cg.resizeFormPanel(), t.oW("failedUploadFile", e) }, _.prototype.tp = function (e) { var t = this; e && (t.shouldBeRemovedOnStop = !1), t.domElement.ni.getParent().hide(), t.domElement.mz.hide(), t.domElement.np.hide(), t.domElement.mI.setText(e), t.domElement.button.getFirst().setHtml(t.application.lang.CloseBtn), t.domElement.button.addClass("cke_dialog_ui_button_ok"), t.domElement.button.removeClass("cke_dialog_ui_button_cancel") }, _.prototype.tN = function (e) { var t = this.tj(); e ? (this.tp(e), this.application.cg.resizeFormPanel()) : this.remove(), t.oW("successUploadFile", e) }, x = function () { return !M && "undefined" != typeof FormData }, E = function (t) { var n; return !(!(n = t.env ? t : e).env.mac && n.env.safari) }, S = function (e, t, n, o) { var i; i = setInterval(function () { t.ld.hasOwnProperty(n) && (clearInterval(i), o(t, n, t.ld[n])) }, 10) }, N = function (e, t, n, o, i, a, r, l) { var s = l.bn(); n.sX() || n.mE(t), s.hasAttribute("ondrop") || s.setAttribute("ondrop", W(t, G)) }, D = function (e, t, n, o, i, a, r, l) { var s = W(t, Y), d = t.cS("upload"); a.setUploadCommand(t, d), r.setUploadCommand(t, d), t.cg.replaceUploadForm(s, function () { T(e, t, n, o, i, a, r, l) }, !0, 11) }, T = function (e, t, n, o, i, a, r, l) { n.tw(l), r.tw(l), a.tw(l) }, R = function (e, t) { return e.replace(A, function (e, n, o) { return t[o] }) }, W = function (e, t) { var n = { application_name: d.escapeHtml(e.name), input_multiple: E(e) ? 'multiple="multiple"' : "", lang_upload_add_files: e.lang.UploadAddFiles, lang_close_button: e.lang.CloseBtn }; return R(t, n) }, L = function (e, t, n, o) { var i = { file_name: d.escapeHtml(n.name), lang_cancel_button: e.lang.UploadBtnCancel }; return R(o, i) }, function (e) { var t; X.bind ? t = X.bind(this, e) : (M = !0, t = X), e.plugins.add("html5upload", { bM: ["uploadform", "csrftokenmanager"], bz: t }) }(e) }(), function () { function t(e, t, n, o) { e.execCommand(o ? "moveFilesToFolder" : "copyFilesToFolder", { files: n, destination: t, fileCallback: function (e, t) { for (var n = d.indexOf(e.basketFiles, t), o = 1, i = e.basketFiles.length - 1, a = n; a < i; a++)e.basketFiles[a] ? e.basketFiles[a] = e.basketFiles[a + o] : o++; e.basketFiles.length = Math.max(i, 0) } }) } p.add("basket", { bM: ["foldertree", "filesview", "contextmenu"], readOnly: !1, basketToolbar: [["clearBasket", { label: "BasketClear", command: "TruncateBasket", disableEmpty: !0 }]], basketFileContextMenu: [["mu", { label: "BasketRemove", command: "RemoveFileFromBasket", group: "file3" }], ["hN", { label: "BasketOpenFolder", command: "OpenFileFolder", group: "file1" }]], bz: function (n) { var o = window.top[e.nd + "cation"][e.jG + "st"], i = [], a = function () { for (var t = n.basketFiles.length ? e.aS : e.aY, o = 0, a = i.length; o < a; o++)n.cS(i[o]).bR(t) }; n.bD("FolderPasteCopyBasket", { exec: function (e) { var n = e.aV; n && t(e, n, e.basketFiles) } }), n.bD("FolderPasteMoveBasket", { exec: function (n) { if (e.bF && 1 == e.bs.indexOf(e.bF.substr(1, 1)) % 5 && e.lS(o) != e.lS(e.ed) || e.bF && e.bF.substr(3, 1) != e.bs.substr(9 * (e.bs.indexOf(e.bF.substr(0, 1)) + e.bs.indexOf(e.bF.substr(2, 1))) % (e.bs.length - 1), 1)) n.msgDialog("", "This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://cksource.com/ckfinder'>CKFinder web site</a> to obtain a valid license."); else { var i = n.aV; if (!i) return; t(n, i, n.basketFiles, !0), a() } } }), n.eU({ folderPasteMoveBasket: { label: n.lang.BasketMoveFilesHere, command: "FolderPasteMoveBasket", group: "folder1" }, folderPasteCopyBasket: { label: n.lang.BasketCopyFilesHere, command: "FolderPasteCopyBasket", group: "folder1" } }); var r = n.basket = new e.aL.BasketFolder(n); n.basketFiles = [], n.on("uiReady", function (t) { var o = n.ld["foldertree.foldertree"]; o.on("beforeAddFolder", function (e) { e.removeListener(), e.data.folders.push(r) }), o.on("beforeDroppable", function (t) { if (t.data.target instanceof e.aL.BasketFolder && (t.data.source instanceof e.aL.File && (t.data.source = [t.data.source]), d.isArray(t.data.source) && t.data.source.length && t.data.source[0] instanceof e.aL.File)) { for (var o, i, a = t.data.source, r = 0, l = 0, s = a.length; l < s; l++) { for (o = 0, i = n.basketFiles.length; o < i; o++)if (a[l].isSameFile(n.basketFiles[o])) { r = 1; break } r || n.basketFiles.push(a[l]) } t.cancel(1) } }), o.on("beforeContextMenu", function (t) { var o; t.data.folder instanceof e.aL.BasketFolder ? (delete (o = t.data.bj).renameFolder, delete o.removeFolder, delete o.createSubFolder, o.qT = n.basketFiles.length ? e.aS : e.aY) : ((o = t.data.bj).folderPasteCopyBasket = n.basketFiles.length ? e.aS : e.aY, o.folderPasteMoveBasket = n.basketFiles.length ? e.aS : e.aY) }), o.on("beforeKeyboardNavigation", function (t) { if (t.data.folder instanceof e.aL.BasketFolder) { var n = t.data.db(); 46 != n && 113 != n || t.cancel() } }), n.bD("TruncateBasket", { exec: function (e) { e.basketFiles.length && e.fe("", e.lang.BasketTruncateConfirm, function () { e.basketFiles.length = 0, e.oW("requestSelectFolder", { folder: e.basket }) }) } }), n.bD("RemoveFileFromBasket", { exec: function (e) { var t = e.ld["filesview.filesview"].tools.oO(); t && t.length && e.fe("", 1 == t.length ? e.lang.BasketRemoveConfirm.replace("%1", d.escapeHtml(t[0].name)) : e.lang.BasketRemoveConfirmMultiple.replace("%1", t.length), function () { for (var n, o = 0, i = t.length; o < i; o++)for (n = 0; n < e.basketFiles.length; n++)if (t[o].isSameFile(e.basketFiles[n])) { e.basketFiles.splice(n, 1); break } e.oW("requestSelectFolder", { folder: e.basket }), a() }) } }), n.bD("OpenFileFolder", { exec: function (e) { var t = e.ld["filesview.filesview"].data().cG; t && e.oW("requestSelectFolder", { folder: t.folder }) } }), n.eU && n.gp("truncateBasket", { label: n.lang.BasketClear, command: "TruncateBasket", group: "folder" }); var l = [], s = n.ld["filesview.filesview"], c = []; s.on("beforeContextMenu", function (t) { if (t.data.folder instanceof e.aL.BasketFolder) { var n = t.data.bj; delete n.renameFile, delete n.deleteFile, delete n.deleteFiles, n.mu = e.aS, n.hN = e.aS; for (var o = 0; o < c.length; o++)n[c[o]] = e.aS } }), s.on("beforeShowFolderFiles", function (t) { if (t.data.folder instanceof e.aL.BasketFolder) { t.cancel(1), this.app.oW("requestRenderFiles", { files: n.basketFiles, mj: n.lang.BasketEmpty, eu: 1, folder: t.data.folder }), this.app.oW("requestRepaintFolder", t.data), function (e) { for (var t in e.plugins) if (e.plugins.hasOwnProperty(t) && (t = e.plugins[t]).basketToolbar) for (var n = 0; n < t.basketToolbar.length; n++) { var o = t.basketToolbar[n]; if (!e.bY._.items[o[0]]) { var a = d.deepCopy(o[1]), r = a.command; if (!a.command) { var l = o[1].onClick; r = "BasketToolbar_" + o[0], e.bD(r, { exec: function (e) { l(e.cg) } }), a.command = r } var s = d.capitalize(t.name); "function" == typeof a.label ? a.label = a.label.call(t, e.cg) : e.lang[t.name] && e.lang[t.name][a.label] ? a.label = e.lang[t.name][a.label] : e.lang[s] && e.lang[s][a.label] ? a.label = e.lang[s][a.label] : e.lang[a.label] && (a.label = e.lang[a.label]), a.basketToolbar = 1, a.disableEmpty && i.push(r), e.bY.add(o[0], CKFinder._.UI_BUTTON, a) } } }(this.app), function (e) { if (!e.eU) return; for (var t in e.plugins) if (e.plugins.hasOwnProperty(t) && (t = e.plugins[t]).basketFileContextMenu) for (var n = 0; n < t.basketFileContextMenu.length; n++) { var o = t.basketFileContextMenu[n]; if (!e._.iG[o[0]]) { var a = d.deepCopy(o[1]); if (!a.command) { var r = "BasketContextMenu_" + o[0], l = o[1].onClick; e.bD("BasketContextMenu_" + o[0], { exec: function (e) { l(e.cg) } }), a.command = r } var s = d.capitalize(t.name); "function" == typeof a.label ? a.label = a.label.call(t, e.cg) : e.lang[t.name] && e.lang[t.name][a.label] ? a.label = e.lang[t.name][a.label] : e.lang[s] && e.lang[s][a.label] ? a.label = e.lang[s][a.label] : e.lang[a.label] && (a.label = e.lang[a.label]), a.disableEmpty && i.push(r), e.gp(o[0], a), c.push(o[0]) } } }(this.app), a(); for (var o = this.app.dh.fk, r = 0; r < o.length; r++) { var s = this.app.document.getById(o[r].id), u = ['<span class="cke_toolgroup" id="basket">']; for (var f in this.app.bY._.items) if (this.app.bY._.items.hasOwnProperty(f)) { var p = n.bY._.items[f]; if (p.mp[0].basketToolbar) { var h = (p = n.bY.create(f)).er(n, u), m = o[r].items.push(h) - 1; m > 0 && (h.previous = o[r].items[m - 1], h.previous.next = h), l[r] || (l[r] = []), l[r].push(m) } } u.push("</span>"), s.appendHtml(u.join("")) } this.on("beforeShowFolderFiles", function (e) { this.app.document.getById("basket").remove(); for (var t = this.app.dh.fk, n = 0; n < t.length; n++)for (var o = 0; o < t[n].items.length; o++)l[n][o] && delete t[n].items[o]; e.removeListener() }, null, null, 1), this.oW("successShowFolderFiles", t.data), this.oW("afterShowFolderFiles", t.data) } }), s.on("beforeKeyboardNavigation", function (t) { var o = n.aV; if (o && o instanceof e.aL.BasketFolder) { var i = t.data.db(); 46 == i && (t.cancel(), n.execCommand("RemoveFileFromBasket")), 113 == i && t.cancel() } }) }, null, null, 20) } }), e.aL.BasketFolder = d.createClass({ $: function (t) { var n = this; e.aL.Folder.call(n, t, null, t.lang.BasketFolder), n.hasChildren = 0, n.acl = new e.aL.Acl("1111111"), n.isBasket = !0 }, base: e.aL.Folder, ej: { createNewFolder: function () { }, getChildren: function (e) { e.apply(this, null) }, rename: function () { }, remove: function () { }, getUrl: function () { return "ckfinder://basketFolder" }, getUploadUrl: function () { return null }, getPath: function () { return "/" }, copyFiles: function (e) { }, moveFiles: function (e) { } } }) }(), e.DIALOG_RESIZE_NONE = 0, e.DIALOG_RESIZE_WIDTH = 1, e.DIALOG_RESIZE_HEIGHT = 2, e.DIALOG_RESIZE_BOTH = 3, function () { function t(e) { return !!this._.tabs[e][0].$.offsetHeight } function n() { for (var e = this, n = e._.gx, o = e._.cU.length, i = d.indexOf(e._.cU, n) + o, a = i - 1; a > i - o; a--)if (t.call(e, e._.cU[a % o])) return e._.cU[a % o]; return null } function o() { for (var e = this, n = e._.gx, o = e._.cU.length, i = d.indexOf(e._.cU, n), a = i + 1; a < i + o; a++)if (t.call(e, e._.cU[a % o])) return e._.cU[a % o]; return null } function i(e, t, n) { this.element = t, this.cQ = n, this.fM = function () { return !t.getAttribute("disabled") && t.isVisible() }, this.focus = function () { e._.aW = this.cQ, this.element.focus() }, t.on("keydown", function (e) { e.data.db() in { 32: 1, 13: 1 } && this.oW("click") }), t.on("focus", function () { this.oW("mouseover") }), t.on("blur", function () { this.oW("mouseout") }) } var a; e.dialog = function (t, i) { var a = e.dialog._.ev[i]; a = d.extend(a(t), s), a = d.clone(a), a = new g(this, a); e.document; var f = t.theme.pu(t); this._ = { app: t, element: f.element, name: i, hB: { width: 0, height: 0 }, size: { width: 0, height: 0 }, contents: {}, buttons: {}, iX: {}, tabs: {}, cU: [], gx: null, nM: null, gV: 0, qF: null, eC: !1, eO: [], aW: 0, hasFocus: !1 }, this.bO = f.bO, this.bO.dialog.setStyles({ position: r.ie6Compat ? "absolute" : "fixed", top: 0, left: 0, visibility: "hidden" }), e.event.call(this), this.dg = a = e.oW("dialogDefinition", { name: i, dg: a }, t).dg, a.onLoad && this.on("load", a.onLoad), a.onShow && this.on("show", a.onShow), a.onHide && this.on("hide", a.onHide), a.onOk && this.on("ok", function (e) { !1 === a.onOk.call(this, e) && (e.data.hide = !1) }), a.onCancel && this.on("cancel", function (e) { !1 === a.onCancel.call(this, e) && (e.data.hide = !1) }); var p, h = this, m = function (e) { var t = h._.contents; for (var n in t) for (var o in t[n]) if (e.call(this, t[n][o])) return }; function v(e) { var t = h._.eO, n = e ? 1 : -1; if (!(t.length < 1)) { for (var o = (h._.aW + n + t.length) % t.length, i = o; !t[i].fM() && (i = (i + n + t.length) % t.length) != o;); t[i].focus(), "text" == t[i].type && t[i].select() } } function y(t) { if (h == e.dialog._.dL) { var i = t.data.db(); if (p = 0, 9 == i || i == e.dy + 9) { var a = i == e.dy + 9; if (h._.eC) { var r = a ? n.call(h) : o.call(h); h.selectPage(r), h._.tabs[r][0].focus() } else v(!a); p = 1 } else i != e.eJ + 121 || h._.eC ? 37 != i && 39 != i || !h._.eC || (r = 37 == i ? n.call(h) : o.call(h), h.selectPage(r), h._.tabs[r][0].focus(), p = 1) : (h._.eC = !0, h._.tabs[h._.gx][0].focus(), p = 1); p && (t.stop(), t.data.preventDefault()) } } function w(e) { p && e.data.preventDefault() } this.on("ok", function (e) { m(function (n) { if (n.validate) { var o = n.validate(this); if ("string" == typeof o && (t.document.getWindow().$.alert(o), o = !1), !1 === o) return n.select ? n.select() : n.focus(), e.data.hide = !1, e.stop(), !0 } }) }, this, null, 0), this.on("cancel", function (e) { m(function (n) { if (n.isChanged()) return t.document.getWindow().$.confirm(t.lang.common.confirmCancel) || (e.data.hide = !1), !0 }) }, this, null, 0), this.bO.close.on("click", function (e) { !1 !== this.oW("cancel", { hide: !0 }).hide && this.hide() }, this), this.on("show", function () { (e.document.on("keydown", y, this, null, 0), (r.opera || r.gecko && r.mac) && e.document.on("keypress", w, this), r.ie6Compat) && b.getChild(0).getFrameDocument().on("keydown", y, this, null, 0) }), this.on("hide", function () { e.document.removeListener("keydown", y), (r.opera || r.gecko && r.mac) && e.document.removeListener("keypress", w) }), this.on("iframeAdded", function (e) { new c(e.data.iframe.$.contentWindow.document).on("keydown", y, this, null, 0) }), this.on("show", function () { this._.hasFocus || (this._.aW = -1, v(!0)) }, this, null, 4294967295), r.ie6Compat && this.on("load", function (e) { var t = this.getElement(), n = t.getFirst(); n.remove(), n.appendTo(t) }, this), function (t) { var n = null, o = null, i = (t.getElement().getFirst(), t.eY()), a = i.config.dialog_magnetDistance, l = i.skin.margins || [0, 0, 0, 0]; void 0 === a && (a = 20); function s(i) { var r, s, d = t.hR(), c = e.document.getWindow().eR(), u = i.data.$.screenX, f = i.data.$.screenY, p = u - n.x, h = f - n.y; n = { x: u, y: f }, o.x += p, o.y += h, r = o.x + l[3] < a ? -l[3] : o.x - l[1] > c.width - d.width - a ? c.width - d.width + l[1] : o.x, s = o.y + l[0] < a ? -l[0] : o.y - l[2] > c.height - d.height - a ? c.height - d.height + l[2] : o.y, t.move(r, s, 1), i.data.preventDefault() } function d(t) { if (e.document.removeListener("mousemove", s), e.document.removeListener("mouseup", d), r.ie6Compat) { var n = b.getChild(0).getFrameDocument(); n.removeListener("mousemove", s), n.removeListener("mouseup", d) } } t.bO.title.on("mousedown", function (i) { if (n = { x: i.data.$.screenX, y: i.data.$.screenY }, e.document.on("mousemove", s), e.document.on("mouseup", d), o = t.gz(), r.ie6Compat) { var a = b.getChild(0).getFrameDocument(); a.on("mousemove", s), a.on("mouseup", d) } i.data.preventDefault() }, t) }(this), function (t) { var n = t.dg, o = n.resizable; if (o == e.DIALOG_RESIZE_NONE) return; var i, a, s, c, f, p, h = t.eY(); function m(n) { f = t.hR(), n = n.data.$; var o = t.bO.contents, d = o.$.getElementsByTagName("iframe").length; if (d && (p = u.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'), o.append(p)), a = f.height - t.bO.contents.hR("height", !(r.gecko || r.opera || l && r.quirks)), i = f.width - t.bO.contents.hR("width", 1), c = { x: n.screenX, y: n.screenY }, s = e.document.getWindow().eR(), e.document.on("mousemove", g), e.document.on("mouseup", v), r.ie6Compat) { var h = b.getChild(0).getFrameDocument(); h.on("mousemove", g), h.on("mouseup", v) } n.preventDefault && n.preventDefault() } function g(r) { var l = "rtl" == h.lang.dir, d = (r.data.$.screenX - c.x) * (l ? -1 : 1), u = r.data.$.screenY - c.y, p = f.width, m = f.height, g = p + d * (t._.moved ? 1 : 2), v = m + u * (t._.moved ? 1 : 2), b = t._.element.getFirst(), y = l && b.getComputedStyle("right"), w = t.gz(); y && (y = "auto" == y ? s.width - (w.x || 0) - b.hR("width") : parseInt(y, 10)), w.y + v > s.height && (v = s.height - w.y), (l ? y : w.x) + g > s.width && (g = s.width - (l ? y : w.x)), o != e.DIALOG_RESIZE_WIDTH && o != e.DIALOG_RESIZE_BOTH || l && d > 0 && !w.x || (p = Math.max(n.minWidth || 0, g - i)), o != e.DIALOG_RESIZE_HEIGHT && o != e.DIALOG_RESIZE_BOTH || (m = Math.max(n.minHeight || 0, v - a)), t.resize(p, m), function (e) { if (t._.moved && "rtl" == h.lang.dir) { var n = t._.element.getFirst(); n.setStyle("right", e + "px"), n.removeStyle("left") } else t._.moved || t.layout() }(y), r.data.preventDefault() } function v() { if (e.document.removeListener("mouseup", v), e.document.removeListener("mousemove", g), p && (p.remove(), p = null), r.ie6Compat) { var n = b.getChild(0).getFrameDocument(); n.removeListener("mouseup", v), n.removeListener("mousemove", g) } if ("rtl" == h.lang.dir) { var o = t._.element.getFirst(), i = o.getComputedStyle("left"); i = "auto" == i ? s.width - parseInt(o.rd("right"), 10) - t.hR().width : parseInt(i, 10), o.removeStyle("right"), t._.position.x += 1, t.move(i, t._.position.y) } } t.on("load", function () { var n = ""; o == e.DIALOG_RESIZE_WIDTH ? n = " cke_resizer_horizontal" : o == e.DIALOG_RESIZE_HEIGHT && (n = " cke_resizer_vertical"); var i = u.kE('<div class="cke_resizer' + n + '" title="' + d.htmlEncode(h.lang.resize) + '"></div>'); i.on("mousedown", m), t.bO.footer.append(i, 1) }), h.on("destroy", function () { d.removeFunction(m) }) }(this), this.bO.title.setText(a.title); for (var _ = 0; _ < a.contents.length; _++)this.addPage(a.contents[_]); var F = /cke_dialog_tab(\s|$|_)/; this.bO.tabs.on("click", function (e) { var t, n = e.data.bK(); (F.test(n.$.className) || "a" == n.getName()) && (t = n.$.id.substr(0, n.$.id.lastIndexOf("_")), this.selectPage(t), this._.eC && (this._.eC = !1, this._.aW = -1, v(!0)), e.data.preventDefault()) }, this); var k = [], C = e.dialog._.gv.hbox.dQ(this, { type: "hbox", className: "cke_dialog_footer_buttons", widths: [], children: a.buttons }, k).getChild(); for (this.bO.footer.setHtml(k.join("")), _ = 0; _ < C.length; _++)this._.buttons[C[_].id] = C[_]; e.skins.load(t, "dialog") }, e.dialog.prototype = { resize: function (t, n) { var o = this; o._.hB && o._.hB.width == t && o._.hB.height == n || (e.dialog.oW("resize", { dialog: o, skin: o._.app.gd, width: t, height: n }, o._.app), o._.hB = { width: t, height: n }) }, hR: function () { var e = this._.element.getFirst(); return { width: e.$.offsetWidth || 0, height: e.$.offsetHeight || 0 } }, mn: function () { var e = this.hR(); return e.height = e.height - (this.bO.title.$.offsetHeight || 0) - (this.bO.footer.$.offsetHeight || 0), e }, move: function (t, n, o) { var i = this, r = i._.element.getFirst(); if (void 0 === a && (a = "fixed" == r.getComputedStyle("position")), !a || !i._.position || i._.position.x != t || i._.position.y != n) { if (i._.position = { x: t, y: n }, !a) { var l = e.document.getWindow().hV(); t += l.x, n += l.y } r.setStyles({ left: (t > 0 ? t : 0) + "px", top: (n > 0 ? n : 0) + "px" }), o && (i._.moved = 1) } }, gz: function () { return d.extend({}, this._.position) }, show: function () { var t = this._.app; if ("qt" == t.mode && l) { var n = t.getSelection(); n && n.up() } var o = this._.element, i = this.dg; if (!o.getParent() || !o.getParent().equals(e.document.bH())) { if (o.appendTo(e.document.bH()), r.gecko && r.version < 10900) { var a = this.bO.dialog; a.setStyle("position", "absolute"), setTimeout(function () { a.setStyle("position", "fixed") }, 0) } if (this.resize(this._.hB && this._.hB.width || i.minWidth, this._.hB && this._.hB.height || i.minHeight), this.selectPage(this.dg.contents[0].id), this.reset(), null === e.dialog._.gw && (e.dialog._.gw = this._.app.config.baseFloatZIndex), this._.element.getFirst().setStyle("z-index", e.dialog._.gw += 10), null === e.dialog._.dL) { e.dialog._.dL = this, this._.ep = null; try { _(this._.app) } catch (e) { b = void 0, _(t), w = !1 } for (var s in o.on("keydown", x), o.on(r.opera ? "keypress" : "keyup", E), { keyup: 1, keydown: 1, keypress: 1 }) o.on(s, $) } else { this._.ep = e.dialog._.dL, this._.ep.getElement().getFirst().$.style.zIndex -= Math.floor(this._.app.config.baseFloatZIndex / 2), e.dialog._.dL = this } S(this, this, "", null, function () { var e = this.getButton("cancel"); e ? e.click() : !1 !== this.oW("cancel", { hide: !0 }).hide && this.hide() }), this._.hasFocus = !1, d.setTimeout(function () { this.layout(), this.bO.dialog.setStyle("visibility", ""), this.cr("load", {}), this.oW("show", {}), this._.app.oW("dialogShow", this), this.gh(function (e) { e.jW && e.jW() }) }, 100, this) } }, layout: function () { var t = this, n = e.document.getWindow().eR(), o = t.hR(); t.move(t._.moved ? t._.position.x : (n.width - o.width) / 2, t._.moved ? t._.position.y : (n.height - o.height) / 2) }, gh: function (e) { var t = this; for (var n in t._.contents) for (var o in t._.contents[n]) e(t._.contents[n][o]); return t }, reset: function () { var e = function (e) { e.reset && e.reset() }; return function () { return this.gh(e), this } }(), rN: function () { var e = arguments; this.gh(function (t) { t.qi && t.qi.apply(t, e) }) }, sI: function () { var e = arguments; this.gh(function (t) { t.rx && t.rx.apply(t, e) }) }, hide: function () { this.oW("hide", {}), this._.app.oW("dialogHide", this); var t = this._.element; if (t.getParent()) { if (t.remove(), this.bO.dialog.setStyle("visibility", "hidden"), N(this), this._.ep) { var n = this._.ep.getElement().getFirst(); n.setStyle("z-index", parseInt(n.$.style.zIndex, 10) + Math.floor(this._.app.config.baseFloatZIndex / 2)) } else F(); if (e.dialog._.dL = this._.ep, this._.ep) e.dialog._.gw -= 10; else { for (var o in e.dialog._.gw = null, t.removeListener("keydown", x), t.removeListener(r.opera ? "keypress" : "keyup", E), { keyup: 1, keydown: 1, keypress: 1 }) t.removeListener(o, $); var i = this._.app; if (i.focus(), i._.activeElement = null, i._.oO = [], "qt" == i.mode && l) { var a = i.getSelection(); a && a.sd(!0) } } this.gh(function (e) { e.ki && e.ki() }) } }, addPage: function (t) { var n = this, o = [], i = t.label ? ' title="' + d.htmlEncode(t.label) + '"' : "", a = (t.elements, e.dialog._.gv.vbox.dQ(n, { type: "vbox", className: "cke_dialog_page_contents", children: t.elements, expand: !!t.expand, padding: t.padding, style: t.style || "width: 100%; height: 100%;" }, o)), r = u.kE(o.join(""), e.document), l = u.kE(['<a class="cke_dialog_tab"', n._.gV > 0 ? " cke_last" : "cke_first", i, t.hidden ? ' style="display:none"' : "", ' id="', t.id + "_", d.getNextNumber(), '" href="javascript:void(0)"', ' hp="true">', t.label, "</a>"].join(""), e.document); 0 === n._.gV ? n.bO.dialog.addClass("cke_single_page") : n.bO.dialog.removeClass("cke_single_page"), n._.tabs[t.id] = [l, r], n._.cU.push(t.id), n._.gV++, n._.qF = l; for (var s, c = n._.contents[t.id] = {}, f = a.getChild(); s = f.shift();)c[s.id] = s, "function" == typeof s.getChild && f.push.apply(f, s.getChild()); r.setAttribute("name", t.id), r.appendTo(n.bO.contents), l.unselectable(), n.bO.tabs.append(l), t.accessKey && (S(n, n, "bP+" + t.accessKey, T, D), n._.iX["bP+" + t.accessKey] = t.id) }, selectPage: function (e) { var t = this; for (var n in t._.tabs) { var o = t._.tabs[n][0], i = t._.tabs[n][1]; n != e && (o.removeClass("cke_dialog_tab_selected"), i.hide()) } var a = t._.tabs[e]; a[0].addClass("cke_dialog_tab_selected"), a[1].show(), t._.gx = e, t._.nM = d.indexOf(t._.cU, e) }, vJ: function (e) { var t = this._.tabs[e] && this._.tabs[e][0]; t && t.hide() }, showPage: function (e) { var t = this._.tabs[e] && this._.tabs[e][0]; t && t.show() }, getElement: function () { return this._.element }, getName: function () { return this._.name }, getContentElement: function (e, t) { return this._.contents[e][t] }, getValueOf: function (e, t) { return this.getContentElement(e, t).getValue() }, setValueOf: function (e, t, n) { return this.getContentElement(e, t).setValue(n) }, getButton: function (e) { return this._.buttons[e] }, click: function (e) { return this._.buttons[e].click() }, disableButton: function (e) { return this._.buttons[e].disable() }, enableButton: function (e) { return this._.buttons[e].enable() }, vj: function () { return this._.gV }, getParentApi: function () { return this._.app.cg }, eY: function () { return this._.app }, rf: function () { return this.eY().getSelection().rf() }, tQ: function (e, t) { var n = this; if (void 0 === t) t = n._.eO.length, n._.eO.push(new i(n, e, t)); else { n._.eO.splice(t, 0, new i(n, e, t)); for (var o = t + 1; o < n._.eO.length; o++)n._.eO[o].cQ++ } }, setTitle: function (e) { this.bO.title.setText(e) } }, d.extend(e.dialog, { add: function (e, t) { this._.ev[e] && "function" != typeof t || (this._.ev[e] = t) }, exists: function (e) { return !!this._.ev[e] }, getCurrent: function () { return e.dialog._.dL }, okButton: function () { var e = function (e, t) { return t = t || {}, d.extend({ id: "ok", type: "button", label: e.lang.common.ok, class: "cke_dialog_ui_button_ok", onClick: function (e) { var t = e.data.dialog; !1 !== t.oW("ok", { hide: !0 }).hide && t.hide() } }, t, !0) }; return e.type = "button", e.override = function (t) { return d.extend(function (n) { return e(n, t) }, { type: "button" }, !0) }, e }(), cancelButton: function () { var e = function (e, t) { return t = t || {}, d.extend({ id: "cancel", type: "button", label: e.lang.common.cancel, class: "cke_dialog_ui_button_cancel", onClick: function (e) { var t = e.data.dialog; !1 !== t.oW("cancel", { hide: !0 }).hide && t.hide() } }, t, !0) }; return e.type = "button", e.override = function (t) { return d.extend(function (n) { return e(n, t) }, { type: "button" }, !0) }, e }(), addUIElement: function (e, t) { this._.gv[e] = t } }), e.dialog._ = { gv: {}, ev: {}, dL: null, gw: null }, e.event.du(e.dialog), e.event.du(e.dialog.prototype, !0); var s = { resizable: e.DIALOG_RESIZE_NONE, minWidth: 600, minHeight: 400, buttons: [e.dialog.okButton, e.dialog.cancelButton] }, f = function (e, t, n) { for (var o, i = 0; o = e[i]; i++) { if (o.id == t) return o; if (n && o[n]) { var a = f(o[n], t, n); if (a) return a } } return null }, h = function (e, t, n, o, i) { if (n) { for (var a, r = 0; a = e[r]; r++) { if (a.id == n) return e.splice(r, 0, t), t; if (o && a[o]) { var l = h(a[o], t, n, o, !0); if (l) return l } } if (i) return null } return e.push(t), t }, m = function (e, t, n) { for (var o, i = 0; o = e[i]; i++) { if (o.id == t) return e.splice(i, 1); if (n && o[n]) { var a = m(o[n], t, n); if (a) return a } } return null }, g = function (e, t) { this.dialog = e; for (var n, o = t.contents, i = 0; n = o[i]; i++)o[i] = new v(e, n); d.extend(this, t) }; function v(e, t) { this._ = { dialog: e }, d.extend(this, t) } g.prototype = { vz: function (e) { return f(this.contents, e) }, getButton: function (e) { return f(this.buttons, e) }, uh: function (e, t) { return h(this.contents, e, t) }, qW: function (e, t) { return h(this.buttons, e, t) }, uP: function (e) { m(this.contents, e) }, uO: function (e) { m(this.buttons, e) } }, v.prototype = { eB: function (e) { return f(this.elements, e, "children") }, add: function (e, t) { return h(this.elements, e, t, "children") }, remove: function (e) { m(this.elements, e, "children") } }; var b, y, w = !0, _ = function (t) { var n = e.document.getWindow(); if (!w || !b) { var o = t.config.dialog_backgroundCoverColor || "white", i = ['<div style="position: ', r.ie6Compat ? "absolute" : "fixed", "; z-index: ", t.config.baseFloatZIndex, "; top: 0px; left: 0px; ", r.ie6Compat ? "" : "background-color: " + o, '" id="cke_dialog_background_cover">']; if (r.ie6Compat) { var a = r.isCustomDomain(), l = "<html><body style=\\'background-color:" + o + ";\\'></body></html>"; i.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'), i.push("void((function(){document.open();" + (a ? "document.domain='" + document.domain + "';" : "") + "document.write( '" + l + "' );document.close();})())"), i.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>') } i.push("</div>"), b = u.kE(i.join(""), e.document) } var s = b, d = function () { var e = n.eR(); s.setStyles({ width: e.width + "px", height: e.height + "px" }) }, c = function () { var t = n.hV(), o = e.dialog._.dL; s.setStyles({ left: t.x + "px", top: t.y + "px" }); do { var i = o.gz(); o.move(i.x, i.y) } while (o = o._.ep) }; if (y = d, n.on("resize", d), d(), r.ie6Compat) { var f = function () { c(), arguments.callee.lw.apply(this, arguments) }; n.$.setTimeout(function () { f.lw = window.onscroll || function () { }, window.onscroll = f }, 0), c() } var p = t.config.dialog_backgroundCoverOpacity; s.setOpacity(void 0 !== p ? p : .5), s.appendTo(e.document.bH()) }, F = function () { if (b) { var t = e.document.getWindow(); b.remove(), t.removeListener("resize", y), r.ie6Compat && t.$.setTimeout(function () { var e = window.onscroll && window.onscroll.lw; window.onscroll = e || null }, 0), y = null } }, k = {}, x = function (e) { var t = e.data.$.ctrlKey || e.data.$.metaKey, n = e.data.$.altKey, o = e.data.$.shiftKey, i = String.fromCharCode(e.data.$.keyCode), a = k[(t ? "bP+" : "") + (n ? "eJ+" : "") + (o ? "dy+" : "") + i]; a && a.length && ((a = a[a.length - 1]).keydown && a.keydown.call(a.bf, a.dialog, a.iK), e.data.preventDefault()) }, E = function (e) { var t = e.data.$.ctrlKey || e.data.$.metaKey, n = e.data.$.altKey, o = e.data.$.shiftKey, i = String.fromCharCode(e.data.$.keyCode), a = k[(t ? "bP+" : "") + (n ? "eJ+" : "") + (o ? "dy+" : "") + i]; a && a.length && (a = a[a.length - 1]).keyup && (a.keyup.call(a.bf, a.dialog, a.iK), e.data.preventDefault()) }, S = function (e, t, n, o, i) { (k[n] || (k[n] = [])).push({ bf: e, dialog: t, iK: n, keyup: i || e.eZ, keydown: o || e.iU }) }, N = function (e) { for (var t in k) { for (var n = k[t], o = n.length - 1; o >= 0; o--)n[o].dialog != e && n[o].bf != e || n.splice(o, 1); 0 === n.length && delete k[t] } }, D = function (e, t) { e._.iX[t] && e.selectPage(e._.iX[t]) }, T = function (e, t) { }, R = { 27: 1, 13: 1 }, $ = function (e) { e.data.db() in R && e.data.stopPropagation() }; function W(e, t) { var n = function () { i(this), t(this) }, o = function () { i(this) }, i = function (e) { e.removeListener("ok", n), e.removeListener("cancel", o) }; e.on("ok", n), e.on("cancel", o) } C.dialog = { bf: function (t, n, o, i, a, r, l) { if (!(arguments.length < 4)) { var s, c = (i.call ? i(n) : i) || "div", u = ["<", c, " "], f = (a && a.call ? a(n) : a) || {}, p = (r && r.call ? r(n) : r) || {}, h = (l && l.call ? l(t, n) : l) || "", m = this.oJ = p.id || d.getNextNumber() + "_uiElement"; this.id = n.id, p.id = m; var g = {}; n.type && (g["cke_dialog_ui_" + n.type] = 1), n.className && (g[n.className] = 1); var v = p.class && p.class.split ? p.class.split(" ") : []; for (s = 0; s < v.length; s++)v[s] && (g[v[s]] = 1); var b = []; for (s in g) b.push(s); p.class = b.join(" "), n.title && (p.title = n.title); var y = (n.style || "").split(";"); for (s in f) y.push(s + ":" + f[s]); for (n.hidden && y.push("display:none"), s = y.length - 1; s >= 0; s--)"" === y[s] && y.splice(s, 1); for (s in y.length > 0 && (p.style = (p.style ? p.style + "; " : "") + y.join("; ")), p) u.push(s + '="' + d.htmlEncode(p[s]) + '" '); u.push(">", h, "</", c, ">"), o.push(u.join("")), (this._ || (this._ = {})).dialog = t, "boolean" == typeof n.isChanged && (this.isChanged = function () { return n.isChanged }), "function" == typeof n.isChanged && (this.isChanged = n.isChanged), e.event.du(this), this.nc(n), this.eZ && this.iU && n.accessKey && S(this, t, "bP+" + n.accessKey); var w = this; t.on("load", function () { w.getInputElement() && w.getInputElement().on("focus", function () { t._.eC = !1, t._.hasFocus = !0, w.oW("focus") }, w) }), this.eA && (this.cQ = t._.eO.push(this) - 1, this.on("focus", function () { t._.aW = w.cQ })), d.extend(this, n) } }, hbox: function (e, t, n, o, i) { if (!(arguments.length < 4)) { this._ || (this._ = {}), this._.children = t; var a, r = i && i.widths || null, l = i && i.height || null; C.dialog.bf.call(this, e, i || { type: "hbox" }, o, "table", {}, i && i.align && { align: i.align } || null, function () { var e = ['<tbody><tr class="cke_dialog_ui_hbox">']; for (a = 0; a < n.length; a++) { var t = "cke_dialog_ui_hbox_child", o = []; 0 === a && (t = "cke_dialog_ui_hbox_first"), a == n.length - 1 && (t = "cke_dialog_ui_hbox_last"), e.push('<td class="', t, '" '), r ? r[a] && o.push("width:" + d.cssLength(r[a])) : o.push("width:" + Math.floor(100 / n.length) + "%"), l && o.push("height:" + d.cssLength(l)), i && null != i.padding && o.push("padding:" + d.cssLength(i.padding)), o.length > 0 && e.push('style="' + o.join("; ") + '" '), e.push(">", n[a], "</td>") } return e.push("</tr></tbody>"), e.join("") }) } }, vbox: function (e, t, n, o, i) { if (!(arguments.length < 3)) { this._ || (this._ = {}), this._.children = t; var a = i && i.width || null, r = i && i.vY || null; C.dialog.bf.call(this, e, i || { type: "vbox" }, o, "div", null, null, function () { var t = ['<table cellspacing="0" border="0" ']; t.push('style="'), i && i.expand && t.push("height:100%;"), t.push("width:" + d.cssLength(a || "100%"), ";"), t.push('"'), t.push('align="', d.htmlEncode(i && i.align || ("ltr" == e.eY().lang.dir ? "left" : "right")), '" '), t.push("><tbody>"); for (var o = 0; o < n.length; o++) { var l = []; t.push("<tr><td "), a && l.push("width:" + d.cssLength(a || "100%")), r ? l.push("height:" + d.cssLength(r[o])) : i && i.expand && l.push("height:" + Math.floor(100 / n.length) + "%"), i && null != i.padding && l.push("padding:" + d.cssLength(i.padding)), l.length > 0 && t.push('style="', l.join("; "), '" '), t.push(' class="cke_dialog_ui_vbox_child">', n[o], "</td></tr>") } return t.push("</tbody></table>"), t.join("") }) } } }, C.dialog.bf.prototype = { getElement: function () { return e.document.getById(this.oJ) }, getInputElement: function () { return this.getElement() }, getDialog: function () { return this._.dialog }, setValue: function (e) { return this.getInputElement().setValue(e), this.oW("change", { value: e }), this }, getValue: function () { return this.getInputElement().getValue() }, isChanged: function () { return !1 }, selectParentTab: function () { for (var e, t = this, n = t.getInputElement(); (n = n.getParent()) && -1 == n.$.className.search("cke_dialog_page_contents");); return n ? (e = n.getAttribute("name"), t._.dialog._.gx != e && t._.dialog.selectPage(e), t) : t }, focus: function () { return this.selectParentTab().getInputElement().focus(), this }, nc: function (e) { var t, n = /^on([A-Z]\w+)/, o = function (e, t, n, o) { t.on("load", function () { e.getInputElement().on(n, o, e) }) }; for (var i in e) (t = i.match(n)) && (this.dm[i] ? this.dm[i].call(this, this._.dialog, e[i]) : o(this, this._.dialog, t[1].toLowerCase(), e[i])); return this }, dm: { onLoad: function (e, t) { e.on("load", t, this) }, onShow: function (e, t) { e.on("show", t, this) }, onHide: function (e, t) { e.on("hide", t, this) } }, iU: function (e, t) { this.focus() }, eZ: function (e, t) { }, disable: function () { var e = this.getInputElement(); e.setAttribute("disabled", "true"), e.addClass("cke_disabled") }, enable: function () { var e = this.getInputElement(); e.removeAttribute("disabled"), e.removeClass("cke_disabled") }, isEnabled: function () { return !this.getInputElement().getAttribute("disabled") }, isVisible: function () { return this.getInputElement().isVisible() }, fM: function () { return !(!this.isEnabled() || !this.isVisible()) } }, C.dialog.hbox.prototype = d.extend(new C.dialog.bf, { getChild: function (e) { var t = this; return arguments.length < 1 ? t._.children.concat() : (e.splice || (e = [e]), e.length < 2 ? t._.children[e[0]] : t._.children[e[0]] && t._.children[e[0]].getChild ? t._.children[e[0]].getChild(e.slice(1, e.length)) : null) } }, !0), C.dialog.vbox.prototype = new C.dialog.hbox, function () { var t = { dQ: function (t, n, o) { for (var i, a = n.children, r = [], l = [], s = 0; s < a.length && (i = a[s]); s++) { var d = []; r.push(d), l.push(e.dialog._.gv[i.type].dQ(t, i, d)) } return new C.dialog[n.type](t, l, r, o, n) } }; e.dialog.addUIElement("hbox", t), e.dialog.addUIElement("vbox", t) }(), e.rB = function (e) { this.ry = e }, e.rB.prototype = { exec: function (e) { e.openDialog(this.ry) }, sG: !1 }, function () { var t = /^([a]|[^a])+$/, n = /^\d*$/, o = /^\d*(?:\.\d+)?$/; e.sg = 1, e.jb = 2, e.dialog.validate = { functions: function () { return function () { var t, n = this, o = n && n.getValue ? n.getValue() : arguments[0], i = void 0, a = e.jb, r = []; for (t = 0; t < arguments.length && "function" == typeof arguments[t]; t++)r.push(arguments[t]); t < arguments.length && "string" == typeof arguments[t] && (i = arguments[t], t++), t < arguments.length && "number" == typeof arguments[t] && (a = arguments[t]); var l = a == e.jb; for (t = 0; t < r.length; t++)l = a == e.jb ? l && r[t](o) : l || r[t](o); return !!l || (void 0 !== i && alert(i), n && (n.select || n.focus) && (n.select || n.focus()), !1) } }, regex: function (e, t) { return function () { var n = this, o = n && n.getValue ? n.getValue() : arguments[0]; return !!e.test(o) || (void 0 !== t && alert(t), n && (n.select || n.focus) && (n.select ? n.select() : n.focus()), !1) } }, notEmpty: function (e) { return this.regex(t, e) }, integer: function (e) { return this.regex(n, e) }, number: function (e) { return this.regex(o, e) }, equals: function (e, t) { return this.functions(function (t) { return t == e }, t) }, notEqual: function (e, t) { return this.functions(function (t) { return t != e }, t) } } }(), d.extend(e.application.prototype, { openDialog: function (t, n, o) { var i = e.dialog._.ev[t]; if ("function" == typeof i) { var a = this._.oB || (this._.oB = {}), r = a[t] || (a[t] = new e.dialog(this, t)); return n && n.call(r, r), !this._.activeElement && (this._.activeElement = this.document.$.activeElement), !this._.oO && (this._.oO = this.ld["filesview.filesview"].tools.oO()), r.show(), r } if ("failed" == i) throw new Error('[CKFINDER.dialog.openDialog] Dialog "' + t + '" failed when loading dg.'); var l = e.document.bH(), s = l.$.style.cursor, d = this; return l.setStyle("cursor", "wait"), e.scriptLoader.load(e.getUrl(i), function () { "function" != typeof e.dialog._.ev[t] && (e.dialog._.ev[t] = "failed"), d.openDialog(t, n), l.setStyle("cursor", s) }, null, null, o), null }, hs: function (e, t, n, o) { var i = this; setTimeout(function () { i.cg.openDialog("Input", function (a) { a.show(), a.setTitle(e || i.lang.common.inputTitle), a.getContentElement("tab1", "msg").getElement().setHtml(t), a.getContentElement("tab1", "input").setValue(n), W(a, function (e) { var t = e.getContentElement("tab1", "input").getValue(); o(t) }) }) }, 0) }, msgDialog: function (e, t, n) { var o = this; setTimeout(function () { o.cg.openDialog("Msg", function (i) { i.show(), i.setTitle(e || o.lang.common.messageTitle), i.getContentElement("tab1", "msg").getElement().setHtml(t), n && W(i, function (e) { n() }) }) }, 0) }, fe: function (e, t, n) { var o = this; setTimeout(function () { o.cg.openDialog("Confirm", function (i) { i.show(), i.setTitle(e || o.lang.common.confirmationTitle), i.getContentElement("tab1", "msg").getElement().setHtml(t), W(i, function (e) { n() }) }) }, 0) }, skippedFilesDialog: function (e, t, n, o) { var i = this; setTimeout(function () { i.cg.openDialog("SkippedFiles", function (a) { a.show(), a.setTitle(e || i.lang.common.messageTitle), n ? (a.getContentElement("tab1", "msg").getElement().show(), a.getContentElement("tab1", "msg").getElement().setHtml(n)) : a.getContentElement("tab1", "msg").getElement().hide(); var r = "", l = "cke_files_list", s = "", c = t.length; c > 3 && (l += " cke_files_list_many", s = ' style="height: ' + Math.min(c + .1, 20) + 'em"'); for (var u = 0; u < c; u++)r += "<li>" + d.escapeHtml("string" == typeof t[u] ? t[u] : t[u].getAttribute("name")) + "</li>"; a.getContentElement("tab1", "skippedList").getElement().setHtml('<ul class="' + l + '"' + s + ">" + r + "</ul>"), o && W(a, function () { o() }) }) }, 0) } }), p.add("dialog", { bM: ["dialogui"], onLoad: function () { e.dialog.add("Confirm", function (e) { return { title: e.lang.common.confirmationTitle, minWidth: 270, minHeight: 60, contents: [{ id: "tab1", elements: [{ type: "html", html: "", id: "msg" }] }], buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }), e.dialog.add("Msg", function (e) { return { title: e.lang.common.messageTitle, minWidth: 270, minHeight: 60, contents: [{ id: "tab1", elements: [{ type: "html", html: "", id: "msg" }] }], buttons: [CKFinder.dialog.okButton] } }), e.dialog.add("Input", function (e) { return { title: e.lang.common.inputTitle, minWidth: 270, minHeight: 60, contents: [{ id: "tab1", elements: [{ type: "html", html: "", id: "msg" }, { type: "text", id: "input" }] }], buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }), e.dialog.add("SkippedFiles", function (e) { return { title: e.lang.common.messageTitle, minWidth: 400, minHeight: 100, contents: [{ id: "tab1", style: r.ie7Compat ? "height: auto" : "", expand: !0, padding: 0, elements: [{ type: "vbox", expand: !0, children: [{ type: "html", className: "cke_dialog_msg", html: "", id: "msg" }, { type: "html", id: "skippedDescription", className: "cke_dialog_msg", html: e.lang.SkippedFiles }, { type: "html", id: "skippedList", className: "cke_dialog_msg", html: "" }] }] }], buttons: [CKFinder.dialog.okButton] } }) } }) }(), p.add("dialogui"), function () { var t, n, o, i = function (e) { var t = this; t._ || (t._ = {}), t._.default = t._.hq = e.default || ""; for (var n = [t._], o = 1; o < arguments.length; o++)n.push(arguments[o]); return n.push(!0), d.extend.apply(d, n), t._ }, a = { dQ: function (e, t, n) { return new C.dialog.ju(e, t, n) } }, c = { dQ: function (e, t, n) { return new C.dialog[t.type](e, t, n) } }, f = { isChanged: function () { return this.getValue() != this.lu() }, reset: function () { this.setValue(this.lu()) }, jW: function () { this._.hq = this.getValue() }, ki: function () { this._.hq = this._.default }, lu: function () { return this._.hq } }, p = d.extend({}, C.dialog.bf.prototype.dm, { onChange: function (e, t) { this._.pL || (e.on("load", function () { this.getInputElement().on("change", function () { this.oW("change", { value: this.getValue() }) }, this) }, this), this._.pL = !0), this.on("change", t) } }, !0), h = /^on([A-Z]\w+)/, m = function (e) { for (var t in e) (h.test(t) || "title" == t || "type" == t) && delete e[t]; return e }; d.extend(C.dialog, { dD: function (t, n, o, a) { if (!(arguments.length < 4)) { var r = i.call(this, n); r.hz = d.getNextNumber() + "_label"; this._.children = []; C.dialog.bf.call(this, t, n, o, "div", null, null, function () { var o = []; if ("horizontal" != n.uC) o.push('<div class="cke_dialog_ui_labeled_label" id="', r.hz, '" >', n.label, "</div>", '<div class="cke_dialog_ui_labeled_content">', a(t, n), "</div>"); else { var i = { type: "hbox", widths: n.widths, padding: 0, children: [{ type: "html", html: '<span class="cke_dialog_ui_labeled_label" id="' + r.hz + '">' + d.htmlEncode(n.label) + "</span>" }, { type: "html", html: '<span class="cke_dialog_ui_labeled_content">' + a(t, n) + "</span>" }] }; e.dialog._.gv.hbox.dQ(t, i, o) } return o.join("") }) } }, ju: function (e, t, n) { if (!(arguments.length < 3)) { i.call(this, t); var o = this._.le = d.getNextNumber() + "_textInput", a = { class: "cke_dialog_ui_input_" + t.type, id: o, type: "text" }; t.validate && (this.validate = t.validate), t.maxLength && (a.uy = t.maxLength), t.size && (a.size = t.size); var r = this, l = !1; e.on("load", function () { r.getInputElement().on("keydown", function (e) { 13 == e.data.db() && (l = !0) }), r.getInputElement().on("keyup", function (t) { 13 == t.data.db() && l && (e.getButton("ok") && setTimeout(function () { e.getButton("ok").click() }, 0), l = !1) }, null, null, 1e3) }); C.dialog.dD.call(this, e, t, n, function () { var e = ['<div class="cke_dialog_ui_input_', t.type, '"']; for (var n in t.width && e.push('style="width:' + t.width + '" '), e.push("><input "), a) e.push(n + '="' + a[n] + '" '); return e.push(" /></div>"), e.join("") }) } }, textarea: function (e, t, n) { if (!(arguments.length < 3)) { i.call(this, t); var o = this, a = this._.le = d.getNextNumber() + "_textarea", r = {}; t.validate && (this.validate = t.validate), r.rows = t.rows || 5, r.cols = t.cols || 20; C.dialog.dD.call(this, e, t, n, function () { var e = ['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="', a, '" ']; for (var t in r) e.push(t + '="' + d.htmlEncode(r[t]) + '" '); return e.push(">", d.htmlEncode(o._.default), "</textarea></div>"), e.join("") }) } }, checkbox: function (e, t, n) { if (!(arguments.length < 3)) { var o = i.call(this, t, { default: !!t.default }); t.validate && (this.validate = t.validate); C.dialog.bf.call(this, e, t, n, "span", null, null, function () { var n = d.extend({}, t, { id: t.id ? t.id + "_checkbox" : d.getNextNumber() + "_checkbox" }, !0), i = [], a = { class: "cke_dialog_ui_checkbox_input", type: "checkbox" }; return m(n), t.default && (a.checked = "checked"), o.checkbox = new C.dialog.bf(e, n, i, "input", null, a), i.push(' <label for="', a.id, '">', d.htmlEncode(t.label), "</label>"), i.join("") }) } }, radio: function (e, t, n) { if (!(arguments.length < 3)) { i.call(this, t), this._.default || (this._.default = this._.hq = t.items[0][1]), t.validate && (this.validate = t.sh); var o = [], a = this; C.dialog.dD.call(this, e, t, n, function () { for (var n = [], i = [], r = t.id ? t.id + "_radio" : d.getNextNumber() + "_radio", l = 0; l < t.items.length; l++) { var s = t.items[l], c = void 0 !== s[2] ? s[2] : s[0], u = void 0 !== s[1] ? s[1] : s[0], f = d.extend({}, t, { id: d.getNextNumber() + "_radio_input", title: null, type: null }, !0), p = d.extend({}, f, { id: null, title: c }, !0), h = { type: "radio", class: "cke_dialog_ui_radio_input", name: r, value: u }, g = []; a._.default == u && (h.checked = "checked"), m(f), m(p), o.push(new C.dialog.bf(e, f, g, "input", null, h)), g.push(" "), new C.dialog.bf(e, p, g, "label", null, { for: h.id }, s[0]), n.push(g.join("")) } return new C.dialog.hbox(e, [], n, i), i.join("") }), this._.children = o } }, button: function (t, n, o) { if (arguments.length) { "function" == typeof n && (n = n(t.eY())), i.call(this, n, { disabled: n.disabled || !1 }), e.event.du(this); var a = this; t.on("load", function (e) { var t = this.getElement(); t.on("click", function (e) { a.oW("click", { dialog: a.getDialog() }), e.data.preventDefault() }), t.unselectable() }, this); var r = d.extend({}, n); delete r.style, C.dialog.bf.call(this, t, r, o, "a", null, { style: n.style, href: "javascript:void(0)", title: n.label, hp: "true", class: n.class }, '<span class="cke_dialog_ui_button">' + d.htmlEncode(n.label) + "</span>") } }, select: function (e, t, n) { if (!(arguments.length < 3)) { var o = i.call(this, t); t.validate && (this.validate = t.validate); C.dialog.dD.call(this, e, t, n, function () { var n = d.extend({}, t, { id: t.id ? t.id + "_select" : d.getNextNumber() + "_select" }, !0), i = [], a = [], r = { class: "cke_dialog_ui_input_select" }; null != t.size && (r.size = t.size), null != t.multiple && (r.multiple = t.multiple), m(n); for (var l, s = 0; s < t.items.length && (l = t.items[s]); s++)a.push('<option value="', d.htmlEncode(void 0 !== l[1] ? l[1] : l[0]), '" /> ', d.htmlEncode(l[0])); return o.select = new C.dialog.bf(e, n, i, "select", null, r, a.join("")), i.join("") }) } }, file: function (t, n, o) { if (!(arguments.length < 3)) { void 0 === n.default && (n.default = ""); var a = d.extend(i.call(this, n), { dg: n, buttons: [] }); n.validate && (this.validate = n.validate); t.on("load", function () { e.document.getById(a.gL).getParent().addClass("cke_dialog_ui_input_file") }), C.dialog.dD.call(this, t, n, o, function () { a.gL = d.getNextNumber() + "_fileInput"; var e = r.isCustomDomain(), t = ['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="', a.gL, '" title="', n.label, '" src="javascript:void(']; return t.push(e ? "(function(){document.open();document.domain='" + document.domain + "';document.close();})()" : "0"), t.push(')"></iframe>'), t.join("") }) } }, fileButton: function (e, t, n) { if (!(arguments.length < 3)) { i.call(this, t); var o = this; t.validate && (this.validate = t.validate); var a = d.extend({}, t), r = a.onClick; a.className = (a.className ? a.className + " " : "") + "cke_dialog_ui_button", a.onClick = function (n) { var o = t.for; r && !1 === r.call(this, n) || (e.getContentElement(o[0], o[1]).submit(), this.disable()) }, e.on("load", function () { e.getContentElement(t.for[0], t.for[1])._.buttons.push(o) }), C.dialog.button.call(this, e, a, n) } }, html: (t = /^\s*<[\w:]+\s+([^>]*)?>/, n = /^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/, o = /\/$/, function (e, i, a) { if (!(arguments.length < 3)) { var r, l, s = [], d = i.html; if ("<" != d.charAt(0) && (d = "<span>" + d + "</span>"), i.focus) { var c = this.focus; if (this.focus = function () { c.call(this), i.focus.call(this), this.oW("focus") }, i.fM) { var u = this.fM; this.fM = u } this.eA = !0 } C.dialog.bf.call(this, e, i, s, "span", null, null, ""), r = s.join("").match(t), l = d.match(n) || ["", "", ""], o.test(l[1]) && (l[1] = l[1].slice(0, -1), l[2] = "/" + l[2]), a.push([l[1], " ", r[1] || "", l[2]].join("")) } }) }, !0), C.dialog.html.prototype = new C.dialog.bf, C.dialog.dD.prototype = d.extend(new C.dialog.bf, { rW: function (t) { var n = e.document.getById(this._.hz); return n.iu() < 1 ? new s.text(t, e.document).appendTo(n) : n.getChild(0).$.nodeValue = t, this }, vt: function () { var t = e.document.getById(this._.hz); return !t || t.iu() < 1 ? "" : t.getChild(0).getText() }, dm: p }, !0), C.dialog.button.prototype = d.extend(new C.dialog.bf, { click: function () { var e = this; return e._.disabled ? (e.getElement().$.blur(), !1) : e.oW("click", { dialog: e._.dialog }) }, enable: function () { this._.disabled = !1; var e = this.getElement(); e && e.removeClass("disabled") }, disable: function () { this._.disabled = !0, this.getElement().addClass("disabled") }, isVisible: function () { return this.getElement().getFirst().isVisible() }, isEnabled: function () { return !this._.disabled }, dm: d.extend({}, C.dialog.bf.prototype.dm, { onClick: function (e, t) { this.on("click", t) } }, !0), eZ: function () { this.click() }, iU: function () { this.focus() }, eA: !0 }, !0), C.dialog.ju.prototype = d.extend(new C.dialog.dD, { getInputElement: function () { return e.document.getById(this._.le) }, focus: function () { var e = this.selectParentTab(); setTimeout(function () { var t = e.getInputElement(); t && t.$.focus() }, 0) }, select: function () { var e = this.selectParentTab(); setTimeout(function () { var t = e.getInputElement(); t && (t.$.focus(), t.$.select()) }, 0) }, eZ: function () { this.select() }, setValue: function (e) { return e = null !== e ? e : "", C.dialog.bf.prototype.setValue.call(this, e) }, eA: !0 }, f, !0), C.dialog.textarea.prototype = new C.dialog.ju, C.dialog.select.prototype = d.extend(new C.dialog.dD, { getInputElement: function () { return this._.select.getElement() }, add: function (e, t, n) { var o = new u("option", this.getDialog().eY().document), i = this.getInputElement().$; return o.$.text = e, o.$.value = null == t ? e : t, null == n ? l ? i.add(o.$) : i.add(o.$, null) : i.add(o.$, n), this }, remove: function (e) { return this.getInputElement().$.remove(e), this }, clear: function () { for (var e = this.getInputElement().$; e.length > 0;)e.remove(0); return this }, eA: !0 }, f, !0), C.dialog.checkbox.prototype = d.extend(new C.dialog.bf, { getInputElement: function () { return this._.checkbox.getElement() }, setValue: function (e) { this.getInputElement().$.checked = e, this.oW("change", { value: e }) }, getValue: function () { return this.getInputElement().$.checked }, eZ: function () { this.setValue(!this.getValue()) }, dm: { onChange: function (e, t) { return l ? (e.on("load", function () { var e = this._.checkbox.getElement(); e.on("propertychange", function (t) { "checked" == (t = t.data.$).propertyName && this.oW("change", { value: e.$.checked }) }, this) }, this), this.on("change", t), null) : p.onChange.apply(this, arguments) } }, eA: !0 }, f, !0), C.dialog.radio.prototype = d.extend(new C.dialog.bf, { setValue: function (e) { for (var t, n = this._.children, o = 0; o < n.length && (t = n[o]); o++)t.getElement().$.checked = t.getValue() == e; this.oW("change", { value: e }) }, getValue: function () { for (var e = this._.children, t = 0; t < e.length; t++)if (e[t].getElement().$.checked) return e[t].getValue(); return null }, eZ: function () { var e, t = this._.children; for (e = 0; e < t.length; e++)if (t[e].getElement().$.checked) return void t[e].getElement().focus(); t[0].getElement().focus() }, dm: { onChange: function (e, t) { return l ? (e.on("load", function () { for (var e = this._.children, t = this, n = 0; n < e.length; n++) { e[n].getElement().on("propertychange", function (e) { "checked" == (e = e.data.$).propertyName && this.$.checked && t.oW("change", { value: this.getAttribute("value") }) }) } }, this), this.on("change", t), null) : p.onChange.apply(this, arguments) } }, eA: !0 }, f, !0), C.dialog.file.prototype = d.extend(new C.dialog.dD, f, { getInputElement: function () { var t = e.document.getById(this._.gL).getFrameDocument(); return t.$.forms.length > 0 ? new u(t.$.forms[0].elements[0]) : this.getElement() }, submit: function () { return this.getInputElement().getParent().$.submit(), this }, vy: function (e) { return this.getInputElement().getParent().$.action }, reset: function () { var t = e.document.getById(this._.gL).getFrameDocument(), n = this._.dg, o = this._.buttons; function i() { t.$.open(), r.isCustomDomain() && (t.$.domain = document.domain); var e = ""; n.size && (e = n.size - (l ? 7 : 0)), t.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">', '<form enctype="multipart/form-data" method="POST" action="', d.htmlEncode(n.action), '">', '<input type="file" name="', d.htmlEncode(n.id || "cke_upload"), '" size="', d.htmlEncode(e > 0 ? e : ""), '" />', "</form>", "</body></html>"].join("")), t.$.close(); for (var i = 0; i < o.length; i++)o[i].enable() } r.gecko ? setTimeout(i, 500) : i() }, getValue: function () { return "" }, dm: p, eA: !0 }, !0), C.dialog.fileButton.prototype = new C.dialog.button, e.dialog.addUIElement("text", a), e.dialog.addUIElement("password", a), e.dialog.addUIElement("textarea", c), e.dialog.addUIElement("checkbox", c), e.dialog.addUIElement("radio", c), e.dialog.addUIElement("button", c), e.dialog.addUIElement("select", c), e.dialog.addUIElement("file", c), e.dialog.addUIElement("fileButton", c), e.dialog.addUIElement("html", c), d.extend(CKFinder.dialog, e.dialog) }(), p.add("help", { bM: ["toolbar", "button"], bz: function (t) { t.config.disableHelpButton || (t.bD("help", { exec: function (t) { t.ld["filesview.filesview"].bn().focus(), window.open(e.basePath + "help/" + (t.lang.HelpLang || "en") + "/index.html") } }), t.bY.add("Help", e.UI_BUTTON, { label: t.lang.Help, command: "help" })) } }), function () { var t, n, o, i = 1, a = 2, s = 3, f = 4, p = 5, h = 0, m = 0, g = []; function v(e, t, i, a, r) { for (var l = 0, s = 0, c = [], f = 0; f < e.length; f++)a && !a(e[f]) || (c.push('<a href="', e[f].getUrl(), '" title="', d.escapeHtml(e[f].name), '" rel="', d.escapeHtml(i), '">a</a>'), e[f].isSameFile(t) && (l = s), s++); return o = "ckf_gallery_" + d.getRandomString(20), w(), (n = new u("div", r)).setAttribute("id", o), n.setHtml(c.join("")), n.appendTo(r.bH()), n.hide(), l } function b(t) { if (t && t.inPopup) { var n = new c(t.document), o = n.getWindow(); if (!l && !r.opera || o.$.top.location.href.match(/ckfinder.html/) || "CKFinderpopup" == o.$.top.name) return n } return e.oC } function y(e) { return function () { e.$.activeElement && e.$.activeElement.blur(), e.$.activeElement && e.$.activeElement.blur(), r.gecko || (e.getWindow().focus(), e.bH().focus()) } } function w() { n && n.remove() } function _(e) { return function () { w(), e && e.focus(!0, !0) } } function F(t) { if (t.click) t.click(); else if (e.document.$.createEvent) { var n = e.document.$.createEvent("MouseEvents"); n.initEvent("click", !0, !0), t.dispatchEvent(n) } } function k(e, t, n) { l && r.version < 9 ? e.$.onreadystatechange = function () { "loaded" != this.readyState && "complete" != this.readyState || setTimeout(function () { t.callee.apply(n, t) }, 0) } : e.on("load", function () { setTimeout(function () { t.callee.apply(n, t) }, 0) }) } function C(e, t) { if (!e || !e.inPopup) { e && e.ld["filesview.filesview"].on("afterRenderFiles", w); var n = b(t).getWindow().$; void 0 !== n.jQuery && n.jQuery.fn.colorbox ? h = i : void 0 !== n.jQuery && n.jQuery.fn.fancybox ? h = a : void 0 !== n.jQuery && n.jQuery.fn.prettyPhoto ? h = s : void 0 !== n.Shadowbox ? h = f : void 0 !== n.Prototype && void 0 !== n.Lightbox && (h = p), h && (m = 1) } } CKFinder.addPlugin("gallery", { bM: ["filesview"], appReady: function () { h = 0, m = 0, g = [], t = null, n = null }, galleryCallback: function (e, r, l) { m || C(null, e); var c = b(e), x = c.getWindow().$, E = function (e) { return e.isImage() }; if (!h && e.config.gallery_autoLoad) { if (!E(r)) return !1; var S, N = c.getHead(), D = CKFinder.getPluginPath("gallery") + "colorbox/", T = arguments, R = void 0 === x.jQuery; if (!R) { var $ = x.jQuery.fn.jquery.split("."), W = parseInt($[0], 10), L = parseInt($[1], 10), I = parseInt($[2] || 0, 10); (W < 1 || 1 == W && L < 4 || 1 == W && 4 == L && I < 3) && (R = !0) } return R ? (x.jQuery && (g = [x.jQuery, x.$]), (S = new u("script", c)).setAttribute("type", "text/javascript"), S.setAttribute("src", D + "jquery.min.js"), k(S, T, x), S.appendTo(N), !0) : (c.appendStyleSheet(D + "colorbox.css"), (S = new u("script", c)).setAttribute("type", "text/javascript"), S.setAttribute("src", D + "jquery.colorbox-min.js"), k(S, T, x), S.appendTo(N), !0) } if (g.length && (t = x.jQuery.noConflict(!0), x.jQuery = g[0], x.$ = g[1], g = []), t || (t = x.jQuery), h) { var O, U = d.getRandomString(20), A = "ckf_gallery_" + U; switch (h) { case i: if (!E(r)) return !1; O = v(l, r, A, E, c), t("#" + o + " a").colorbox(d.extend({ minWidth: "300", minHeight: "200", maxWidth: "95%", maxHeight: "95%", scalePhotos: !0, current: e.lang.Gallery.current }, e.config.gallery_config, { rel: A, group: A, onClosed: _(r), onOpen: y(c) }, !0)).eq(O).click(); break; case a: if (!(E = function (e) { return e.isImage() || "swf" == e.ext })(r)) return !1; O = v(l, r, A, E, c), x.jQuery("#" + o + " a").fancybox(d.extend({}, e.config.gallery_config, { onClosed: w, onComplete: y(c), afterClose: _(r), afterShow: y(c) }, !0)).eq(O).click(); break; case s: if (!(E = function (e) { return e.isImage() || "swf" == e.ext || "mov" == e.ext })(r)) return !1; O = v(l, r, "prettyPhoto[ckf_gallery_" + U + "]", E, c), x.jQuery("#" + o + " a").prettyPhoto(d.extend({}, e.config.gallery_config, { callback: _(r), changepicturecallback: y(c) }, !0)).eq(O).click(); break; case f: if (!(E = function (e) { return e.isImage() || "swf" == e.ext || "mov" == e.ext })(r)) return !1; O = v(l, r, A, E, c), x.Shadowbox.qi("#" + o + " a", d.extend({}, e.config.gallery_config, { gallery: A, onClose: _(r), onFinish: y(c) }, !0)), F(n.eG("a").getItem(O).$); break; case p: if (!E(r)) return !1; O = v(l, r, "lightbox[ckf_gallery_" + U + "]", E, c), F(n.eG("a").getItem(O).$); break; default: return !1 }return !0 } return !1 }, bz: C }) }(), f.gallery_autoLoad = !0, function () { var t = "ckCsrfToken"; "function" != typeof String.prototype.trim && (String.prototype.trim = function () { for (var e = this.replace(/^\s+/, ""), t = e.length - 1; t >= 0; t--)if (/\S/.test(e.charAt(t))) { e = e.substring(0, t + 1); break } return e }), e.getCsrfToken = function () { var e = function (e) { e = e.toLowerCase(); for (var t = document.cookie.split(";"), n = 0; n < t.length; n++) { var o = t[n].split("="), i = decodeURIComponent(o[0].trim().toLowerCase()), a = o.length > 1 ? o[1] : ""; if (i === e) return decodeURIComponent(a) } return "" }(t); return 40 != e.length && (e = function (e) { return d.getRandomString(e) }(40), function (e, t) { document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(t) + ";path=/" }(t, e)), e }, p.add("csrftokenmanager") }(), function () { function t(t) { if (!t || t.type != e.cv || "form" != t.getName()) return []; for (var n = [], o = ["style", "className"], i = 0; i < o.length; i++) { var a = o[i], r = t.$.elements.namedItem(a); if (r) { var l = new u(r); n.push([l, l.nextSibling]), l.remove() } } return n } function n(t, n) { if (t && t.type == e.cv && "form" == t.getName() && n.length > 0) for (var o = n.length - 1; o >= 0; o--) { var i = n[o][0], a = n[o][1]; a ? i.insertBefore(a) : i.appendTo(t) } } function o(e, o) { var i = t(e), a = {}, r = e.$; return o || (a.class = r.className || "", r.className = ""), a.inline = r.style.cssText || "", o || (r.style.cssText = "position: static; overflow: visible"), n(i), a } function i(e, o) { var i = t(e), a = e.$; "class" in o && (a.className = o.class), "inline" in o && (a.style.cssText = o.inline), n(i) } var a = null, s = null; p.add("maximize", { bz: function (t) { var n, f, p, h = t.lang.Maximize, m = e.oC.getWindow(), g = [0, 0, 0, 0], v = {}; n = e.document.getWindow().$; try { n = n.frameElement } catch (e) { n = null } function b(e) { var o = m.eR(); if (!e && n && (e = [n]), e) { for (var i = 0, a = e.length; i < a; i++)e[i].setStyles({ width: o.width + "px", height: o.height + "px" }); t.oW("resize") } else t.resize(o.width, o.height) } (n = n && new u(n)) && !n.getFrameDocument().bH().hasClass("CKFinderFrameWindow") && (n = null), t.bD("maximize", { oD: !1, exec: function () { var y = t.document.getWindow().$; if (t.cg.inPopup && (!l && !r.opera || y.top.location.href.match(/ckfinder.html/) || "CKFinderpopup" == y.top.name)) { y = t.document.getWindow().$.parent; this.bu == e.aS ? (g[2] = y.screenLeft || y.screenX, g[3] = y.screenTop || y.screenY, y.moveTo(0, 0), s || (s = [y.screenLeft || y.screenX, y.screenTop || y.screenY]), g[2] -= s[0], g[3] -= s[1], y.outerHeight ? (g[0] = y.outerWidth, g[1] = y.outerHeight) : (g[0] = y.document.body.scrollWidth, g[1] = y.document.body.scrollHeight, a || (y.resizeTo(y.screen.availWidth, y.screen.availHeight), a = [y.screen.availWidth - y.document.body.scrollWidth, y.screen.availHeight - y.document.body.scrollHeight]), g[0] += a[0], g[1] += a[1]), y.resizeTo ? y.resizeTo(y.screen.availWidth, y.screen.availHeight) : (y.outerHeight = y.screen.availHeight, y.outerWidth = y.screen.availWidth)) : (y.resizeTo ? y.resizeTo(g[0], g[1]) : (y.outerWidth = g[0], y.outerHeight = g[1]), y.moveTo(g[2], g[3])) } else { var w = n || t.container; if (this.bu == e.aS) { f = m.hV(); for (var _, F = w; F = F.getParent();)_ = d.getNextNumber(), v[_] = o(F), F.$.og = _, F.is("html", "body") && F.setStyle("overflow", "hidden"), F.setStyle("z-index", t.config.baseFloatZIndex - 1); _ = d.getNextNumber(), v[_] = o(w, !0), w.$.og = _; var k = [w]; for (y = w.getDocument().getWindow().$; y.frameElement;)k.push(u.eB(y.frameElement)), y = y.parent; p = function () { b(k) }, m.on("resize", p); var C, x = new c(y.document), E = { overflow: r.webkit ? "" : "hidden", width: 0, height: 0 }; x.gT().setStyles(E), !r.gecko && x.gT().setStyle("position", "fixed"), x.bH().setStyles(E), l ? setTimeout(function () { m.$.scrollTo(0, 0) }, 0) : m.$.scrollTo(0, 0); for (var S = 0, N = k.length; S < N; S++)(C = k[S]).setStyle("position", "absolute"), C.$.offsetLeft, C.setStyles({ "z-index": t.config.baseFloatZIndex - 1, left: "0px", top: "0px" }); k[0].addClass("cke_maximized"), b(k); var D = k[0].ir(); k[0].setStyles({ left: -1 * D.x + "px", top: -1 * D.y + "px" }) } else { m.removeListener("resize", p); for (F = w; F;)i(F, v[F.$.og]), F.$.og = null, F = F.getParent(); v = {}, l ? setTimeout(function () { m.$.scrollTo(f.x, f.y) }, 0) : m.$.scrollTo(f.x, f.y), w.removeClass("cke_maximized"), r.webkit && (w.setStyle("display", "inline"), setTimeout(function () { w.setStyle("display", "block") }, 0)), t.oW("resize") } } this.rJ(); var T = this.pW[0]; if (T) { var R = this.bu == e.aS ? h.maximize : h.minimize, $ = t.document.getById(T._.id); $.getChild(1).setHtml(R), $.setAttribute("title", R), $.setAttribute("href", 'javascript:void("' + R + '");') } } }), t.bY.qW("Maximize", { label: h.maximize, command: "maximize" }) } }) }(), function () { var e = {}; function t(e, t) { for (var n = 0, o = t.length; n < o; n++)if (t[n].name && t[n].name === e) return !0; return !1 } CKFinder.addPlugin("zip", { uiReady: function (n) { var o = n.lang.Zip; CKFinder.dialog.add("compressToFileName", function (e) { var t = e.getSelectedFolder(); return { title: e.lang.DestinationFile, minWidth: 270, minHeight: 60, contents: [{ id: "tab1", label: "", title: "", expand: !0, style: CKFinder.env.ie7Compat ? "height:auto" : "", padding: 0, elements: [{ id: "msg", className: "cke_dialog_error_msg", type: "html", html: e.lang.FileRename }, { type: "hbox", widths: ["90%", "10%"], padding: 0, children: [{ type: "text", label: "", id: "fileName", default: t.name, validate: function () { if (!this.getValue()) return e.openMsgDialog("", e.lang.ErrorMsg.FileEmpty), !1 } }, { type: "html", html: ".zip", id: "fileNameExt", onLoad: function () { this.getElement().getParent().setStyles({ "vertical-align": "bottom", "padding-bottom": "2px" }) } }] }] }], buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }), CKFinder.dialog.add("unzipDirExists", function (t) { var n = t.getSelectedFolder(), i = [[t.lang.ManuallyRename, "manuallyrename"]]; return n.acl.fileDelete && n.acl.fileRename && n.acl.folderRename && n.acl.folderDelete && i.push([o.removeAndExtract, "overwrite"], [o.extractAndOverwrite, "merge"]), { title: t.lang.ErrorMsg.FolderNameExists, minWidth: 270, minHeight: 60, contents: [{ id: "tab1", label: "", title: "", expand: !0, style: CKFinder.env.ie7Compat ? "height:auto" : "", padding: 0, elements: [{ id: "msg", className: "cke_dialog_error_msg", type: "html", html: "" }, { type: "hbox", className: "cke_dialog_file_exist_options", children: [{ label: t.lang.common.makeDecision, type: "radio", id: "option", default: "manuallyrename", items: i }] }] }], onOk: function () { var n = this.getValueOf("tab1", "option"); return "manuallyrename" == n && (n = null), e.extractTo(t.getSelectedFile(), n), !0 }, onCancel: function () { return e.ma(n), !0 }, buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }), CKFinder.dialog.add("unzipFileExists", function (t) { var n = t.getSelectedFolder(); return { title: t.lang.FileExistsDlgTitle, minWidth: 350, minHeight: 120, contents: [{ id: "tab1", label: "", title: "", style: CKFinder.env.ie7Compat ? "height:auto" : "", expand: !0, padding: 0, elements: [{ id: "msg", className: "cke_dialog_error_msg", type: "html", widths: ["70%", "30%"], html: "" }, { type: "hbox", className: "cke_dialog_file_exist_options", children: [{ type: "radio", id: "option", label: t.lang.common.makeDecision, default: "autorename", items: [[t.lang.FileAutorename, "autorename"], [t.lang.FileOverwrite, "overwrite"], [t.lang.common.skip, "skip"]] }] }, { type: "hbox", className: "cke_dialog_remember_decision", children: [{ type: "checkbox", id: "remember", label: t.lang.common.rememberDecision }] }] }], onCancel: function () { return e.ma(n), !0 }, buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }), CKFinder.dialog.add("compressFileExists", function (t) { var n = t.getSelectedFolder(), o = [[t.lang.ManuallyRename, "manuallyrename"]]; return n.acl.fileDelete && n.acl.fileRename && o.push([t.lang.FileAutorename, "autorename"], [t.lang.FileOverwrite, "overwrite"]), { title: t.lang.FileExistsDlgTitle, minWidth: 270, minHeight: 60, contents: [{ id: "tab1", label: "", title: "", expand: !0, style: CKFinder.env.ie7Compat ? "height:auto" : "", padding: 0, elements: [{ id: "msg", className: "cke_dialog_error_msg", type: "html", html: "" }, { type: "hbox", className: "cke_dialog_file_exist_options", children: [{ label: t.lang.common.makeDecision, type: "radio", id: "option", default: "manuallyrename", items: o }] }] }], onOk: function () { var n = this.getValueOf("tab1", "option"); return "manuallyrename" == n && (n = null), e.nX(t.getSelectedFolder(), e.pp.download, n), !0 }, onCancel: function () { return e.ma(n), !0 }, buttons: [CKFinder.dialog.okButton, CKFinder.dialog.cancelButton] } }), n.connector.app.dZ("zip", 112), e = { rQ: { iz: /[\\\/:\*\?"<>\|]/ }, iG: { extractHere: { label: o.extractHereLabel, command: "ExtractHere", group: "zip", icon: CKFinder.getPluginPath("zip") + "images/zip.gif" }, extractTo: { label: o.extractToLabel, command: "ExtractTo", group: "zip", icon: CKFinder.getPluginPath("zip") + "images/zip.gif" }, downloadZip: { label: o.downloadZipLabel, command: "DownloadZip", group: "zip", icon: CKFinder.getPluginPath("zip") + "images/zip.gif" }, compressZip: { label: o.compressZipLabel, command: "CompressZip", group: "zip", icon: CKFinder.getPluginPath("zip") + "images/zip.gif" } }, ma: function (e) { e.getChildren(function (t) { e.close(), e.showFiles(), e.open() }, !0) }, oc: function (t) { return t && t.length ? !!e.rQ.iz.test(t) && n.lang.ErrorMsg.FolderInvChar : n.lang.ErrorMsg.FolderEmpty }, nI: function (o) { if (e.filesList[e.currentItem]) { if (e.filesList[e.currentItem].options && t(e.filesList[e.currentItem].options, [{ name: "skip" }, { name: "ok" }])) return e.currentItem++, void n.openDialog("unzipFileExists", e.nI); o.show(); var i = n.lang.ErrorMsg["Folder" == e.filesList[e.currentItem].type ? "FolderExists" : "FileExists"]; i = "<strong>" + i.replace("%s", e.filesList[e.currentItem].name) + "</strong>", o.getContentElement("tab1", "msg").getElement().setHtml(i), o.on("ok", function (t) { t.removeListener(); var i = o.getValueOf("tab1", "remember"), a = o.getValueOf("tab1", "option"); if (!i) { for (e.filesList[e.currentItem].options = a, e.currentItem++; e.currentItem < e.filesList.length && e.filesList[e.currentItem].options && (!e.filesList[e.currentItem].options || "skip" == e.filesList[e.currentItem].options);)e.currentItem++; return e.currentItem < e.filesList.length ? void setTimeout(function () { n.openDialog("unzipFileExists", e.nI) }, 0) : void e.extractHere(n.getSelectedFile(), !0) } for (var r = 0, l = e.filesList.length; r < l; r++)e.filesList[r].options || (e.filesList[r].options = a); e.extractHere(n.getSelectedFile(), !0) }) } else e.extractHere(n.getSelectedFile(), !0) }, extract: function (t) { var i = {}, a = t.file; t.extra && (i = t.extra), i.fileName = t.file.name, n.connector.sendCommandPost(t.action, null, i, function (t) { if (e.filesList = [], 303 == t.getErrorNumber()) { e.currentItem = 0; for (var i, a = t.selectNodes("Connector/Errors/Error"), r = t.selectNodes("Connector/UnzippedFiles/File"), l = 0, s = 0, d = a.length; s < d; s++)i = "skip", 115 == a[s].getAttribute("code") && (l = 1, i = null), e.filesList[s] = { name: a[s].getAttribute("name"), options: i, type: a[s].getAttribute("type"), code: a[s].getAttribute("code") }; var c = 0; for (d = r.length; c < d; c++, s++)e.filesList[s] = { name: r[c].getAttribute("name"), options: r[c].getAttribute("action"), type: "File", code: 0 }; if (l) return void n.openDialog("unzipFileExists", e.nI) } else if (t.checkError()) return; var u = t.selectNodes("Connector/FolderExists/Folder"); if (!u || !u.length) { if ((r = t.selectNodes("Connector/UnzippedFiles/File")) && r.length) { for (var f = [], p = (s = 0, r.length); s < p; s++)"skip" == r[s].getAttribute("action") && f.push(r[s].getAttribute("name")); if (e.filesList) for (s = 0, p = e.filesList.length; s < p; s++)f.push(e.filesList[s].name); if (f.length) return n.openSkippedFilesDialog(null, f, o.extractSuccess), e.ma(n.getSelectedFolder()), !0 } return n.openMsgDialog("OK", o.extractSuccess), e.ma(n.getSelectedFolder()), !0 } n.openDialog("unzipDirExists", function (e) { e.show(); var t = n.lang.FolderNameExists; t = "<strong>" + t.replace("%s", u[0].getAttribute("name")) + "</strong>", e.getContentElement("tab1", "msg").getElement().setHtml(t) }) }, a.folder.type, a.folder) }, extractHere: function (t, i) { if (i) { for (var a = !1, r = 0, l = e.filesList.length; r < l; r++)if (115 == e.filesList[r].code && "skip" != e.filesList[r].options) { a = !0, i = {}; for (r = 0, l = e.filesList.length; r < l; r++)i["files[" + r + "][name]"] = e.filesList[r].name, i["files[" + r + "][options]"] = e.filesList[r].options; break } if (!a) { var s = []; for (r = 0, l = e.filesList.length; r < l; r++)s.push(e.filesList[r].name); return void n.openSkippedFilesDialog(null, s, o.extractSuccess, function () { return e.ma(n.getSelectedFolder()), !0 }) } } i = i || {}, e.extract({ action: "ExtractHere", file: t, extra: i }) }, extractTo: function (o, i) { i ? e.extract({ action: "ExtractTo", file: o, extra: { extractDir: e.extractDir || "/", force: i } }) : n.openInputDialog(n.lang.DestinationFolder, n.lang.FolderRename, "", function (a) { var r = n.getSelectedFolder(), l = (a = CKFinder.tools.trim(a), e.oc(a)); if (l) return n.openConfirmDialog("", l, function (t) { e.extractTo(o, i) }), !1; e.extractDir = a, r.hasChildren ? r.getChildren(function (i) { t(a, i) ? n.openDialog("unzipDirExists", function (e) { e.show(); var t = n.lang.ErrorMsg.FolderExists; t = "<strong>" + t.replace("%s", a) + "</strong>", e.getContentElement("tab1", "msg").getElement().setHtml(t) }) : e.extract({ action: "ExtractTo", file: o, extra: { extractDir: a } }) }, !0) : (r.createNewFolder(a), e.extract({ action: "ExtractTo", file: o, extra: { extractDir: a } })) }) }, downloadZip: function (e, t, o) { var i = n.connector.composeUrl("DownloadZip", { FileName: e, ZipName: t }, o.type, o); n.connector.app.ld["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(n.document), i) }, oH: function (t, o) { n.connector.sendCommandPost("CreateZip", null, o, function (n) { if (!n.checkError()) { if (o.download) if (i = n.selectSingleNode("Connector/ZipFile")) { var i = i.getAttribute("name"); return e.downloadZip(i, o.zipName, t) } e.ma(t) } }, t.type, t) }, nX: function (o, i, a, r) { var l = { zipName: o.name + ".zip", download: i }; if (r) for (var s = 0, d = r.length; s < d; s++)l["files[" + s + "][name]"] = r[s].name, l["files[" + s + "][type]"] = r[s].folder.type, l["files[" + s + "][folder]"] = r[s].folder.getPath(); if (a) return (l = e.pp).fileExistsAction = a, e.oH(o, l); if (o.isBasket || i) { if (o.isBasket && void 0 === r) { l.zipName = "basket.zip"; for (s = 0, d = n.basketFiles.length; s < d; s++)l["files[" + s + "][name]"] = n.basketFiles[s].name, l["files[" + s + "][type]"] = n.basketFiles[s].folder.type, l["files[" + s + "][folder]"] = n.basketFiles[s].folder.getPath() } return o.isBasket && (o = n.folders[1], l.basket = !0), e.oH(o, l) } n.openDialog("compressToFileName", function (a) { a.show(), a.getContentElement("tab1", "fileName").getElement().setValue(o.name), a.on("ok", function (r) { r.removeListener(); var s = a.getValueOf("tab1", "fileName"); s = CKFinder.tools.trim(s) + ".zip"; var d = e.oc(s); if (d) return n.openConfirmDialog("", d, function (t) { e.nX(o, i) }), !1; l.zipName = s, o.getFiles(function (i) { if (t(s, i)) return e.pp = l, n.openDialog("compressFileExists", function (e) { e.show(); var t = n.lang.ErrorMsg.FileExists; t = "<strong>" + t.replace("%s", s) + "</strong>", e.getContentElement("tab1", "msg").getElement().setHtml(t) }), !1; e.oH(o, l) }, !0) }) }) } }, n.addFileContextMenuOption(e.iG.extractHere, function (t, n) { e.extractHere(n) }, function (e) { if (n.getSelectedFolder().isBasket) return !1; var t = n.getSelectedFiles(); return !("zip" !== e.ext.toLowerCase() || n.config.selectMultiple && t.length > 1) && (!(!e.folder.acl.fileUpload || !e.folder.acl.folderCreate) || -1) }), n.addFileContextMenuOption(e.iG.extractTo, function (t, n) { e.extractTo(n) }, function (e) { if (n.getSelectedFolder().isBasket) return !1; var t = n.getSelectedFiles(); return !("zip" !== e.ext.toLowerCase() || n.config.selectMultiple && t.length > 1) && (!(!e.folder.acl.fileUpload || !e.folder.acl.folderCreate) || -1) }), n.addFileContextMenuOption(e.iG.compressZip, function (t, n) { var o = t.getSelectedFiles(), i = t.getSelectedFolder(); e.nX(i, !1, !1, o) }, function (e) { var t = n.getSelectedFolder(); if (t.isBasket) return !1; var o = n.getSelectedFiles(); return !(!n.config.selectMultiple || o.length < 2) && (!!(e.folder.acl.fileUpload && e.folder.acl.folderCreate && t.getResourceType().isExtensionAllowed("zip")) || -1) }), n.addFileContextMenuOption(e.iG.downloadZip, function (t, n) { var o = t.getSelectedFiles(), i = t.getSelectedFolder(); e.nX(i, !0, !1, o) }, function (e) { var t = n.getSelectedFiles(); return !(!n.config.selectMultiple || t.length < 2) && (!!e.folder.acl.fileUpload || -1) }), n.addFolderContextMenuOption(e.iG.compressZip, function (t, n) { e.nX(n, !1) }, function (e) { return !e.isBasket && (!(!e.acl.fileUpload || !e.getResourceType().isExtensionAllowed("zip") || !n.files.length && !e.hasChildren) || -1) }), n.addFolderContextMenuOption(e.iG.downloadZip, function (t, n) { e.nX(n, !0) }, function (e) { return e.isBasket ? !!e.app.basketFiles.length || -1 : !(!e.acl.fileUpload || !n.files.length && !e.hasChildren) || -1 }), n.connector.app.ld["filesview.filesview"].on("beforeContextMenu", function (e) { n.getSelectedFiles().length > 1 && delete e.data.bj.downloadFile }) }, basketToolbar: [["DownloadZip", { label: "downloadZipLabel", icon: CKFinder.getPluginPath("zip") + "images/zip.gif", onClick: function (t) { var n = t.getSelectedFolder(); n.app.basketFiles.length && e.nX(n, !0) }, disableEmpty: !0 }]] }) }(), e.skins.add("kama", function () { var t = ["images/loaders/16x16.gif", "images/loaders/32x32.gif", "images/ckffolder.gif", "images/ckffolderopened.gif"]; return l && r.version < 7 && t.push("images/sprites_ie6.png"), { ls: t, application: { css: ["app.css"] }, host: { qx: 1, css: ["host.css"] }, mA: 7, kN: 7, ps: 1, bz: function (t) { t.config.width && !isNaN(t.config.width) && (t.config.width -= 12); var n = [], o = "/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}"; if (r.webkit) { o = o.split("}").slice(0, -1); for (var i = 0; i < o.length; i++)o[i] = o[i].split("{") } function a(e) { var t = e.getHead().append("style"); return t.setAttribute("id", "cke_ui_color"), t.setAttribute("type", "text/css"), t } function s(e, t, n) { for (var o, i, a, s = 0; s < e.length; s++)if (r.webkit) { for (i = 0; i < e[s].$.sheet.rules.length; i++)e[s].$.sheet.removeRule(i); for (i = 0; i < t.length; i++) { for (a = t[i][1], o = 0; o < n.length; o++)a = a.replace(n[o][0], n[o][1]); e[s].$.sheet.addRule(t[i][0], a) } } else { for (a = t, o = 0; o < n.length; o++)a = a.replace(n[o][0], n[o][1]); l ? e[s].$.styleSheet.cssText = a : e[s].setHtml(a) } } var c = /\$color/g; d.extend(t, { uiColor: null, rk: function () { return this.uiColor }, setUiColor: function (i) { var l, d, u = a(e.oC), f = a(this.document), p = ".cke_" + t.name.replace(".", "\\."), h = [p + " .cke_wrapper", p + "_dialog .cke_dialog_contents", p + "_dialog a.cke_dialog_tab", p + "_dialog .cke_dialog_footer"].join(","), m = "background-color: $color !important;"; return r.webkit ? (l = [[h, m]], d = [["body," + h, m]]) : (l = h + "{" + m + "}", d = "body," + h + "{" + m + "}"), (this.setUiColor = function (e) { var i = [[c, e]]; t.uiColor = e, s([u], l, i), s([f], d, i), s(n, o, i) })(i) } }), t.on("menuShow", function (e) { var i = e.data[0].element.eG("iframe").getItem(0).getFrameDocument(); if (!i.getById("cke_ui_color")) { var r = a(i); n.push(r); var l = t.rk(); l && s([r], o, [[c, l]]) } }), t.config.uiColor && t.on("uiReady", function () { t.setUiColor(t.config.uiColor) }) } } }()), function () { function t() { e.dialog.on("resize", function (e) { var t = e.data, n = t.width, o = t.height, i = t.dialog, a = i.bO.contents; "kama" == t.skin && (a.setStyles({ width: n + "px", height: o + "px" }), setTimeout(function () { var e = i.bO.dialog.getChild([0, 0, 0]), t = e.getChild(0), n = e.getChild(2); n.setStyle("width", t.$.offsetWidth + "px"), (n = e.getChild(7)).setStyle("width", t.$.offsetWidth - 28 + "px"), (n = e.getChild(4)).setStyle("height", t.$.offsetHeight - 31 - 14 + "px"), (n = e.getChild(5)).setStyle("height", t.$.offsetHeight - 31 - 14 + "px") }, 100)) }) } e.dialog ? t() : e.on("dialogPluginReady", t) }(), e.skins.add("v1", function () { var e = ["images/loaders/16x16.gif", "images/loaders/32x32.gif", "images/ckffolder.gif", "images/ckffolderopened.gif"]; return l && r.version < 7 && e.push("images/sprites_ie6.png"), { ls: e, application: { css: ["app.css"] }, ps: 1, rv: -8, kN: 0, host: { qx: 1, css: ["host.css"] } } }()), function () { function t() { e.dialog.on("resize", function (e) { var t = e.data, n = t.width, o = t.height, i = t.dialog, a = i.bO.contents; "v1" == t.skin && (a.setStyles({ width: n + "px", height: o + "px" }), setTimeout(function () { var e = i.bO.dialog.getChild([0, 0, 0]), t = e.getChild(0), n = e.getChild(2); n.setStyle("width", t.$.offsetWidth + "px"), (n = e.getChild(7)).setStyle("width", t.$.offsetWidth - 28 + "px"), (n = e.getChild(4)).setStyle("height", t.$.offsetHeight - 31 - 14 + "px"), (n = e.getChild(5)).setStyle("height", t.$.offsetHeight - 31 - 14 + "px") }, 100)) }) } e.dialog ? t() : e.on("dialogPluginReady", t) }(), function () { function t(e, t, n) { var o = e.querySelectorAll(t); if (o) for (var i = 0; i < o.length; ++i)n.call(o[i]) } function n() { e.dialog.on("resize", function (e) { var n = e.data, o = n.width, i = n.height, a = n.dialog, r = a.bO.contents; "bootstrap" == n.skin && (r.setStyles({ width: o + "px", height: i + "px" }), setTimeout(function () { var e = a.bO.dialog.getChild([0, 0, 0]), n = e.getChild(0), o = e.getChild(2); o.setStyle("width", n.$.offsetWidth + "px"), (o = e.getChild(7)).setStyle("width", n.$.offsetWidth - 28 + "px"), (o = e.getChild(4)).setStyle("height", n.$.offsetHeight - 31 - 14 + "px"), (o = e.getChild(5)).setStyle("height", n.$.offsetHeight - 31 - 14 + "px"); var i = a._.element.$; t(i, 'input[type="text"]', function () { this.classList.add("form-control") }), t(i, "a.cke_dialog_ui_button", function () { var e = this.classList; e.add("btn"), e.contains("cke_dialog_ui_button_ok") ? e.add("btn-success") : e.contains("cke_dialog_ui_button_cancel") ? e.add("btn-danger") : e.add("btn-default") }) }, 100)) }) } e.skins.add("bootstrap", { application: { css: ["app.css"] }, host: { qx: 1, css: ["host.css"] }, heightAdjust: 50, bz: function (e) { e.config.jh = "png", e.on("appReady", function () { var t = e.document.$, n = "rtl" === t.dir; n || t.querySelector("#toolbar_view .cke_toolbar").classList.add("col-md-10"), t.querySelector(".cke_search_box").classList.add("col-md-2", n ? "pull-left" : "pull-right"); var o = t.querySelector(".cke_search_box input"); o.classList.add("form-control"), o.setAttribute("placeholder", e.lang.Search.searchPlaceholder + "...") }) } }), e.dialog ? n() : e.on("dialogPluginReady", n) }(), e.gc.add("default", { dQ: function (t) { t.name; var n = t.element, o = t.ff; if (n && o != e.kZ) { t.layout = new e.application.layout(t); var i = t.oW("themeSpace", { space: "head", html: "" }), a = t.oW("themeSpace", { space: "sidebar", html: "" }), s = t.oW("themeSpace", { space: "mainTop", html: "" }), c = t.oW("themeSpace", { space: "mainMiddle", html: "" }), u = t.oW("themeSpace", { space: "mainBottom", html: "" }), f = t.config.skin.indexOf(","), p = (-1 == f ? t.config.skin : t.config.skin.substr(0, f)) || "kama", h = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="' + t.lang.LangCode + '" dir="' + t.lang.dir + '"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />' + i.html + "</head><body>" + (r.ie6Compat ? '<div id="ckfinder" role="application">' : '<div id="ckfinder" role="application" style="visibility: hidden">') + '\x3c!-- 1. CKE Skin class. --\x3e<div class="fake_wrapper cke_skin_' + p + '">\x3c!-- 2. High contrast class. --\x3e<div class="fake_wrapper">\x3c!-- Applicable: hc cke_hc --\x3e\x3c!-- 3. Browser class. --\x3e<div class="fake_wrapper ' + r.cssClass + '">\x3c!-- 4. RTL class. --\x3e<div class="fake_wrapper cke_' + ("ltr" == t.lang.dir || l && r.version < 8 ? "ltr" : "rtl") + '">\x3c!-- Applicable: rtl cke_rtl --\x3e\x3c!-- 5. Layout class. --\x3e<div class="fake_wrapper"><div id="ckfinder_view" class="columns_2">\x3c!-- Applicable: columns_1 columns_2 --\x3e<div id="sidebar_container" class="container" role="region"' + (t.config.sidebarWidth ? ' style="width: ' + d.cssLength(t.config.sidebarWidth) + '"' : "") + '><div id="sidebar_wrapper" class="wrapper">' + a.html + '</div></div><div id="main_container" class="container" role="region">' + s.html + c.html + u.html + "</div></div></div></div></div></div></div></div></body></html>"; e.log("[THEME] DOM flush using document.write"), t.document.$.write(h), t.cr("themeLoaded"), t.cr("uiReady", function () { m(), t.cr("appReady", function () { if (m(), r.ie8) { var e, n = t.document.$; if (n.documentMode ? e = n.documentMode : (e = 5, n.compatMode && "CSS1Compat" == n.compatMode && (e = 7)), e < 8) { var o = t.plugins.tools; o.showTool(o.addTool('<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>')) } } var i; r.ie6Compat && t.document.getWindow().on("resize", m), t.document.getWindow().on("resize", function () { t.layout.ea.call(t.layout) }), function e() { var n = 0; if (i = i || t.document.getHead().eG("link").getItem(0)) try { i.$.sheet && i.$.sheet.cssRules.length > 0 ? n = 1 : i.$.styleSheet && i.$.styleSheet.cssText.length > 0 ? n = 1 : i.$.innerHTML && i.$.innerHTML.length > 0 && (n = 1) } catch (e) { } n ? r.ie6Compat ? (m(), t.layout.ea(), setTimeout(function () { t.layout.ea() }, 500)) : (t.layout.ea(!0), setTimeout(function () { t.document.getById("ckfinder").removeStyle("visibility") })) : window.setTimeout(e, 250) }() }) }) } function m() { r.ie6Compat && (t.layout.oG = t.document.getWindow().eR()) } }, pu: function (t) { var n = d.getNextNumber(), o = u.kE(['<div class="cke_compatibility cke_' + t.name.replace(".", "\\.") + "_dialog cke_skin_", t.gd, '" dir="', t.lang.dir, '" lang="', t.langCode, '"><table class="cke_dialog', " " + r.cssClass.replace(/browser/g, "cke_browser"), " cke_", t.lang.dir, '" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>', l ? "" : "<style>.cke_dialog{visibility:hidden;}</style>", "</div>"].join("").replace(/#/g, "_" + n).replace(/%/g, "cke_dialog_"), e.document), i = o.getChild([0, 0, 0, 0, 0]), a = i.getChild(0), s = i.getChild(1); return a.unselectable(), s.unselectable(), { element: o, bO: { dialog: o.getChild(0), title: a, close: s, tabs: i.getChild(2), contents: i.getChild([3, 0, 0, 0]), footer: i.getChild(4) } } }, destroy: function (t) { var n = t.container, o = t.ia; n && n.remove(); for (var i = 0; o && i < o.length; i++)o[i].remove(); t.element && (t.ff == e.fc && t.element.remove(), delete t.element) } }), e.application.prototype.vU = function (t) { var n = "" + t; return this._[n] || (this._[n] = e.document.getById(n + "_" + this.name)) }, e.application.prototype.nJ = function (e) { /^\d+$/.test(e) && (e += "px"), this.layout.dV().setStyle("width", e), this.oW("resize"), this.layout.ea() }, e.application.prototype.resize = function (e, t) { this.element.getChild(0).setStyle("height", t + "px"), this.element.getChild(0).setStyle("width", e + "px") }, function () { var t = "<div class='view tool_panel' style='padding:2px;display:block !important;position:static !important;color:black !important;background-color:white !important;'>", n = "</div>", o = "This is the DEMO version of CKFinder. Please visit the <a href='http://cksource.com/ckfinder' target='_blank'>CKFinder web site</a> to obtain a valid license.", i = "CKFinder Developer License<br/>Licensed to: ", a = t + o + n, s = t + i + n; function c(e, t, n) { for (var o = 0, i = 0, a = 0; a < e.$.parentNode.childNodes.length; a++) { var s = e.$.parentNode.childNodes[a]; if (1 == s.nodeType) { var d = s == e.$; if (!s.offsetHeight && !d) continue; i++, d || (o += s.offsetHeight) } } var c = e.$.offsetHeight - e.$.clientHeight, u = (i - 1) * t; !r.ie6Compat || r.ie8 || r.ie7Compat || (u += 2 * t); var f = (l ? e.$.parentNode.parentNode.parentNode.offsetHeight : e.$.parentNode.offsetHeight) - c - o - (u || 0); n && (f += n); try { e.setStyle("height", f + "px") } catch (e) { } } e.application.layout = function (e) { this.app = a.length ? e : null, this.jB = null }, e.application.layout.prototype = { ea: function (t) { this.jB || (this.jB = d.setTimeout(function () { e.log("[THEME] Repainting layout"); var u = e.bs.indexOf(e.bF.substr(1, 1)) % 5, f = [e.bF.substr(8, 1), e.bF.substr(6, 1)], p = e.bF && e.bF.substr(3, 1) != e.bs.substr(9 * (e.bs.indexOf(e.bF.substr(0, 1)) + e.bs.indexOf(e.bF.substr(2, 1))) % (e.bs.length - 1), 1), h = !!e.ed && f[1] != function (t) { return e.bs.substr(9 * t % 32, 1) }(e.ed.length + e.bs.indexOf(f[0])); if (e.bF && 1 == u && e.lS(window.top[e.nd + "cation"][e.jG + "st"]) != e.lS(e.ed) || 4 == u || p) { for (var m = this.dV().getChild(0).getChildren(), g = 0, v = 0; v < m.count(); v++)"static" == m.getItem(v).rd("position") && (g = 1); if (!g) { if ("bootstrap" == this.app.gd) { var b = "<div class='view tool_panel' style='display:block !important;position:static !important;color:#31708f !important;background-color:#d9edf7 !important;font-size: 13px; padding: 5px; margin:5px;border-radius:4px;'>"; a = b + o + n, s = b + i + n } this.dV().getChild(0).appendHtml(p || h || 4 != u ? a : s + "<b>" + d.htmlEncode(e.ed) + "</b></div>") } } var y = this.pn(), w = this.pS(), _ = e.skins.loaded[this.app.gd]; if (_.ps && l && r.ie6Compat && !r.ie8) { var F = this.mB(), k = this.dV(), C = 3 * _.kN, x = _.rv ? _.rv : 0, E = this.oG.width - k.$.offsetWidth - C + x; F.setStyle("width", E + "px") } y && c(y, _.mA, _.heightAdjust), w && c(w, _.kN), this.jB = null, t = !1, this.app.oW("afterRepaintLayout"), r.ie6Compat && d.setTimeout(function () { this.app.element.$.style.cssText += "" }, 0, this) }, !0 === t ? 0 : 500, this)) }, dV: function () { var e = this; return e.kS || (e.kS = e.app.document.getById("sidebar_container")), e.kS }, mB: function () { var e = this; return e.lb || (e.lb = e.app.document.getById("main_container")), e.lb }, pS: function () { var e = this; return void 0 === e.kK && (e.kK = e.app.document.getById("folders_view")), e.kK }, pn: function () { var e = this; return void 0 === e.kD && (e.kD = e.app.document.getById("files_view")), e.kD } } }() }();